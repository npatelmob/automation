/**
 * Backbase Web SDK for Android and iOS webviews - Copyright Â© 2018 Backbase B.V - All Rights Reserved
 * Version 6.0.0
 * http://www.backbase.com
 */
!function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=r[a]={exports:{}};t[a][0].call(u.exports,function(e){var r=t[a][1][e];return i(r?r:e)},u,u.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,r){},{}],2:[function(e,t,r){"use strict";function n(e){if("undefined"==typeof e||null===e)return e;if(Array.isArray(e))return e.slice();if("object"==typeof e){var t={};return Object.keys(e).forEach(function(r){t[r]=e[r]}),t}return e}function i(e,t){var r=e.split("\n");r[0]&&r[0].indexOf(v)>=0&&r.shift();var n=r[t],i=null;if(n){var o=/^\s*(at|.*@)\s*(.+)?$/.exec(n);i=Array.isArray(o)&&o[2]?o[2]:n}return i}function o(e,t){t||(t="    ");var r=e.split(/\r?\n/g);return t+r.join("\n"+t)}function a(e,t){if(t){if(w[t])return;w[t]=!0}console.error(e+"\n")}function s(e){return w[e]}function c(){}function l(e){e=e||{},this.logByLevel=!!e.logByLevel}function u(e){var t="string"==typeof e?O[e.toLowerCase()]:e;return t}function p(e,t,r){if(!(this instanceof p))return new p(e,t);var i;if(void 0!==t&&(i=e,e=t,!(i instanceof p)))throw new TypeError("invalid Logger creation: do not pass a second arg");if(!e)throw new TypeError("options (object) is required");if(i){if(e.name)throw new TypeError("invalid options.name: child cannot set logger name")}else if(!e.name)throw new TypeError("options.name (string) is required");if(e.stream&&e.streams)throw new TypeError('cannot mix "streams" and "stream" options');if(e.streams&&!Array.isArray(e.streams))throw new TypeError("invalid options.streams: must be an array");if(e.serializers&&("object"!=typeof e.serializers||Array.isArray(e.serializers)))throw new TypeError("invalid options.serializers: must be an object");var o,a,s;if(i&&r){this._isSimpleChild=!0,this._level=i._level,this.streams=i.streams,this.serializers=i.serializers,this.src=i.src,o=this.fields={};var l=Object.keys(i.fields);for(s=0;s<l.length;s++)a=l[s],o[a]=i.fields[a];var u=Object.keys(e);for(s=0;s<u.length;s++)a=u[s],o[a]=e[a]}else{var f=this;if(i){for(this._level=i._level,this.streams=[],s=0;s<i.streams.length;s++){var h=n(i.streams[s]);h.closeOnExit=!1,this.streams.push(h)}this.serializers=n(i.serializers),this.src=i.src,this.fields=n(i.fields),e.level&&this.level(e.level)}else this._level=Number.POSITIVE_INFINITY,this.streams=[],this.serializers=null,this.src=!1,this.fields={};e.stream?f.addStream({type:"stream",stream:e.stream,closeOnExit:!1,level:e.level}):e.streams?e.streams.forEach(function(t){f.addStream(t,e.level)}):i&&e.level?this.level(e.level):i||f.addStream({type:"raw",stream:new c,closeOnExit:!1,level:e.level}),e.serializers&&f.addSerializers(e.serializers),e.src&&(this.src=!0),o=n(e),delete o.stream,delete o.level,delete o.streams,delete o.serializers,delete o.src,this.serializers&&this._applySerializers(o),Object.keys(o).forEach(function(e){f.fields[e]=o[e]})}}function f(e){return function(){function t(t){var l;t[0]instanceof Error?(o={err:r.serializers&&r.serializers.err?r.serializers.err(t[0]):p.stdSerializers.err(t[0])},l={err:!0},c=1===t.length?[o.err.message]:Array.prototype.slice.call(t,1)):"object"!=typeof t[0]&&null!==t[0]||Array.isArray(t[0])?(o=null,c=Array.prototype.slice.call(t)):(o=t[0],c=1===t.length&&o.err&&o.err instanceof Error?[o.err.message]:Array.prototype.slice.call(t,1));var u=n(r.fields);u.level=e;var f=o?n(o):null;if(f&&(r.serializers&&r._applySerializers(f,l),Object.keys(f).forEach(function(e){u[e]=f[e]})),u.levelName=A[e],u.msg=c.length?b.apply(r,c):"",u.time||(u.time=new Date),r.src&&!u.src)try{throw new Error(v)}catch(h){var d=i(h.stack,2);d||s("src")||a("Unable to determine src line info","src"),u.src=d||""}return u.v=m,u}var r=this,o=null,c=arguments,l=null;return 0===arguments.length?this._level<=e:void(this._level>e||(l=t(c),this._emit(l)))}}function h(e){var t=e.stack||e.toString();if(e.cause&&"function"==typeof e.cause){var r=e.cause();r&&(t+="\nCaused by: "+h(r))}return t}function d(){var e=[];return function(t,r){return r&&"object"==typeof r?-1!==e.indexOf(r)?"[Circular]":(e.push(r),r):r}}var g="0.4.0",m=0,v="call-stack-error",y=function(e){if("undefined"==typeof e)return"undefined";if(null===e)return"null";if(Array.isArray(e)){var t=e.map(function(e){return y(e)});return"[ "+t.join(", ")+" ]"}return"object"==typeof e?JSON.stringify(e):"function"==typeof e?"[Function: "+e.name+"]":"boolean"==typeof e||"number"==typeof e?e:"'"+e.toString()+"'"},b=function(e){if("string"!=typeof e){for(var t=new Array(arguments.length),r=0;r<arguments.length;r++)t[r]=y(arguments[r]);return t.join(" ")}for(var n=/%[sdj%]/g,i=1,o=arguments,a=o.length,s=String(e).replace(n,function(e){if("%%"===e)return"%";if(i>=a)return e;switch(e){case"%s":return String(o[i++]);case"%d":return Number(o[i++]);case"%j":try{return JSON.stringify(o[i++])}catch(t){return"[Circular]"}break;default:return e}}),c=o[i];a>i;c=o[++i])s+=" "+c;return s},w={};c.prototype.write=function(e){e.level<E?console.log(e):e.level<k?console.info(e):e.level<P?console.warn(e):console.error(e),e.err&&e.err.stack&&console.error(e.err.stack),e.obj&&console.log(e.obj)},l.prototype.write=function(e){function t(e,t){return Array(t+1-(e+"").length).join("0")+e}var r,n,i="color: DimGray",o="color: SteelBlue",a="color: DimGray; font-style: italic; font-size: 0.9em",s=e.childName?e.name+"/"+e.childName:e.name,c=A[e.level],l=(Array(6-c.length).join(" ")+c).toUpperCase();this.logByLevel?(e.level===x?c="debug":e.level===S&&(c="error"),n="function"==typeof console[c]?console[c]:console.log):n=console.log,r=e.level<_?"color: DeepPink":e.level<E?"color: GoldenRod":e.level<k?"color: DarkTurquoise":e.level<P?"color: Purple":e.level<S?"color: Crimson":"color: Black";var u=[];u.push("[%s:%s:%s:%s] %c%s%c: %s: %c%s %c%s"),u.push(t(e.time.getHours(),2)),u.push(t(e.time.getMinutes(),2)),u.push(t(e.time.getSeconds(),2)),u.push(t(e.time.getMilliseconds(),4)),u.push(r),u.push(l),u.push(i),u.push(s),u.push(o),u.push(e.msg),e.src&&(u.push(a),u.push(e.src)),n.apply(console,u),e.err&&e.err.stack&&n.call(console,"%c%s,",r,e.err.stack),e.obj&&n.call(console,e.obj)};var x=10,_=20,E=30,k=40,P=50,S=60,O={trace:x,debug:_,info:E,warn:k,error:P,fatal:S},A={};Object.keys(O).forEach(function(e){A[O[e]]=e}),p.prototype.addStream=function(e,t){var r=this;null!==t&&void 0!==t||(t=E),e=n(e),e.type="raw",e.level?e.level=u(e.level):e.level=u(t),e.level<r._level&&(r._level=e.level),e.closeOnExit||(e.closeOnExit=!1),r.streams.push(e),delete r.haveNonRawStreams},p.prototype.addSerializers=function(e){var t=this;t.serializers||(t.serializers={}),Object.keys(e).forEach(function(r){var n=e[r];if("function"!=typeof n)throw new TypeError(b('invalid serializer for "%s" field: must be a function',r));t.serializers[r]=n})},p.prototype.child=function(e,t){return new this.constructor(this,e||{},t)},p.prototype.level=function(e){if(void 0===e)return this._level;for(var t=u(e),r=this.streams.length,n=0;r>n;n++)this.streams[n].level=t;this._level=t},p.prototype.levels=function(e,t){if(void 0===e)return this.streams.map(function(e){return e.level});var r;if("number"==typeof e){if(r=this.streams[e],void 0===r)throw new Error("invalid stream index: "+e)}else{for(var n=this.streams.length,i=0;n>i;i++){var o=this.streams[i];if(o.name===e){r=o;break}}if(!r)throw new Error(b('no stream with name "%s"',e))}if(void 0===t)return r.level;var a=u(t);r.level=a,a<this._level&&(this._level=a)},p.prototype._applySerializers=function(e,t){var r=this;Object.keys(this.serializers).forEach(function(n){if(!(void 0===e[n]||t&&t[n]))try{e[n]=r.serializers[n](e[n])}catch(i){a(b('bunyan: ERROR: Exception thrown from the "%s" Bunyan serializer. This should never happen. This is a bugin that serializer function.\n%s',n,i.stack||i)),e[n]=b('(Error in Bunyan log "%s" serializer broke field. See stderr for details.)',n)}})},p.prototype._emit=function(e,t){var r;if(void 0===this.haveNonRawStreams)for(this.haveNonRawStreams=!1,r=0;r<this.streams.length;r++)if(!this.streams[r].raw){this.haveNonRawStreams=!0;break}var n;if(t||this.haveNonRawStreams)try{n=JSON.stringify(e,d())+"\n"}catch(i){var s=i.stack.split(/\n/g,2).join("\n");a('bunyan: ERROR: Exception in `JSON.stringify(rec)`. You can install the "safe-json-stringify" module to have Bunyan fallback to safer stringification. Record:\n'+o(b("%s\n%s",e,i.stack)),s),n=b("(Exception in JSON.stringify(rec): %j. See stderr for details.)\n",i.message)}if(t)return n;var c=e.level;for(r=0;r<this.streams.length;r++){var l=this.streams[r];l.level<=c&&l.stream.write(e)}return n},p.prototype.trace=f(x),p.prototype.debug=f(_),p.prototype.info=f(E),p.prototype.warn=f(k),p.prototype.error=f(P),p.prototype.fatal=f(S),p.stdSerializers={},p.stdSerializers.err=function(e){if(!e||!e.stack)return e;var t={message:e.message,name:e.name,stack:h(e),code:e.code,signal:e.signal};return t},t.exports=p,t.exports.TRACE=x,t.exports.DEBUG=_,t.exports.INFO=E,t.exports.WARN=k,t.exports.ERROR=P,t.exports.FATAL=S,t.exports.resolveLevel=u,t.exports.levelFromName=O,t.exports.nameFromLevel=A,t.exports.VERSION=g,t.exports.LOG_VERSION=m,t.exports.createLogger=function(e){return new p(e)},t.exports.safeCycles=d,t.exports.ConsoleFormattedStream=l,t.exports.ConsoleRawStream=c},{}],3:[function(e,t,r){"use strict";function n(e,t,r){var n="";if(e=parseInt(e,10),t=parseInt(t,10),isNaN(e)||isNaN(t))return"";var i,o=e>t?-1:1,a=Math.abs(t-e)+1;r.data&&(i=b.createFrame(r.data));for(var s=0;a>s;s++)i&&(i.index=e+s*o,i.from=e,i.to=t),n+=r.fn(this,{data:i});return n}function i(e,t){return this.preferences?t.fn(this.preferences[e]):void 0}function o(e){if(this.preferences){var t=this.preferences[e];return t?t.value:null}return null}function a(e,t){return Math.floor(parseFloat(e)/parseFloat(t))}function s(e,t){return e==t}function c(){for(var e=Array.prototype.slice.call(arguments),t=e[e.length-1],r=e.slice(0,e.length-1),n=0;n<r.length;n++)if(this.viewhints&&this.viewhints.indexOf(r[n])>=0)return t.fn(this);return t.inverse(this)}function l(e){var t={designmode:["designModeOnly"],role:["admin","manager","user","none"],input:["text-input","checkbox","select-one"],order:[],options:[]},r=this.viewhints;if(r&&r.length&&t[e]){var n=e.length,i=r.filter(function(r){return-1!==t[e].indexOf(r)||r.slice(0,n)===e})[0];if(i&&i.slice(0,n)===e){var o=i.slice(n,n+1);if("order"!==e||"-"!==o&&"="!==o)i="="===o?i.slice(n+1):void 0;else{var a=i.slice(n+1),s=parseFloat(a);isNaN(s)||(a=s),i=a}}return"designmode"===e&&(i=!!i),i}}function u(e,t){var r="";if(!e||"string"!=typeof e)return r;var n=t.data&&t.data.options&&t.data.options[e];if(!Array.isArray(n))return r;var i=n.length-1;return r=n.reduce(function(e,r,n){var o={index:n,first:0===n,last:n===i};return e+=t.fn(r,{data:o})},"")}function p(){return Array.prototype.slice.call(arguments,0,arguments.length-1).some(function(e){return!!e})}function f(){return Array.prototype.slice.call(arguments,0,arguments.length-1).every(function(e){return!!e})}function h(e){return!e}function d(e,t){var r=t.data;return r.cxpConfig?r.cxpConfig[e]:void 0}function g(e){var t=this.viewmodes||[],r=e?e.toLowerCase():"";return t.indexOf(r)>-1}function m(){return this.viewmodes&&this.viewmodes.length?this.viewmodes[0]:"none"}function v(e){var t=this.preferences,r=Object.keys(t).length>0&&this.securityProfile&&w[this.securityProfile]>=w.CONTRIBUTOR&&Object.keys(t).some(function(e){return t[e].viewhints&&t[e].viewhints.length>0});return r?e.fn(this):e.inverse(this)}function y(e,t){if("string"!=typeof e)return[];var r=new RegExp(t);return"string"!=typeof t&&(r=/\s*,+\s*|\s+/g),e.trim().split(r)}var b=e("handlebars/dist/handlebars.min"),w={ADMIN:16,CREATOR:8,COLLABORATOR:4,CONTRIBUTOR:2,CONSUMER:1,NONE:0};t.exports={range:n,withPreference:i,getPreferenceValue:o,divide:a,equal:s,hasViewHint:c,getViewHint:l,eachOption:u,or:p,and:f,not:h,getConfig:d,hasViewmode:g,currentViewmode:m,allowEdit:v,split:y}},{"handlebars/dist/handlebars.min":27}],4:[function(e,t,r){"use strict";e("./lib/locales"),r=t.exports=e("./lib/handlebars-intl")},{"./lib/handlebars-intl":6,"./lib/locales":1}],5:[function(e,t,r){"use strict";r["default"]={locale:"en",pluralRuleFunction:function(e,t){var r=String(e).split("."),n=!r[1],i=Number(r[0])==e,o=i&&r[0].slice(-1),a=i&&r[0].slice(-2);return t?1==o&&11!=a?"one":2==o&&12!=a?"two":3==o&&13!=a?"few":"other":1==e&&n?"one":"other"},fields:{year:{displayName:"Year",relative:{0:"this year",1:"next year","-1":"last year"},relativeTime:{future:{one:"in {0} year",other:"in {0} years"},past:{one:"{0} year ago",other:"{0} years ago"}}},month:{displayName:"Month",relative:{0:"this month",1:"next month","-1":"last month"},relativeTime:{future:{one:"in {0} month",other:"in {0} months"},past:{one:"{0} month ago",other:"{0} months ago"}}},day:{displayName:"Day",relative:{0:"today",1:"tomorrow","-1":"yesterday"},relativeTime:{future:{one:"in {0} day",other:"in {0} days"},past:{one:"{0} day ago",other:"{0} days ago"}}},hour:{displayName:"Hour",relativeTime:{future:{one:"in {0} hour",other:"in {0} hours"},past:{one:"{0} hour ago",other:"{0} hours ago"}}},minute:{displayName:"Minute",relativeTime:{future:{one:"in {0} minute",other:"in {0} minutes"},past:{one:"{0} minute ago",other:"{0} minutes ago"}}},second:{displayName:"Second",relative:{0:"now"},relativeTime:{future:{one:"in {0} second",other:"in {0} seconds"},past:{one:"{0} second ago",other:"{0} seconds ago"}}}}}},{}],6:[function(e,t,r){"use strict";function n(e){i["default"].__addLocaleData(e),o["default"].__addLocaleData(e)}r.__addLocaleData=n;var i=e("intl-messageformat"),o=e("intl-relativeformat"),a=e("./helpers.js"),s=e("./en.js");n(s["default"]),r.registerWith=a.registerWith},{"./en.js":5,"./helpers.js":7,"intl-messageformat":12,"intl-relativeformat":21}],7:[function(e,t,r){"use strict";function n(e){function t(e,t){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn("{{"+e+"}} is deprecated, use: {{"+t.name+"}}"),t.apply(this,arguments)}}function r(e){if(!e.fn)throw new Error("{{#intl}} must be invoked as a block helper");var t=b(e.data),r=s.extend({},t.intl,e.hash);return t.intl=r,e.fn(this,{data:t})}function n(e,t){var r,n,i,o=t.data&&t.data.intl,a=e.split(".");try{for(i=0,n=a.length;n>i;i++)r=o=o[a[i]]}finally{if(void 0===r)throw new ReferenceError("Could not find Intl object: "+e)}return r}function i(e,t,r){e=new Date(e),g(e,"A date or timestamp must be provided to {{formatDate}}"),r||(r=t,t=null);var n=r.data.intl&&r.data.intl.locales,i=v("date",t,r);return l(n,i).format(e)}function o(e,t,r){e=new Date(e),g(e,"A date or timestamp must be provided to {{formatTime}}"),r||(r=t,t=null);var n=r.data.intl&&r.data.intl.locales,i=v("time",t,r);return l(n,i).format(e)}function a(e,t,r){e=new Date(e),g(e,"A date or timestamp must be provided to {{formatRelative}}"),r||(r=t,t=null);var n=r.data.intl&&r.data.intl.locales,i=v("relative",t,r),o=r.hash.now;return delete i.now,p(n,i).format(e,{now:o})}function f(e,t,r){m(e,"A number must be provided to {{formatNumber}}"),r||(r=t,t=null);var n=r.data.intl&&r.data.intl.locales,i=v("number",t,r);return c(n,i).format(e)}function h(e,t){t||(t=e,e=null);var r=t.hash;if(!e&&"string"!=typeof e&&!r.intlName)throw new ReferenceError("{{formatMessage}} must be provided a message or intlName");var i=t.data.intl||{},o=i.locales,a=i.formats;return!e&&r.intlName&&(e=n(r.intlName,t)),"function"==typeof e?e(r):("string"==typeof e&&(e=u(e,o,a)),e.format(r))}function d(){var e,t,r=[].slice.call(arguments).pop(),n=r.hash;for(e in n)n.hasOwnProperty(e)&&(t=n[e],"string"==typeof t&&(n[e]=w(t)));return new y(String(h.apply(this,arguments)))}function g(e,t){if(!isFinite(e))throw new TypeError(t)}function m(e,t){if("number"!=typeof e)throw new TypeError(t)}function v(e,t,r){var i,o=r.hash;return t?("string"==typeof t&&(i=n("formats."+e+"."+t,r)),i=s.extend({},i,o)):i=o,i}var y=e.SafeString,b=e.createFrame,w=e.Utils.escapeExpression,x={intl:r,intlGet:n,formatDate:i,formatTime:o,formatRelative:a,formatNumber:f,formatMessage:h,formatHTMLMessage:d,intlDate:t("intlDate",i),intlTime:t("intlTime",o),intlNumber:t("intlNumber",f),intlMessage:t("intlMessage",h),intlHTMLMessage:t("intlHTMLMessage",d)};for(var _ in x)x.hasOwnProperty(_)&&e.registerHelper(_,x[_])}var i=e("intl-messageformat"),o=e("intl-relativeformat"),a=e("intl-format-cache"),s=e("./utils.js"),c=a["default"](Intl.NumberFormat),l=a["default"](Intl.DateTimeFormat),u=a["default"](i["default"]),p=a["default"](o["default"]);r.registerWith=n},{"./utils.js":8,"intl-format-cache":9,"intl-messageformat":12,"intl-relativeformat":21}],8:[function(e,t,r){"use strict";function n(e){var t,r,n,i,o=Array.prototype.slice.call(arguments,1);for(t=0,r=o.length;r>t;t+=1)if(n=o[t])for(i in n)n.hasOwnProperty(i)&&(e[i]=n[i]);return e}r.extend=n},{}],9:[function(e,t,r){"use strict";r=t.exports=e("./lib/memoizer")["default"],r["default"]=r},{"./lib/memoizer":11}],10:[function(e,t,r){"use strict";var n=Function.prototype.bind||function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),r=this,n=function(){},i=function(){return r.apply(this instanceof n?this:e,t.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(n.prototype=this.prototype),i.prototype=new n,i},i=Object.prototype.hasOwnProperty,o=function(){try{return!!Object.defineProperty({},"a",{})}catch(e){return!1}}(),a=(!o&&!Object.prototype.__defineGetter__,o?Object.defineProperty:function(e,t,r){"get"in r&&e.__defineGetter__?e.__defineGetter__(t,r.get):(!i.call(e,t)||"value"in r)&&(e[t]=r.value)}),s=Object.create||function(e,t){function r(){}var n,o;r.prototype=e,n=new r;for(o in t)i.call(t,o)&&a(n,o,t[o]);return n};r.bind=n,r.defineProperty=a,r.objCreate=s},{}],11:[function(e,t,r){"use strict";function n(e){var t=a.objCreate(null);return function(){var r=Array.prototype.slice.call(arguments),n=i(r),o=n&&t[n];return o||(o=new(a.bind.apply(e,[null].concat(r))),n&&(t[n]=o)),o}}function i(e){if("undefined"!=typeof JSON){var t,r,n,i=[];for(t=0,r=e.length;r>t;t+=1)n=e[t],n&&"object"==typeof n?i.push(o(n)):i.push(n);return JSON.stringify(i)}}function o(e){var t,r,n,i,o=[],a=[];for(t in e)e.hasOwnProperty(t)&&a.push(t);var s=a.sort();for(r=0,n=s.length;n>r;r+=1)t=s[r],i={},i[t]=e[t],o[r]=i;return o}var a=e("./es5");r["default"]=n},{"./es5":10}],12:[function(e,t,r){"use strict";var n=e("./lib/main")["default"];e("./lib/locales"),r=t.exports=n,r["default"]=r},{"./lib/locales":1,"./lib/main":17}],13:[function(e,t,r){"use strict";function n(e,t,r){this.locales=e,this.formats=t,this.pluralFn=r}function i(e){this.id=e}function o(e,t,r,n,i){this.id=e,this.useOrdinal=t,this.offset=r,this.options=n,this.pluralFn=i}function a(e,t,r,n){this.id=e,this.offset=t,this.numberFormat=r,this.string=n}function s(e,t){this.id=e,this.options=t}r["default"]=n,n.prototype.compile=function(e){return this.pluralStack=[],this.currentPlural=null,this.pluralNumberFormat=null,this.compileMessage(e)},n.prototype.compileMessage=function(e){if(!e||"messageFormatPattern"!==e.type)throw new Error('Message AST is not of type: "messageFormatPattern"');var t,r,n,i=e.elements,o=[];for(t=0,r=i.length;r>t;t+=1)switch(n=i[t],n.type){case"messageTextElement":o.push(this.compileMessageText(n));break;case"argumentElement":o.push(this.compileArgument(n));break;default:throw new Error("Message element does not have a valid type")}return o},n.prototype.compileMessageText=function(e){return this.currentPlural&&/(^|[^\\])#/g.test(e.value)?(this.pluralNumberFormat||(this.pluralNumberFormat=new Intl.NumberFormat(this.locales)),new a(this.currentPlural.id,this.currentPlural.format.offset,this.pluralNumberFormat,e.value)):e.value.replace(/\\#/g,"#")},n.prototype.compileArgument=function(e){var t=e.format;if(!t)return new i(e.id);var r,n=this.formats,a=this.locales,c=this.pluralFn;switch(t.type){case"numberFormat":return r=n.number[t.style],{id:e.id,format:new Intl.NumberFormat(a,r).format};case"dateFormat":return r=n.date[t.style],{id:e.id,format:new Intl.DateTimeFormat(a,r).format};case"timeFormat":return r=n.time[t.style],{id:e.id,format:new Intl.DateTimeFormat(a,r).format};case"pluralFormat":return r=this.compileOptions(e),new o(e.id,t.ordinal,t.offset,r,c);case"selectFormat":return r=this.compileOptions(e),new s(e.id,r);default:throw new Error("Message element does not have a valid format type")}},n.prototype.compileOptions=function(e){var t=e.format,r=t.options,n={};this.pluralStack.push(this.currentPlural),this.currentPlural="pluralFormat"===t.type?e:null;var i,o,a;for(i=0,o=r.length;o>i;i+=1)a=r[i],n[a.selector]=this.compileMessage(a.value);return this.currentPlural=this.pluralStack.pop(),n},i.prototype.format=function(e){return e?"string"==typeof e?e:String(e):""},o.prototype.getOption=function(e){var t=this.options,r=t["="+e]||t[this.pluralFn(e-this.offset,this.useOrdinal)];return r||t.other},a.prototype.format=function(e){var t=this.numberFormat.format(e-this.offset);return this.string.replace(/(^|[^\\])#/g,"$1"+t).replace(/\\#/g,"#")},s.prototype.getOption=function(e){var t=this.options;return t[e]||t.other}},{}],14:[function(e,t,r){"use strict";function n(e,t,r){var i="string"==typeof e?n.__parse(e):e;if(!i||"messageFormatPattern"!==i.type)throw new TypeError("A message must be provided as a String or AST.");r=this._mergeFormats(n.formats,r),o.defineProperty(this,"_locale",{value:this._resolveLocale(t)});var a=this._findPluralRuleFunction(this._locale),s=this._compilePattern(i,t,r,a),c=this;this.format=function(e){return c._format(s,e)}}var i=e("./utils"),o=e("./es5"),a=e("./compiler"),s=e("intl-messageformat-parser");r["default"]=n,o.defineProperty(n,"formats",{enumerable:!0,value:{number:{currency:{style:"currency"},percent:{style:"percent"}},date:{"short":{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},"long":{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{"short":{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},"long":{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}}}),o.defineProperty(n,"__localeData__",{value:o.objCreate(null)}),o.defineProperty(n,"__addLocaleData",{value:function(e){if(!e||!e.locale)throw new Error("Locale data provided to IntlMessageFormat is missing a `locale` property");n.__localeData__[e.locale.toLowerCase()]=e}}),o.defineProperty(n,"__parse",{value:s["default"].parse}),o.defineProperty(n,"defaultLocale",{enumerable:!0,writable:!0,value:void 0}),n.prototype.resolvedOptions=function(){return{locale:this._locale}},n.prototype._compilePattern=function(e,t,r,n){var i=new a["default"](t,r,n);return i.compile(e)},n.prototype._findPluralRuleFunction=function(e){for(var t=n.__localeData__,r=t[e.toLowerCase()];r;){if(r.pluralRuleFunction)return r.pluralRuleFunction;r=r.parentLocale&&t[r.parentLocale.toLowerCase()]}throw new Error("Locale data added to IntlMessageFormat is missing a `pluralRuleFunction` for :"+e)},n.prototype._format=function(e,t){var r,n,o,a,s,c="";for(r=0,n=e.length;n>r;r+=1)if(o=e[r],"string"!=typeof o){if(a=o.id,!t||!i.hop.call(t,a))throw new Error("A value must be provided for: "+a);s=t[a],c+=o.options?this._format(o.getOption(s),t):o.format(s)}else c+=o;return c},n.prototype._mergeFormats=function(e,t){var r,n,a={};for(r in e)i.hop.call(e,r)&&(a[r]=n=o.objCreate(e[r]),t&&i.hop.call(t,r)&&i.extend(n,t[r]));return a},n.prototype._resolveLocale=function(e){"string"==typeof e&&(e=[e]),e=(e||[]).concat(n.defaultLocale);var t,r,i,o,a=n.__localeData__;for(t=0,r=e.length;r>t;t+=1)for(i=e[t].toLowerCase().split("-");i.length;){if(o=a[i.join("-")])return o.locale;i.pop()}var s=e.pop();throw new Error("No locale data has been added to IntlMessageFormat for: "+e.join(", ")+", or the default locale: "+s)}},{"./compiler":13,"./es5":16,"./utils":18,"intl-messageformat-parser":19}],15:[function(e,t,r){"use strict";r["default"]={locale:"en",pluralRuleFunction:function(e,t){var r=String(e).split("."),n=!r[1],i=Number(r[0])==e,o=i&&r[0].slice(-1),a=i&&r[0].slice(-2);return t?1==o&&11!=a?"one":2==o&&12!=a?"two":3==o&&13!=a?"few":"other":1==e&&n?"one":"other"}}},{}],16:[function(e,t,r){"use strict";var n=e("./utils"),i=function(){try{return!!Object.defineProperty({},"a",{})}catch(e){return!1}}(),o=(!i&&!Object.prototype.__defineGetter__,i?Object.defineProperty:function(e,t,r){"get"in r&&e.__defineGetter__?e.__defineGetter__(t,r.get):(!n.hop.call(e,t)||"value"in r)&&(e[t]=r.value)}),a=Object.create||function(e,t){function r(){}var i,a;r.prototype=e,i=new r;for(a in t)n.hop.call(t,a)&&o(i,a,t[a]);return i};r.defineProperty=o,r.objCreate=a},{"./utils":18}],17:[function(e,t,r){"use strict";var n=e("./core"),i=e("./en");n["default"].__addLocaleData(i["default"]),n["default"].defaultLocale="en",r["default"]=n["default"]},{"./core":14,"./en":15}],18:[function(e,t,r){"use strict";function n(e){var t,r,n,o,a=Array.prototype.slice.call(arguments,1);for(t=0,r=a.length;r>t;t+=1)if(n=a[t])for(o in n)i.call(n,o)&&(e[o]=n[o]);return e}r.extend=n;var i=Object.prototype.hasOwnProperty;r.hop=i},{}],19:[function(e,t,r){"use strict";r=t.exports=e("./lib/parser")["default"],r["default"]=r},{"./lib/parser":20}],20:[function(e,t,r){"use strict";r["default"]=function(){function e(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}function t(e,t,r,n,i,o){this.message=e,this.expected=t,this.found=r,this.offset=n,this.line=i,this.column=o,this.name="SyntaxError"}function r(e){function r(t){function r(t,r,n){var i,o;for(i=r;n>i;i++)o=e.charAt(i),"\n"===o?(t.seenCR||t.line++,t.column=1,t.seenCR=!1):"\r"===o||"\u2028"===o||"\u2029"===o?(t.line++,t.column=1,t.seenCR=!0):(t.column++,t.seenCR=!1)}return Ve!==t&&(Ve>t&&(Ve=0,Ke={line:1,column:1,seenCR:!1}),r(Ke,Ve,t),Ve=t),Ke}function n(e){Ge>qe||(qe>Ge&&(Ge=qe,Je=[]),Je.push(e))}function i(n,i,o){function a(e){var t=1;for(e.sort(function(e,t){return e.description<t.description?-1:e.description>t.description?1:0});t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}function s(e,t){function r(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+t(e)}).replace(/[\u0180-\u0FFF]/g,function(e){return"\\u0"+t(e)}).replace(/[\u1080-\uFFFF]/g,function(e){return"\\u"+t(e)})}var n,i,o,a=new Array(e.length);for(o=0;o<e.length;o++)a[o]=e[o].description;return n=e.length>1?a.slice(0,-1).join(", ")+" or "+a[e.length-1]:a[0],i=t?'"'+r(t)+'"':"end of input","Expected "+n+" but "+i+" found."}var c=r(o),l=o<e.length?e.charAt(o):null;return null!==i&&a(i),new t(null!==n?n:s(i,l),i,l,o,c.line,c.column)}function o(){var e;return e=a()}function a(){var e,t,r;for(e=qe,t=[],r=s();r!==j;)t.push(r),r=s();return t!==j&&(We=e,t=N(t)),e=t}function s(){var e;return e=l(),e===j&&(e=p()),e}function c(){var t,r,n,i,o,a;if(t=qe,r=[],n=qe,i=_(),i!==j?(o=O(),o!==j?(a=_(),a!==j?(i=[i,o,a],n=i):(qe=n,n=L)):(qe=n,n=L)):(qe=n,n=L),n!==j)for(;n!==j;)r.push(n),n=qe,i=_(),i!==j?(o=O(),o!==j?(a=_(),a!==j?(i=[i,o,a],n=i):(qe=n,n=L)):(qe=n,n=L)):(qe=n,n=L);else r=L;return r!==j&&(We=t,r=T(r)),t=r,t===j&&(t=qe,r=x(),r!==j&&(r=e.substring(t,qe)),t=r),t}function l(){var e,t;return e=qe,t=c(),t!==j&&(We=e,t=F(t)),e=t}function u(){var t,r,i;if(t=P(),t===j){if(t=qe,r=[],M.test(e.charAt(qe))?(i=e.charAt(qe),qe++):(i=j,0===Qe&&n(D)),i!==j)for(;i!==j;)r.push(i),M.test(e.charAt(qe))?(i=e.charAt(qe),qe++):(i=j,0===Qe&&n(D));else r=L;r!==j&&(r=e.substring(t,qe)),t=r}return t}function p(){var t,r,i,o,a,s,c,l,p;return t=qe,123===e.charCodeAt(qe)?(r=B,qe++):(r=j,0===Qe&&n(U)),r!==j?(i=_(),i!==j?(o=u(),o!==j?(a=_(),a!==j?(s=qe,44===e.charCodeAt(qe)?(c=z,qe++):(c=j,0===Qe&&n($)),c!==j?(l=_(),l!==j?(p=f(),p!==j?(c=[c,l,p],s=c):(qe=s,s=L)):(qe=s,s=L)):(qe=s,s=L),s===j&&(s=H),s!==j?(c=_(),c!==j?(125===e.charCodeAt(qe)?(l=q,qe++):(l=j,0===Qe&&n(W)),l!==j?(We=t,r=V(o,s),t=r):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L),t}function f(){var e;return e=h(),e===j&&(e=d(),e===j&&(e=g(),e===j&&(e=m()))),e}function h(){var t,r,i,o,a,s,c;return t=qe,e.substr(qe,6)===K?(r=K,qe+=6):(r=j,0===Qe&&n(G)),r===j&&(e.substr(qe,4)===J?(r=J,qe+=4):(r=j,0===Qe&&n(Q)),r===j&&(e.substr(qe,4)===X?(r=X,qe+=4):(r=j,0===Qe&&n(Y)))),r!==j?(i=_(),i!==j?(o=qe,44===e.charCodeAt(qe)?(a=z,qe++):(a=j,0===Qe&&n($)),a!==j?(s=_(),s!==j?(c=O(),c!==j?(a=[a,s,c],o=a):(qe=o,o=L)):(qe=o,o=L)):(qe=o,o=L),o===j&&(o=H),o!==j?(We=t,r=Z(r,o),t=r):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L),t}function d(){var t,r,i,o,a,s;return t=qe,e.substr(qe,6)===ee?(r=ee,qe+=6):(r=j,0===Qe&&n(te)),r!==j?(i=_(),i!==j?(44===e.charCodeAt(qe)?(o=z,qe++):(o=j,0===Qe&&n($)),o!==j?(a=_(),a!==j?(s=w(),s!==j?(We=t,r=re(s),t=r):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L),t}function g(){var t,r,i,o,a,s;return t=qe,e.substr(qe,13)===ne?(r=ne,qe+=13):(r=j,0===Qe&&n(ie)),r!==j?(i=_(),i!==j?(44===e.charCodeAt(qe)?(o=z,qe++):(o=j,0===Qe&&n($)),o!==j?(a=_(),a!==j?(s=w(),s!==j?(We=t,r=oe(s),t=r):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L),t}function m(){var t,r,i,o,a,s,c;if(t=qe,e.substr(qe,6)===ae?(r=ae,qe+=6):(r=j,0===Qe&&n(se)),r!==j)if(i=_(),i!==j)if(44===e.charCodeAt(qe)?(o=z,qe++):(o=j,0===Qe&&n($)),o!==j)if(a=_(),a!==j){if(s=[],c=y(),c!==j)for(;c!==j;)s.push(c),c=y();else s=L;s!==j?(We=t,r=ce(s),t=r):(qe=t,t=L)}else qe=t,t=L;else qe=t,t=L;else qe=t,t=L;else qe=t,t=L;return t}function v(){var t,r,i,o;return t=qe,r=qe,61===e.charCodeAt(qe)?(i=le,qe++):(i=j,0===Qe&&n(ue)),i!==j?(o=P(),o!==j?(i=[i,o],r=i):(qe=r,r=L)):(qe=r,r=L),r!==j&&(r=e.substring(t,qe)),t=r,t===j&&(t=O()),t}function y(){var t,r,i,o,s,c,l,u,p;return t=qe,r=_(),r!==j?(i=v(),i!==j?(o=_(),o!==j?(123===e.charCodeAt(qe)?(s=B,qe++):(s=j,0===Qe&&n(U)),s!==j?(c=_(),c!==j?(l=a(),l!==j?(u=_(),u!==j?(125===e.charCodeAt(qe)?(p=q,qe++):(p=j,0===Qe&&n(W)),p!==j?(We=t,r=pe(i,l),t=r):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L),t}function b(){var t,r,i,o;return t=qe,e.substr(qe,7)===fe?(r=fe,qe+=7):(r=j,0===Qe&&n(he)),r!==j?(i=_(),i!==j?(o=P(),o!==j?(We=t,r=de(o),t=r):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L),t}function w(){var e,t,r,n,i;if(e=qe,t=b(),t===j&&(t=H),t!==j)if(r=_(),r!==j){if(n=[],i=y(),i!==j)for(;i!==j;)n.push(i),i=y();else n=L;n!==j?(We=e,t=ge(t,n),e=t):(qe=e,e=L)}else qe=e,e=L;else qe=e,e=L;return e}function x(){var t,r;if(Qe++,t=[],ve.test(e.charAt(qe))?(r=e.charAt(qe),qe++):(r=j,0===Qe&&n(ye)),r!==j)for(;r!==j;)t.push(r),ve.test(e.charAt(qe))?(r=e.charAt(qe),qe++):(r=j,0===Qe&&n(ye));else t=L;return Qe--,t===j&&(r=j,0===Qe&&n(me)),t}function _(){var t,r,i;for(Qe++,t=qe,r=[],i=x();i!==j;)r.push(i),i=x();return r!==j&&(r=e.substring(t,qe)),t=r,Qe--,t===j&&(r=j,0===Qe&&n(be)),t}function E(){var t;return we.test(e.charAt(qe))?(t=e.charAt(qe),qe++):(t=j,0===Qe&&n(xe)),t}function k(){var t;return _e.test(e.charAt(qe))?(t=e.charAt(qe),qe++):(t=j,0===Qe&&n(Ee)),t}function P(){var t,r,i,o,a,s;if(t=qe,48===e.charCodeAt(qe)?(r=ke,qe++):(r=j,0===Qe&&n(Pe)),r===j){if(r=qe,i=qe,Se.test(e.charAt(qe))?(o=e.charAt(qe),qe++):(o=j,0===Qe&&n(Oe)),o!==j){for(a=[],s=E();s!==j;)a.push(s),s=E();a!==j?(o=[o,a],i=o):(qe=i,i=L)}else qe=i,i=L;i!==j&&(i=e.substring(r,qe)),r=i}return r!==j&&(We=t,r=Ae(r)),t=r}function S(){var t,r,i,o,a,s,c,l;return Ce.test(e.charAt(qe))?(t=e.charAt(qe),qe++):(t=j,0===Qe&&n(je)),t===j&&(t=qe,e.substr(qe,2)===Ie?(r=Ie,qe+=2):(r=j,
0===Qe&&n(Re)),r!==j&&(We=t,r=Ne()),t=r,t===j&&(t=qe,e.substr(qe,2)===Le?(r=Le,qe+=2):(r=j,0===Qe&&n(Te)),r!==j&&(We=t,r=Fe()),t=r,t===j&&(t=qe,e.substr(qe,2)===Me?(r=Me,qe+=2):(r=j,0===Qe&&n(De)),r!==j&&(We=t,r=Be()),t=r,t===j&&(t=qe,e.substr(qe,2)===Ue?(r=Ue,qe+=2):(r=j,0===Qe&&n(He)),r!==j?(i=qe,o=qe,a=k(),a!==j?(s=k(),s!==j?(c=k(),c!==j?(l=k(),l!==j?(a=[a,s,c,l],o=a):(qe=o,o=L)):(qe=o,o=L)):(qe=o,o=L)):(qe=o,o=L),o!==j&&(o=e.substring(i,qe)),i=o,i!==j?(We=t,r=ze(i),t=r):(qe=t,t=L)):(qe=t,t=L))))),t}function O(){var e,t,r;if(e=qe,t=[],r=S(),r!==j)for(;r!==j;)t.push(r),r=S();else t=L;return t!==j&&(We=e,t=$e(t)),e=t}var A,C=arguments.length>1?arguments[1]:{},j={},I={start:o},R=o,N=function(e){return{type:"messageFormatPattern",elements:e}},L=j,T=function(e){var t,r,n,i,o,a="";for(t=0,n=e.length;n>t;t+=1)for(i=e[t],r=0,o=i.length;o>r;r+=1)a+=i[r];return a},F=function(e){return{type:"messageTextElement",value:e}},M=/^[^ \t\n\r,.+={}#]/,D={type:"class",value:"[^ \\t\\n\\r,.+={}#]",description:"[^ \\t\\n\\r,.+={}#]"},B="{",U={type:"literal",value:"{",description:'"{"'},H=null,z=",",$={type:"literal",value:",",description:'","'},q="}",W={type:"literal",value:"}",description:'"}"'},V=function(e,t){return{type:"argumentElement",id:e,format:t&&t[2]}},K="number",G={type:"literal",value:"number",description:'"number"'},J="date",Q={type:"literal",value:"date",description:'"date"'},X="time",Y={type:"literal",value:"time",description:'"time"'},Z=function(e,t){return{type:e+"Format",style:t&&t[2]}},ee="plural",te={type:"literal",value:"plural",description:'"plural"'},re=function(e){return{type:e.type,ordinal:!1,offset:e.offset||0,options:e.options}},ne="selectordinal",ie={type:"literal",value:"selectordinal",description:'"selectordinal"'},oe=function(e){return{type:e.type,ordinal:!0,offset:e.offset||0,options:e.options}},ae="select",se={type:"literal",value:"select",description:'"select"'},ce=function(e){return{type:"selectFormat",options:e}},le="=",ue={type:"literal",value:"=",description:'"="'},pe=function(e,t){return{type:"optionalFormatPattern",selector:e,value:t}},fe="offset:",he={type:"literal",value:"offset:",description:'"offset:"'},de=function(e){return e},ge=function(e,t){return{type:"pluralFormat",offset:e,options:t}},me={type:"other",description:"whitespace"},ve=/^[ \t\n\r]/,ye={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},be={type:"other",description:"optionalWhitespace"},we=/^[0-9]/,xe={type:"class",value:"[0-9]",description:"[0-9]"},_e=/^[0-9a-f]/i,Ee={type:"class",value:"[0-9a-f]i",description:"[0-9a-f]i"},ke="0",Pe={type:"literal",value:"0",description:'"0"'},Se=/^[1-9]/,Oe={type:"class",value:"[1-9]",description:"[1-9]"},Ae=function(e){return parseInt(e,10)},Ce=/^[^{}\\\0-\x1F \t\n\r]/,je={type:"class",value:"[^{}\\\\\\0-\\x1F \\t\\n\\r]",description:"[^{}\\\\\\0-\\x1F \\t\\n\\r]"},Ie="\\#",Re={type:"literal",value:"\\#",description:'"\\\\#"'},Ne=function(){return"\\#"},Le="\\{",Te={type:"literal",value:"\\{",description:'"\\\\{"'},Fe=function(){return"{"},Me="\\}",De={type:"literal",value:"\\}",description:'"\\\\}"'},Be=function(){return"}"},Ue="\\u",He={type:"literal",value:"\\u",description:'"\\\\u"'},ze=function(e){return String.fromCharCode(parseInt(e,16))},$e=function(e){return e.join("")},qe=0,We=0,Ve=0,Ke={line:1,column:1,seenCR:!1},Ge=0,Je=[],Qe=0;if("startRule"in C){if(!(C.startRule in I))throw new Error("Can't start parsing from rule \""+C.startRule+'".');R=I[C.startRule]}if(A=R(),A!==j&&qe===e.length)return A;throw A!==j&&qe<e.length&&n({type:"end",description:"end of input"}),i(null,Je,Ge)}return e(t,Error),{SyntaxError:t,parse:r}}()},{}],21:[function(e,t,r){"use strict";var n=e("./lib/main")["default"];e("./lib/locales"),r=t.exports=n,r["default"]=r},{"./lib/locales":1,"./lib/main":26}],22:[function(e,t,r){"use strict";function n(e,t){t=t||{},a.isArray(e)&&(e=e.concat()),a.defineProperty(this,"_locale",{value:this._resolveLocale(e)}),a.defineProperty(this,"_options",{value:{style:this._resolveStyle(t.style),units:this._isValidUnits(t.units)&&t.units}}),a.defineProperty(this,"_locales",{value:e}),a.defineProperty(this,"_fields",{value:this._findFields(this._locale)}),a.defineProperty(this,"_messages",{value:a.objCreate(null)});var r=this;this.format=function(e,t){return r._format(e,t)}}var i=e("intl-messageformat"),o=e("./diff"),a=e("./es5");r["default"]=n;var s=["second","minute","hour","day","month","year"],c=["best fit","numeric"];a.defineProperty(n,"__localeData__",{value:a.objCreate(null)}),a.defineProperty(n,"__addLocaleData",{value:function(e){if(!e||!e.locale)throw new Error("Locale data provided to IntlRelativeFormat is missing a `locale` property value");n.__localeData__[e.locale.toLowerCase()]=e,i["default"].__addLocaleData(e)}}),a.defineProperty(n,"defaultLocale",{enumerable:!0,writable:!0,value:void 0}),a.defineProperty(n,"thresholds",{enumerable:!0,value:{second:45,minute:45,hour:22,day:26,month:11}}),n.prototype.resolvedOptions=function(){return{locale:this._locale,style:this._options.style,units:this._options.units}},n.prototype._compileMessage=function(e){var t,r=this._locales,n=(this._locale,this._fields[e]),o=n.relativeTime,a="",s="";for(t in o.future)o.future.hasOwnProperty(t)&&(a+=" "+t+" {"+o.future[t].replace("{0}","#")+"}");for(t in o.past)o.past.hasOwnProperty(t)&&(s+=" "+t+" {"+o.past[t].replace("{0}","#")+"}");var c="{when, select, future {{0, plural, "+a+"}}past {{0, plural, "+s+"}}}";return new i["default"](c,r)},n.prototype._getMessage=function(e){var t=this._messages;return t[e]||(t[e]=this._compileMessage(e)),t[e]},n.prototype._getRelativeUnits=function(e,t){var r=this._fields[t];return r.relative?r.relative[e]:void 0},n.prototype._findFields=function(e){for(var t=n.__localeData__,r=t[e.toLowerCase()];r;){if(r.fields)return r.fields;r=r.parentLocale&&t[r.parentLocale.toLowerCase()]}throw new Error("Locale data added to IntlRelativeFormat is missing `fields` for :"+e)},n.prototype._format=function(e,t){var r=t&&void 0!==t.now?t.now:a.dateNow();if(void 0===e&&(e=r),!isFinite(r))throw new RangeError("The `now` option provided to IntlRelativeFormat#format() is not in valid range.");if(!isFinite(e))throw new RangeError("The date value provided to IntlRelativeFormat#format() is not in valid range.");var n=o["default"](r,e),i=this._options.units||this._selectUnits(n),s=n[i];if("numeric"!==this._options.style){var c=this._getRelativeUnits(s,i);if(c)return c}return this._getMessage(i).format({0:Math.abs(s),when:0>s?"past":"future"})},n.prototype._isValidUnits=function(e){if(!e||a.arrIndexOf.call(s,e)>=0)return!0;if("string"==typeof e){var t=/s$/.test(e)&&e.substr(0,e.length-1);if(t&&a.arrIndexOf.call(s,t)>=0)throw new Error('"'+e+'" is not a valid IntlRelativeFormat `units` value, did you mean: '+t)}throw new Error('"'+e+'" is not a valid IntlRelativeFormat `units` value, it must be one of: "'+s.join('", "')+'"')},n.prototype._resolveLocale=function(e){"string"==typeof e&&(e=[e]),e=(e||[]).concat(n.defaultLocale);var t,r,i,o,a=n.__localeData__;for(t=0,r=e.length;r>t;t+=1)for(i=e[t].toLowerCase().split("-");i.length;){if(o=a[i.join("-")])return o.locale;i.pop()}var s=e.pop();throw new Error("No locale data has been added to IntlRelativeFormat for: "+e.join(", ")+", or the default locale: "+s)},n.prototype._resolveStyle=function(e){if(!e)return c[0];if(a.arrIndexOf.call(c,e)>=0)return e;throw new Error('"'+e+'" is not a valid IntlRelativeFormat `style` value, it must be one of: "'+c.join('", "')+'"')},n.prototype._selectUnits=function(e){var t,r,i;for(t=0,r=s.length;r>t&&(i=s[t],!(Math.abs(e[i])<n.thresholds[i]));t+=1);return i}},{"./diff":23,"./es5":25,"intl-messageformat":12}],23:[function(e,t,r){"use strict";function n(e){return 400*e/146097}var i=Math.round;r["default"]=function(e,t){e=+e,t=+t;var r=i(t-e),o=i(r/1e3),a=i(o/60),s=i(a/60),c=i(s/24),l=i(c/7),u=n(c),p=i(12*u),f=i(u);return{millisecond:r,second:o,minute:a,hour:s,day:c,week:l,month:p,year:f}}},{}],24:[function(e,t,r){arguments[4][5][0].apply(r,arguments)},{dup:5}],25:[function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=function(){try{return!!Object.defineProperty({},"a",{})}catch(e){return!1}}(),a=(!o&&!Object.prototype.__defineGetter__,o?Object.defineProperty:function(e,t,r){"get"in r&&e.__defineGetter__?e.__defineGetter__(t,r.get):(!n.call(e,t)||"value"in r)&&(e[t]=r.value)}),s=Object.create||function(e,t){function r(){}var i,o;r.prototype=e,i=new r;for(o in t)n.call(t,o)&&a(i,o,t[o]);return i},c=Array.prototype.indexOf||function(e,t){var r=this;if(!r.length)return-1;for(var n=t||0,i=r.length;i>n;n++)if(r[n]===e)return n;return-1},l=Array.isArray||function(e){return"[object Array]"===i.call(e)},u=Date.now||function(){return(new Date).getTime()};r.defineProperty=a,r.objCreate=s,r.arrIndexOf=c,r.isArray=l,r.dateNow=u},{}],26:[function(e,t,r){arguments[4][17][0].apply(r,arguments)},{"./core":22,"./en":24,dup:17}],27:[function(e,t,r){!function(e,n){"object"==typeof r&&"object"==typeof t?t.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof r?r.Handlebars=n():e.Handlebars=n()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(){var e=v();return e.compile=function(t,r){return u.compile(t,r,e)},e.precompile=function(t,r){return u.precompile(t,r,e)},e.AST=c["default"],e.Compiler=u.Compiler,e.JavaScriptCompiler=f["default"],e.Parser=l.parser,e.parse=l.parse,e}var i=r(1)["default"];t.__esModule=!0;var o=r(2),a=i(o),s=r(35),c=i(s),l=r(36),u=r(41),p=r(42),f=i(p),h=r(39),d=i(h),g=r(34),m=i(g),v=a["default"].create,y=n();y.create=n,m["default"](y),y.Visitor=d["default"],y["default"]=y,t["default"]=y,e.exports=t["default"]},function(e,t){"use strict";t["default"]=function(e){return e&&e.__esModule?e:{"default":e}},t.__esModule=!0},function(e,t,r){"use strict";function n(){var e=new s.HandlebarsEnvironment;return h.extend(e,s),e.SafeString=l["default"],e.Exception=p["default"],e.Utils=h,e.escapeExpression=h.escapeExpression,e.VM=g,e.template=function(t){return g.template(t,e)},e}var i=r(3)["default"],o=r(1)["default"];t.__esModule=!0;var a=r(4),s=i(a),c=r(21),l=o(c),u=r(6),p=o(u),f=r(5),h=i(f),d=r(22),g=i(d),m=r(34),v=o(m),y=n();y.create=n,v["default"](y),y["default"]=y,t["default"]=y,e.exports=t["default"]},function(e,t){"use strict";t["default"]=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t},t.__esModule=!0},function(e,t,r){"use strict";function n(e,t,r){this.helpers=e||{},this.partials=t||{},this.decorators=r||{},c.registerDefaultHelpers(this),l.registerDefaultDecorators(this)}var i=r(1)["default"];t.__esModule=!0,t.HandlebarsEnvironment=n;var o=r(5),a=r(6),s=i(a),c=r(10),l=r(18),u=r(20),p=i(u),f="4.0.10";t.VERSION=f;var h=7;t.COMPILER_REVISION=h;var d={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};t.REVISION_CHANGES=d;var g="[object Object]";n.prototype={constructor:n,logger:p["default"],log:p["default"].log,registerHelper:function(e,t){if(o.toString.call(e)===g){if(t)throw new s["default"]("Arg not supported with multiple helpers");o.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(o.toString.call(e)===g)o.extend(this.partials,e);else{if("undefined"==typeof t)throw new s["default"]('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(o.toString.call(e)===g){if(t)throw new s["default"]("Arg not supported with multiple decorators");o.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]}};var m=p["default"].log;t.log=m,t.createFrame=o.createFrame,t.logger=p["default"]},function(e,t){"use strict";function r(e){return u[e]}function n(e){for(var t=1;t<arguments.length;t++)for(var r in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],r)&&(e[r]=arguments[t][r]);return e}function i(e,t){for(var r=0,n=e.length;n>r;r++)if(e[r]===t)return r;return-1}function o(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return f.test(e)?e.replace(p,r):e}function a(e){return!e&&0!==e||!(!g(e)||0!==e.length)}function s(e){var t=n({},e);return t._parent=e,t}function c(e,t){return e.path=t,e}function l(e,t){return(e?e+".":"")+t}t.__esModule=!0,t.extend=n,t.indexOf=i,t.escapeExpression=o,t.isEmpty=a,t.createFrame=s,t.blockParams=c,t.appendContextPath=l;var u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},p=/[&<>"'`=]/g,f=/[&<>"'`=]/,h=Object.prototype.toString;t.toString=h;var d=function(e){return"function"==typeof e};d(/x/)&&(t.isFunction=d=function(e){return"function"==typeof e&&"[object Function]"===h.call(e)}),t.isFunction=d;var g=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===h.call(e)};t.isArray=g},function(e,t,r){"use strict";function n(e,t){var r=t&&t.loc,a=void 0,s=void 0;r&&(a=r.start.line,s=r.start.column,e+=" - "+a+":"+s);for(var c=Error.prototype.constructor.call(this,e),l=0;l<o.length;l++)this[o[l]]=c[o[l]];Error.captureStackTrace&&Error.captureStackTrace(this,n);try{r&&(this.lineNumber=a,i?Object.defineProperty(this,"column",{value:s,enumerable:!0}):this.column=s)}catch(u){}}var i=r(7)["default"];t.__esModule=!0;var o=["description","fileName","lineNumber","message","name","number","stack"];n.prototype=new Error,t["default"]=n,e.exports=t["default"]},function(e,t,r){e.exports={"default":r(8),__esModule:!0}},function(e,t,r){var n=r(9);e.exports=function(e,t,r){return n.setDesc(e,t,r)}},function(e,t){var r=Object;e.exports={create:r.create,getProto:r.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:r.getOwnPropertyDescriptor,setDesc:r.defineProperty,setDescs:r.defineProperties,getKeys:r.keys,getNames:r.getOwnPropertyNames,getSymbols:r.getOwnPropertySymbols,each:[].forEach}},function(e,t,r){"use strict";function n(e){a["default"](e),c["default"](e),u["default"](e),f["default"](e),d["default"](e),m["default"](e),y["default"](e)}var i=r(1)["default"];t.__esModule=!0,t.registerDefaultHelpers=n;var o=r(11),a=i(o),s=r(12),c=i(s),l=r(13),u=i(l),p=r(14),f=i(p),h=r(15),d=i(h),g=r(16),m=i(g),v=r(17),y=i(v)},function(e,t,r){"use strict";t.__esModule=!0;var n=r(5);t["default"]=function(e){e.registerHelper("blockHelperMissing",function(t,r){var i=r.inverse,o=r.fn;if(t===!0)return o(this);if(t===!1||null==t)return i(this);if(n.isArray(t))return t.length>0?(r.ids&&(r.ids=[r.name]),e.helpers.each(t,r)):i(this);if(r.data&&r.ids){var a=n.createFrame(r.data);a.contextPath=n.appendContextPath(r.data.contextPath,r.name),r={data:a}}return o(t,r)})},e.exports=t["default"]},function(e,t,r){"use strict";var n=r(1)["default"];t.__esModule=!0;var i=r(5),o=r(6),a=n(o);t["default"]=function(e){e.registerHelper("each",function(e,t){function r(t,r,o){l&&(l.key=t,l.index=r,l.first=0===r,l.last=!!o,u&&(l.contextPath=u+t)),c+=n(e[t],{data:l,blockParams:i.blockParams([e[t],t],[u+t,null])})}if(!t)throw new a["default"]("Must pass iterator to #each");var n=t.fn,o=t.inverse,s=0,c="",l=void 0,u=void 0;if(t.data&&t.ids&&(u=i.appendContextPath(t.data.contextPath,t.ids[0])+"."),i.isFunction(e)&&(e=e.call(this)),t.data&&(l=i.createFrame(t.data)),e&&"object"==typeof e)if(i.isArray(e))for(var p=e.length;p>s;s++)s in e&&r(s,s,s===e.length-1);else{var f=void 0;for(var h in e)e.hasOwnProperty(h)&&(void 0!==f&&r(f,s-1),f=h,s++);void 0!==f&&r(f,s-1,!0)}return 0===s&&(c=o(this)),c})},e.exports=t["default"]},function(e,t,r){"use strict";var n=r(1)["default"];t.__esModule=!0;var i=r(6),o=n(i);t["default"]=function(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new o["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')})},e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=!0;var n=r(5);t["default"]=function(e){e.registerHelper("if",function(e,t){return n.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||n.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,r){return e.helpers["if"].call(this,t,{fn:r.inverse,inverse:r.fn,hash:r.hash})})},e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e){e.registerHelper("log",function(){for(var t=[void 0],r=arguments[arguments.length-1],n=0;n<arguments.length-1;n++)t.push(arguments[n]);var i=1;null!=r.hash.level?i=r.hash.level:r.data&&null!=r.data.level&&(i=r.data.level),t[0]=i,e.log.apply(e,t)})},e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e){e.registerHelper("lookup",function(e,t){return e&&e[t]})},e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=!0;var n=r(5);t["default"]=function(e){e.registerHelper("with",function(e,t){n.isFunction(e)&&(e=e.call(this));var r=t.fn;if(n.isEmpty(e))return t.inverse(this);var i=t.data;return t.data&&t.ids&&(i=n.createFrame(t.data),i.contextPath=n.appendContextPath(t.data.contextPath,t.ids[0])),r(e,{data:i,blockParams:n.blockParams([e],[i&&i.contextPath])})})},e.exports=t["default"]},function(e,t,r){"use strict";function n(e){a["default"](e)}var i=r(1)["default"];t.__esModule=!0,t.registerDefaultDecorators=n;var o=r(19),a=i(o)},function(e,t,r){"use strict";t.__esModule=!0;var n=r(5);t["default"]=function(e){e.registerDecorator("inline",function(e,t,r,i){var o=e;return t.partials||(t.partials={},o=function(i,o){var a=r.partials;r.partials=n.extend({},a,t.partials);var s=e(i,o);return r.partials=a,s}),t.partials[i.args[0]]=i.fn,o})},e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=!0;var n=r(5),i={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=n.indexOf(i.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=i.lookupLevel(e),"undefined"!=typeof console&&i.lookupLevel(i.level)<=e){var t=i.methodMap[e];console[t]||(t="log");for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;r>o;o++)n[o-1]=arguments[o];console[t].apply(console,n)}}};t["default"]=i,e.exports=t["default"]},function(e,t){"use strict";function r(e){this.string=e}t.__esModule=!0,r.prototype.toString=r.prototype.toHTML=function(){return""+this.string},t["default"]=r,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){var t=e&&e[0]||1,r=y.COMPILER_REVISION;if(t!==r){if(r>t){var n=y.REVISION_CHANGES[r],i=y.REVISION_CHANGES[t];throw new v["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+i+").")}throw new v["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function i(e,t){function r(r,n,i){i.hash&&(n=g.extend({},n,i.hash),i.ids&&(i.ids[0]=!0)),r=t.VM.resolvePartial.call(this,r,n,i);var o=t.VM.invokePartial.call(this,r,n,i);if(null==o&&t.compile&&(i.partials[i.name]=t.compile(r,e.compilerOptions,t),o=i.partials[i.name](n,i)),null!=o){if(i.indent){for(var a=o.split("\n"),s=0,c=a.length;c>s&&(a[s]||s+1!==c);s++)a[s]=i.indent+a[s];o=a.join("\n")}return o}throw new v["default"]("The partial "+i.name+" could not be compiled when running in runtime-only mode")}function n(t){function r(t){return""+e.main(i,t,i.helpers,i.partials,a,c,s)}var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=o.data;n._setup(o),!o.partial&&e.useData&&(a=l(t,a));var s=void 0,c=e.useBlockParams?[]:void 0;return e.useDepths&&(s=o.depths?t!=o.depths[0]?[t].concat(o.depths):o.depths:[t]),(r=u(e.main,r,i,o.depths||[],a,c))(t,o)}if(!t)throw new v["default"]("No environment passed to template");if(!e||!e.main)throw new v["default"]("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var i={strict:function(e,t){if(!(t in e))throw new v["default"]('"'+t+'" not defined in '+e);return e[t]},lookup:function(e,t){for(var r=e.length,n=0;r>n;n++)if(e[n]&&null!=e[n][t])return e[n][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:g.escapeExpression,invokePartial:r,fn:function(t){var r=e[t];return r.decorator=e[t+"_d"],r},programs:[],program:function(e,t,r,n,i){var a=this.programs[e],s=this.fn(e);return t||i||n||r?a=o(this,e,s,t,r,n,i):a||(a=this.programs[e]=o(this,e,s)),a},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var r=e||t;return e&&t&&e!==t&&(r=g.extend({},t,e)),r},nullContext:p({}),noop:t.VM.noop,compilerInfo:e.compiler};return n.isTop=!0,n._setup=function(r){r.partial?(i.helpers=r.helpers,i.partials=r.partials,i.decorators=r.decorators):(i.helpers=i.merge(r.helpers,t.helpers),e.usePartial&&(i.partials=i.merge(r.partials,t.partials)),(e.usePartial||e.useDecorators)&&(i.decorators=i.merge(r.decorators,t.decorators)))},n._child=function(t,r,n,a){if(e.useBlockParams&&!n)throw new v["default"]("must pass block params");if(e.useDepths&&!a)throw new v["default"]("must pass parent depths");return o(i,t,e[t],r,0,n,a)},n}function o(e,t,r,n,i,o,a){function s(t){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=a;return!a||t==a[0]||t===e.nullContext&&null===a[0]||(s=[t].concat(a)),r(e,t,e.helpers,e.partials,i.data||n,o&&[i.blockParams].concat(o),s)}return s=u(r,s,e,a,n,o),s.program=t,s.depth=a?a.length:0,s.blockParams=i||0,s}function a(e,t,r){return e?e.call||r.name||(r.name=e,e=r.partials[e]):e="@partial-block"===r.name?r.data["partial-block"]:r.partials[r.name],e}function s(e,t,r){var n=r.data&&r.data["partial-block"];r.partial=!0,r.ids&&(r.data.contextPath=r.ids[0]||r.data.contextPath);var i=void 0;if(r.fn&&r.fn!==c&&!function(){r.data=y.createFrame(r.data);var e=r.fn;i=r.data["partial-block"]=function(t){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return r.data=y.createFrame(r.data),r.data["partial-block"]=n,e(t,r)},e.partials&&(r.partials=g.extend({},r.partials,e.partials))}(),void 0===e&&i&&(e=i),void 0===e)throw new v["default"]("The partial "+r.name+" could not be found");return e instanceof Function?e(t,r):void 0}function c(){return""}function l(e,t){return t&&"root"in t||(t=t?y.createFrame(t):{},t.root=e),t}function u(e,t,r,n,i,o){if(e.decorator){var a={};t=e.decorator(t,a,r,n&&n[0],i,o,n),g.extend(t,a)}return t}var p=r(23)["default"],f=r(3)["default"],h=r(1)["default"];t.__esModule=!0,t.checkRevision=n,t.template=i,t.wrapProgram=o,t.resolvePartial=a,t.invokePartial=s,t.noop=c;var d=r(5),g=f(d),m=r(6),v=h(m),y=r(4)},function(e,t,r){e.exports={"default":r(24),__esModule:!0}},function(e,t,r){r(25),e.exports=r(30).Object.seal},function(e,t,r){var n=r(26);r(27)("seal",function(e){return function(t){return e&&n(t)?e(t):t}})},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,r){var n=r(28),i=r(30),o=r(33);e.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],a={};a[e]=t(r),n(n.S+n.F*o(function(){r(1)}),"Object",a)}},function(e,t,r){var n=r(29),i=r(30),o=r(31),a="prototype",s=function(e,t,r){var c,l,u,p=e&s.F,f=e&s.G,h=e&s.S,d=e&s.P,g=e&s.B,m=e&s.W,v=f?i:i[t]||(i[t]={}),y=f?n:h?n[t]:(n[t]||{})[a];f&&(r=t);for(c in r)l=!p&&y&&c in y,l&&c in v||(u=l?y[c]:r[c],v[c]=f&&"function"!=typeof y[c]?r[c]:g&&l?o(u,n):m&&y[c]==u?function(e){var t=function(t){return this instanceof e?new e(t):e(t)};return t[a]=e[a],t}(u):d&&"function"==typeof u?o(Function.call,u):u,d&&((v[a]||(v[a]={}))[c]=u))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,e.exports=s},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t){var r=e.exports={version:"1.2.6"};"number"==typeof __e&&(__e=r)},function(e,t,r){var n=r(32);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t){(function(r){"use strict";t.__esModule=!0,t["default"]=function(e){var t="undefined"!=typeof r?r:window,n=t.Handlebars;e.noConflict=function(){return t.Handlebars===e&&(t.Handlebars=n),e}},e.exports=t["default"]}).call(t,function(){return this}())},function(e,t){"use strict";t.__esModule=!0;var r={helpers:{helperExpression:function(e){return"SubExpression"===e.type||("MustacheStatement"===e.type||"BlockStatement"===e.type)&&!!(e.params&&e.params.length||e.hash)},scopedId:function(e){return/^\.|this\b/.test(e.original)},simpleId:function(e){return 1===e.parts.length&&!r.helpers.scopedId(e)&&!e.depth}}};t["default"]=r,e.exports=t["default"]},function(e,t,r){"use strict";function n(e,t){if("Program"===e.type)return e;s["default"].yy=h,h.locInfo=function(e){return new h.SourceLocation(t&&t.srcName,e)};var r=new l["default"](t);return r.accept(s["default"].parse(e))}var i=r(1)["default"],o=r(3)["default"];t.__esModule=!0,t.parse=n;var a=r(37),s=i(a),c=r(38),l=i(c),u=r(40),p=o(u),f=r(5);t.parser=s["default"];var h={};f.extend(h,p)},function(e,t){"use strict";t.__esModule=!0;var r=function(){function e(){this.yy={}}var t={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition_plus0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,1],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(e,t,r,n,i,o,a){var s=o.length-1;switch(i){case 1:return o[s-1];case 2:this.$=n.prepareProgram(o[s]);break;case 3:this.$=o[s];break;case 4:this.$=o[s];break;case 5:this.$=o[s];break;case 6:this.$=o[s];break;case 7:this.$=o[s];break;case 8:this.$=o[s];break;case 9:this.$={type:"CommentStatement",value:n.stripComment(o[s]),strip:n.stripFlags(o[s],o[s]),loc:n.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:o[s],value:o[s],loc:n.locInfo(this._$)};break;case 11:this.$=n.prepareRawBlock(o[s-2],o[s-1],o[s],this._$);break;case 12:this.$={path:o[s-3],params:o[s-2],hash:o[s-1]};break;case 13:this.$=n.prepareBlock(o[s-3],o[s-2],o[s-1],o[s],!1,this._$);break;case 14:this.$=n.prepareBlock(o[s-3],o[s-2],o[s-1],o[s],!0,this._$);break;case 15:this.$={open:o[s-5],path:o[s-4],params:o[s-3],hash:o[s-2],blockParams:o[s-1],strip:n.stripFlags(o[s-5],o[s])};break;case 16:this.$={path:o[s-4],params:o[s-3],hash:o[s-2],blockParams:o[s-1],strip:n.stripFlags(o[s-5],o[s])};break;case 17:this.$={path:o[s-4],params:o[s-3],hash:o[s-2],blockParams:o[s-1],strip:n.stripFlags(o[s-5],o[s])};break;case 18:this.$={strip:n.stripFlags(o[s-1],o[s-1]),program:o[s]};break;case 19:var c=n.prepareBlock(o[s-2],o[s-1],o[s],o[s],!1,this._$),l=n.prepareProgram([c],o[s-1].loc);l.chained=!0,this.$={strip:o[s-2].strip,program:l,chain:!0};break;case 20:this.$=o[s];break;case 21:this.$={path:o[s-1],strip:n.stripFlags(o[s-2],o[s])};break;case 22:this.$=n.prepareMustache(o[s-3],o[s-2],o[s-1],o[s-4],n.stripFlags(o[s-4],o[s]),this._$);break;case 23:this.$=n.prepareMustache(o[s-3],o[s-2],o[s-1],o[s-4],n.stripFlags(o[s-4],o[s]),this._$);break;case 24:this.$={type:"PartialStatement",name:o[s-3],params:o[s-2],hash:o[s-1],indent:"",strip:n.stripFlags(o[s-4],o[s]),loc:n.locInfo(this._$)};break;case 25:this.$=n.preparePartialBlock(o[s-2],o[s-1],o[s],this._$);break;case 26:this.$={path:o[s-3],params:o[s-2],hash:o[s-1],strip:n.stripFlags(o[s-4],o[s])};break;case 27:this.$=o[s];break;case 28:this.$=o[s];break;case 29:this.$={type:"SubExpression",path:o[s-3],params:o[s-2],hash:o[s-1],loc:n.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:o[s],loc:n.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:n.id(o[s-2]),value:o[s],loc:n.locInfo(this._$)};break;case 32:this.$=n.id(o[s-1]);break;case 33:this.$=o[s];break;case 34:this.$=o[s];break;case 35:this.$={type:"StringLiteral",value:o[s],original:o[s],loc:n.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(o[s]),original:Number(o[s]),loc:n.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===o[s],original:"true"===o[s],loc:n.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:n.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:n.locInfo(this._$)};break;case 40:this.$=o[s];break;case 41:this.$=o[s];break;case 42:this.$=n.preparePath(!0,o[s],this._$);break;case 43:this.$=n.preparePath(!1,o[s],this._$);break;case 44:o[s-2].push({part:n.id(o[s]),original:o[s],separator:o[s-1]}),this.$=o[s-2];break;case 45:this.$=[{part:n.id(o[s]),original:o[s]}];break;case 46:this.$=[];break;case 47:o[s-1].push(o[s]);break;case 48:this.$=[o[s]];break;case 49:o[s-1].push(o[s]);break;case 50:this.$=[];break;case 51:o[s-1].push(o[s]);break;case 58:this.$=[];break;case 59:o[s-1].push(o[s]);break;case 64:this.$=[];break;case 65:o[s-1].push(o[s]);break;
case 70:this.$=[];break;case 71:o[s-1].push(o[s]);break;case 78:this.$=[];break;case 79:o[s-1].push(o[s]);break;case 82:this.$=[];break;case 83:o[s-1].push(o[s]);break;case 86:this.$=[];break;case 87:o[s-1].push(o[s]);break;case 90:this.$=[];break;case 91:o[s-1].push(o[s]);break;case 94:this.$=[];break;case 95:o[s-1].push(o[s]);break;case 98:this.$=[o[s]];break;case 99:o[s-1].push(o[s]);break;case 100:this.$=[o[s]];break;case 101:o[s-1].push(o[s])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{13:40,15:[1,20],17:39},{20:42,56:41,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:45,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:48,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:42,56:49,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:50,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,51]},{72:[1,35],86:52},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:53,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:54,38:56,39:[1,58],43:57,44:[1,59],45:55,47:[2,54]},{28:60,43:61,44:[1,59],47:[2,56]},{13:63,15:[1,20],18:[1,62]},{15:[2,48],18:[2,48]},{33:[2,86],57:64,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:65,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:66,47:[1,67]},{30:68,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:69,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:70,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:71,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:75,33:[2,80],50:72,63:73,64:76,65:[1,44],69:74,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,80]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,51]},{20:75,53:81,54:[2,84],63:82,64:76,65:[1,44],69:83,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:84,47:[1,67]},{47:[2,55]},{4:85,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:86,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:87,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:88,47:[1,67]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:75,33:[2,88],58:89,63:90,64:76,65:[1,44],69:91,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:92,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:93,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,31:94,33:[2,60],63:95,64:76,65:[1,44],69:96,70:77,71:78,72:[1,79],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,66],36:97,63:98,64:76,65:[1,44],69:99,70:77,71:78,72:[1,79],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,22:100,23:[2,52],63:101,64:76,65:[1,44],69:102,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,92],62:103,63:104,64:76,65:[1,44],69:105,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,106]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:107,72:[1,108],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,109],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,110]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:56,39:[1,58],43:57,44:[1,59],45:112,46:111,47:[2,76]},{33:[2,70],40:113,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,114]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:75,63:116,64:76,65:[1,44],67:115,68:[2,96],69:117,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,118]},{32:119,33:[2,62],74:120,75:[1,121]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:122,74:123,75:[1,121]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,124]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,125]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,109]},{20:75,63:126,64:76,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:75,33:[2,72],41:127,63:128,64:76,65:[1,44],69:129,70:77,71:78,72:[1,79],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,130]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,131]},{33:[2,63]},{72:[1,133],76:132},{33:[1,134]},{33:[2,69]},{15:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:135,74:136,75:[1,121]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,138],77:[1,137]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,139]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],55:[2,55],57:[2,20],61:[2,57],74:[2,81],83:[2,85],87:[2,18],91:[2,89],102:[2,53],105:[2,93],111:[2,19],112:[2,77],117:[2,97],120:[2,63],123:[2,69],124:[2,12],136:[2,75],137:[2,32]},parseError:function(e,t){throw new Error(e)},parse:function(e){function t(){var e;return e=r.lexer.lex()||1,"number"!=typeof e&&(e=r.symbols_[e]||e),e}var r=this,n=[0],i=[null],o=[],a=this.table,s="",c=0,l=0,u=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var p=this.lexer.yylloc;o.push(p);var f=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var h,d,g,m,v,y,b,w,x,_={};;){if(g=n[n.length-1],this.defaultActions[g]?m=this.defaultActions[g]:(null!==h&&"undefined"!=typeof h||(h=t()),m=a[g]&&a[g][h]),"undefined"==typeof m||!m.length||!m[0]){var E="";if(!u){x=[];for(y in a[g])this.terminals_[y]&&y>2&&x.push("'"+this.terminals_[y]+"'");E=this.lexer.showPosition?"Parse error on line "+(c+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+x.join(", ")+", got '"+(this.terminals_[h]||h)+"'":"Parse error on line "+(c+1)+": Unexpected "+(1==h?"end of input":"'"+(this.terminals_[h]||h)+"'"),this.parseError(E,{text:this.lexer.match,token:this.terminals_[h]||h,line:this.lexer.yylineno,loc:p,expected:x})}}if(m[0]instanceof Array&&m.length>1)throw new Error("Parse Error: multiple actions possible at state: "+g+", token: "+h);switch(m[0]){case 1:n.push(h),i.push(this.lexer.yytext),o.push(this.lexer.yylloc),n.push(m[1]),h=null,d?(h=d,d=null):(l=this.lexer.yyleng,s=this.lexer.yytext,c=this.lexer.yylineno,p=this.lexer.yylloc,u>0&&u--);break;case 2:if(b=this.productions_[m[1]][1],_.$=i[i.length-b],_._$={first_line:o[o.length-(b||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(b||1)].first_column,last_column:o[o.length-1].last_column},f&&(_._$.range=[o[o.length-(b||1)].range[0],o[o.length-1].range[1]]),v=this.performAction.call(_,s,l,c,this.yy,m[1],i,o),"undefined"!=typeof v)return v;b&&(n=n.slice(0,-1*b*2),i=i.slice(0,-1*b),o=o.slice(0,-1*b)),n.push(this.productions_[m[1]][0]),i.push(_.$),o.push(_._$),w=a[n[n.length-2]][n[n.length-1]],n.push(w);break;case 3:return!0}}return!0}},r=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,r,n,i;this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),a=0;a<o.length&&(r=this._input.match(this.rules[o[a]]),!r||t&&!(r[0].length>t[0].length)||(t=r,n=a,this.options.flex));a++);return t?(i=t[0].match(/(?:\r\n?|\n).*/g),i&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,o[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e?e:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return"undefined"!=typeof e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}};return e.options={},e.performAction=function(e,t,r,n){function i(e,r){return t.yytext=t.yytext.substr(e,t.yyleng-r)}switch(r){case 0:if("\\\\"===t.yytext.slice(-2)?(i(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(i(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(t.yytext=t.yytext.substr(5,t.yyleng-9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:return this.popState(),44;case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(t.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:return 72;case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return t.yytext=i(1,2).replace(/\\"/g,'"'),80;case 32:return t.yytext=i(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:return 82;case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return t.yytext=t.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],e.conditions={mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}},e}();return t.lexer=r,e.prototype=t,t.Parser=e,new e}();t["default"]=r,e.exports=t["default"]},function(e,t,r){"use strict";function n(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=e}function i(e,t,r){void 0===t&&(t=e.length);var n=e[t-1],i=e[t-2];return n?"ContentStatement"===n.type?(i||!r?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(n.original):void 0:r}function o(e,t,r){void 0===t&&(t=-1);var n=e[t+1],i=e[t+2];return n?"ContentStatement"===n.type?(i||!r?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(n.original):void 0:r}function a(e,t,r){var n=e[null==t?0:t+1];if(n&&"ContentStatement"===n.type&&(r||!n.rightStripped)){var i=n.value;n.value=n.value.replace(r?/^\s+/:/^[ \t]*\r?\n?/,""),n.rightStripped=n.value!==i}}function s(e,t,r){var n=e[null==t?e.length-1:t-1];if(n&&"ContentStatement"===n.type&&(r||!n.leftStripped)){var i=n.value;return n.value=n.value.replace(r?/\s+$/:/[ \t]+$/,""),n.leftStripped=n.value!==i,n.leftStripped}}var c=r(1)["default"];t.__esModule=!0;var l=r(39),u=c(l);n.prototype=new u["default"],n.prototype.Program=function(e){var t=!this.options.ignoreStandalone,r=!this.isRootSeen;this.isRootSeen=!0;for(var n=e.body,c=0,l=n.length;l>c;c++){var u=n[c],p=this.accept(u);if(p){var f=i(n,c,r),h=o(n,c,r),d=p.openStandalone&&f,g=p.closeStandalone&&h,m=p.inlineStandalone&&f&&h;p.close&&a(n,c,!0),p.open&&s(n,c,!0),t&&m&&(a(n,c),s(n,c)&&"PartialStatement"===u.type&&(u.indent=/([ \t]+$)/.exec(n[c-1].original)[1])),t&&d&&(a((u.program||u.inverse).body),s(n,c)),t&&g&&(a(n,c),s((u.inverse||u.program).body))}}return e},n.prototype.BlockStatement=n.prototype.DecoratorBlock=n.prototype.PartialBlockStatement=function(e){this.accept(e.program),this.accept(e.inverse);var t=e.program||e.inverse,r=e.program&&e.inverse,n=r,c=r;if(r&&r.chained)for(n=r.body[0].program;c.chained;)c=c.body[c.body.length-1].program;var l={open:e.openStrip.open,close:e.closeStrip.close,openStandalone:o(t.body),closeStandalone:i((n||t).body)};if(e.openStrip.close&&a(t.body,null,!0),r){var u=e.inverseStrip;u.open&&s(t.body,null,!0),u.close&&a(n.body,null,!0),e.closeStrip.open&&s(c.body,null,!0),!this.options.ignoreStandalone&&i(t.body)&&o(n.body)&&(s(t.body),a(n.body))}else e.closeStrip.open&&s(t.body,null,!0);return l},n.prototype.Decorator=n.prototype.MustacheStatement=function(e){return e.strip},n.prototype.PartialStatement=n.prototype.CommentStatement=function(e){var t=e.strip||{};return{inlineStandalone:!0,open:t.open,close:t.close}},t["default"]=n,e.exports=t["default"]},function(e,t,r){"use strict";function n(){this.parents=[]}function i(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")}function o(e){i.call(this,e),this.acceptKey(e,"program"),this.acceptKey(e,"inverse")}function a(e){this.acceptRequired(e,"name"),this.acceptArray(e.params),this.acceptKey(e,"hash")}var s=r(1)["default"];t.__esModule=!0;var c=r(6),l=s(c);n.prototype={constructor:n,mutating:!1,acceptKey:function(e,t){var r=this.accept(e[t]);if(this.mutating){if(r&&!n.prototype[r.type])throw new l["default"]('Unexpected node type "'+r.type+'" found when accepting '+t+" on "+e.type);e[t]=r}},acceptRequired:function(e,t){if(this.acceptKey(e,t),!e[t])throw new l["default"](e.type+" requires "+t)},acceptArray:function(e){for(var t=0,r=e.length;r>t;t++)this.acceptKey(e,t),e[t]||(e.splice(t,1),t--,r--)},accept:function(e){if(e){if(!this[e.type])throw new l["default"]("Unknown type: "+e.type,e);this.current&&this.parents.unshift(this.current),this.current=e;var t=this[e.type](e);return this.current=this.parents.shift(),!this.mutating||t?t:t!==!1?e:void 0}},Program:function(e){this.acceptArray(e.body)},MustacheStatement:i,Decorator:i,BlockStatement:o,DecoratorBlock:o,PartialStatement:a,PartialBlockStatement:function(e){a.call(this,e),this.acceptKey(e,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:i,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(e){this.acceptArray(e.pairs)},HashPair:function(e){this.acceptRequired(e,"value")}},t["default"]=n,e.exports=t["default"]},function(e,t,r){"use strict";function n(e,t){if(t=t.path?t.path.original:t,e.path.original!==t){var r={loc:e.path.loc};throw new m["default"](e.path.original+" doesn't match "+t,r)}}function i(e,t){this.source=e,this.start={line:t.first_line,column:t.first_column},this.end={line:t.last_line,column:t.last_column}}function o(e){return/^\[.*\]$/.test(e)?e.substr(1,e.length-2):e}function a(e,t){return{open:"~"===e.charAt(2),close:"~"===t.charAt(t.length-3)}}function s(e){return e.replace(/^\{\{~?\!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function c(e,t,r){r=this.locInfo(r);for(var n=e?"@":"",i=[],o=0,a="",s=0,c=t.length;c>s;s++){var l=t[s].part,u=t[s].original!==l;if(n+=(t[s].separator||"")+l,u||".."!==l&&"."!==l&&"this"!==l)i.push(l);else{if(i.length>0)throw new m["default"]("Invalid path: "+n,{loc:r});".."===l&&(o++,a+="../")}}return{type:"PathExpression",data:e,depth:o,parts:i,original:n,loc:r}}function l(e,t,r,n,i,o){var a=n.charAt(3)||n.charAt(2),s="{"!==a&&"&"!==a,c=/\*/.test(n);return{type:c?"Decorator":"MustacheStatement",path:e,params:t,hash:r,escaped:s,strip:i,loc:this.locInfo(o)}}function u(e,t,r,i){n(e,r),i=this.locInfo(i);var o={type:"Program",body:t,strip:{},loc:i};return{type:"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:o,openStrip:{},inverseStrip:{},closeStrip:{},loc:i}}function p(e,t,r,i,o,a){i&&i.path&&n(e,i);var s=/\*/.test(e.open);t.blockParams=e.blockParams;var c=void 0,l=void 0;if(r){if(s)throw new m["default"]("Unexpected inverse block on decorator",r);r.chain&&(r.program.body[0].closeStrip=i.strip),l=r.strip,c=r.program}return o&&(o=c,c=t,t=o),{type:s?"DecoratorBlock":"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:t,inverse:c,openStrip:e.strip,inverseStrip:l,closeStrip:i&&i.strip,loc:this.locInfo(a)}}function f(e,t){if(!t&&e.length){var r=e[0].loc,n=e[e.length-1].loc;r&&n&&(t={source:r.source,start:{line:r.start.line,column:r.start.column},end:{line:n.end.line,column:n.end.column}})}return{type:"Program",body:e,strip:{},loc:t}}function h(e,t,r,i){return n(e,r),{type:"PartialBlockStatement",name:e.path,params:e.params,hash:e.hash,program:t,openStrip:e.strip,closeStrip:r&&r.strip,loc:this.locInfo(i)}}var d=r(1)["default"];t.__esModule=!0,t.SourceLocation=i,t.id=o,t.stripFlags=a,t.stripComment=s,t.preparePath=c,t.prepareMustache=l,t.prepareRawBlock=u,t.prepareBlock=p,t.prepareProgram=f,t.preparePartialBlock=h;var g=r(6),m=d(g)},function(e,t,r){"use strict";function n(){}function i(e,t,r){if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new u["default"]("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);t=t||{},"data"in t||(t.data=!0),t.compat&&(t.useDepths=!0);var n=r.parse(e,t),i=(new r.Compiler).compile(n,t);return(new r.JavaScriptCompiler).compile(i,t)}function o(e,t,r){function n(){var n=r.parse(e,t),i=(new r.Compiler).compile(n,t),o=(new r.JavaScriptCompiler).compile(i,t,void 0,!0);return r.template(o)}function i(e,t){return o||(o=n()),o.call(this,e,t)}if(void 0===t&&(t={}),null==e||"string"!=typeof e&&"Program"!==e.type)throw new u["default"]("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);t=p.extend({},t),"data"in t||(t.data=!0),t.compat&&(t.useDepths=!0);var o=void 0;return i._setup=function(e){return o||(o=n()),o._setup(e)},i._child=function(e,t,r,i){return o||(o=n()),o._child(e,t,r,i)},i}function a(e,t){if(e===t)return!0;if(p.isArray(e)&&p.isArray(t)&&e.length===t.length){for(var r=0;r<e.length;r++)if(!a(e[r],t[r]))return!1;return!0}}function s(e){if(!e.path.parts){var t=e.path;e.path={type:"PathExpression",data:!1,depth:0,parts:[t.original+""],original:t.original+"",loc:t.loc}}}var c=r(1)["default"];t.__esModule=!0,t.Compiler=n,t.precompile=i,t.compile=o;var l=r(6),u=c(l),p=r(5),f=r(35),h=c(f),d=[].slice;n.prototype={compiler:n,equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var r=0;t>r;r++){var n=this.opcodes[r],i=e.opcodes[r];if(n.opcode!==i.opcode||!a(n.args,i.args))return!1}t=this.children.length;for(var r=0;t>r;r++)if(!this.children[r].equals(e.children[r]))return!1;return!0},guid:0,compile:function(e,t){this.sourceNode=[],this.opcodes=[],this.children=[],this.options=t,this.stringParams=t.stringParams,this.trackIds=t.trackIds,t.blockParams=t.blockParams||[];var r=t.knownHelpers;if(t.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0,lookup:!0},r)for(var n in r)n in r&&(this.options.knownHelpers[n]=r[n]);return this.accept(e)},compileProgram:function(e){var t=new this.compiler,r=t.compile(e,this.options),n=this.guid++;return this.usePartial=this.usePartial||r.usePartial,this.children[n]=r,this.useDepths=this.useDepths||r.useDepths,n},accept:function(e){if(!this[e.type])throw new u["default"]("Unknown type: "+e.type,e);this.sourceNode.unshift(e);var t=this[e.type](e);return this.sourceNode.shift(),t},Program:function(e){this.options.blockParams.unshift(e.blockParams);for(var t=e.body,r=t.length,n=0;r>n;n++)this.accept(t[n]);return this.options.blockParams.shift(),this.isSimple=1===r,this.blockParams=e.blockParams?e.blockParams.length:0,this},BlockStatement:function(e){s(e);var t=e.program,r=e.inverse;t=t&&this.compileProgram(t),r=r&&this.compileProgram(r);var n=this.classifySexpr(e);"helper"===n?this.helperSexpr(e,t,r):"simple"===n?(this.simpleSexpr(e),this.opcode("pushProgram",t),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("blockValue",e.path.original)):(this.ambiguousSexpr(e,t,r),this.opcode("pushProgram",t),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(e){var t=e.program&&this.compileProgram(e.program),r=this.setupFullMustacheParams(e,t,void 0),n=e.path;this.useDecorators=!0,this.opcode("registerDecorator",r.length,n.original)},PartialStatement:function(e){this.usePartial=!0;var t=e.program;t&&(t=this.compileProgram(e.program));var r=e.params;if(r.length>1)throw new u["default"]("Unsupported number of partial arguments: "+r.length,e);r.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):r.push({type:"PathExpression",parts:[],depth:0}));var n=e.name.original,i="SubExpression"===e.name.type;i&&this.accept(e.name),this.setupFullMustacheParams(e,t,void 0,!0);var o=e.indent||"";this.options.preventIndent&&o&&(this.opcode("appendContent",o),o=""),this.opcode("invokePartial",i,n,o),this.opcode("append")},PartialBlockStatement:function(e){this.PartialStatement(e)},MustacheStatement:function(e){this.SubExpression(e),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(e){this.DecoratorBlock(e)},ContentStatement:function(e){e.value&&this.opcode("appendContent",e.value)},CommentStatement:function(){},SubExpression:function(e){s(e);var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ambiguousSexpr:function(e,t,r){var n=e.path,i=n.parts[0],o=null!=t||null!=r;this.opcode("getContext",n.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",r),n.strict=!0,this.accept(n),this.opcode("invokeAmbiguous",i,o)},simpleSexpr:function(e){var t=e.path;t.strict=!0,this.accept(t),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,r){var n=this.setupFullMustacheParams(e,t,r),i=e.path,o=i.parts[0];if(this.options.knownHelpers[o])this.opcode("invokeKnownHelper",n.length,o);else{
if(this.options.knownHelpersOnly)throw new u["default"]("You specified knownHelpersOnly, but used the unknown helper "+o,e);i.strict=!0,i.falsy=!0,this.accept(i),this.opcode("invokeHelper",n.length,i.original,h["default"].helpers.simpleId(i))}},PathExpression:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0],r=h["default"].helpers.scopedId(e),n=!e.depth&&!r&&this.blockParamIndex(t);n?this.opcode("lookupBlockParam",n,e.parts):t?e.data?(this.options.data=!0,this.opcode("lookupData",e.depth,e.parts,e.strict)):this.opcode("lookupOnContext",e.parts,e.falsy,e.strict,r):this.opcode("pushContext")},StringLiteral:function(e){this.opcode("pushString",e.value)},NumberLiteral:function(e){this.opcode("pushLiteral",e.value)},BooleanLiteral:function(e){this.opcode("pushLiteral",e.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(e){var t=e.pairs,r=0,n=t.length;for(this.opcode("pushHash");n>r;r++)this.pushParam(t[r].value);for(;r--;)this.opcode("assignToHash",t[r].key);this.opcode("popHash")},opcode:function(e){this.opcodes.push({opcode:e,args:d.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(e){e&&(this.useDepths=!0)},classifySexpr:function(e){var t=h["default"].helpers.simpleId(e.path),r=t&&!!this.blockParamIndex(e.path.parts[0]),n=!r&&h["default"].helpers.helperExpression(e),i=!r&&(n||t);if(i&&!n){var o=e.path.parts[0],a=this.options;a.knownHelpers[o]?n=!0:a.knownHelpersOnly&&(i=!1)}return n?"helper":i?"ambiguous":"simple"},pushParams:function(e){for(var t=0,r=e.length;r>t;t++)this.pushParam(e[t])},pushParam:function(e){var t=null!=e.value?e.value:e.original||"";if(this.stringParams)t.replace&&(t=t.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",t,e.type),"SubExpression"===e.type&&this.accept(e);else{if(this.trackIds){var r=void 0;if(!e.parts||h["default"].helpers.scopedId(e)||e.depth||(r=this.blockParamIndex(e.parts[0])),r){var n=e.parts.slice(1).join(".");this.opcode("pushId","BlockParam",r,n)}else t=e.original||t,t.replace&&(t=t.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",e.type,t)}this.accept(e)}},setupFullMustacheParams:function(e,t,r,n){var i=e.params;return this.pushParams(i),this.opcode("pushProgram",t),this.opcode("pushProgram",r),e.hash?this.accept(e.hash):this.opcode("emptyHash",n),i},blockParamIndex:function(e){for(var t=0,r=this.options.blockParams.length;r>t;t++){var n=this.options.blockParams[t],i=n&&p.indexOf(n,e);if(n&&i>=0)return[t,i]}}}},function(e,t,r){"use strict";function n(e){this.value=e}function i(){}function o(e,t,r,n){var i=t.popStack(),o=0,a=r.length;for(e&&a--;a>o;o++)i=t.nameLookup(i,r[o],n);return e?[t.aliasable("container.strict"),"(",i,", ",t.quotedString(r[o]),")"]:i}var a=r(1)["default"];t.__esModule=!0;var s=r(4),c=r(6),l=a(c),u=r(5),p=r(43),f=a(p);i.prototype={nameLookup:function(e,t){return i.isValidJavaScriptVariableName(t)?[e,".",t]:[e,"[",JSON.stringify(t),"]"]},depthedLookup:function(e){return[this.aliasable("container.lookup"),'(depths, "',e,'")']},compilerInfo:function(){var e=s.COMPILER_REVISION,t=s.REVISION_CHANGES[e];return[e,t]},appendToBuffer:function(e,t,r){return u.isArray(e)||(e=[e]),e=this.source.wrap(e,t),this.environment.isSimple?["return ",e,";"]:r?["buffer += ",e,";"]:(e.appendToBuffer=!0,e)},initializeBuffer:function(){return this.quotedString("")},compile:function(e,t,r,n){this.environment=e,this.options=t,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!n,this.name=this.environment.name,this.isChild=!!r,this.context=r||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(e,t),this.useDepths=this.useDepths||e.useDepths||e.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||e.useBlockParams;var i=e.opcodes,o=void 0,a=void 0,s=void 0,c=void 0;for(s=0,c=i.length;c>s;s++)o=i[s],this.source.currentLocation=o.loc,a=a||o.loc,this[o.opcode].apply(this,o.args);if(this.source.currentLocation=a,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new l["default"]("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend("var decorators = container.decorators;\n"),this.decorators.push("return fn;"),n?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var u=this.createFunctionContext(n);if(this.isChild)return u;var p={compiler:this.compilerInfo(),main:u};this.decorators&&(p.main_d=this.decorators,p.useDecorators=!0);var f=this.context,h=f.programs,d=f.decorators;for(s=0,c=h.length;c>s;s++)h[s]&&(p[s]=h[s],d[s]&&(p[s+"_d"]=d[s],p.useDecorators=!0));return this.environment.usePartial&&(p.usePartial=!0),this.options.data&&(p.useData=!0),this.useDepths&&(p.useDepths=!0),this.useBlockParams&&(p.useBlockParams=!0),this.options.compat&&(p.compat=!0),n?p.compilerOptions=this.options:(p.compiler=JSON.stringify(p.compiler),this.source.currentLocation={start:{line:1,column:0}},p=this.objectLiteral(p),t.srcName?(p=p.toStringWithSourceMap({file:t.destName}),p.map=p.map&&p.map.toString()):p=p.toString()),p},preamble:function(){this.lastContext=0,this.source=new f["default"](this.options.srcName),this.decorators=new f["default"](this.options.srcName)},createFunctionContext:function(e){var t="",r=this.stackVars.concat(this.registers.list);r.length>0&&(t+=", "+r.join(", "));var n=0;for(var i in this.aliases){var o=this.aliases[i];this.aliases.hasOwnProperty(i)&&o.children&&o.referenceCount>1&&(t+=", alias"+ ++n+"="+i,o.children[0]="alias"+n)}var a=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&a.push("blockParams"),this.useDepths&&a.push("depths");var s=this.mergeSource(t);return e?(a.push(s),Function.apply(this,a)):this.source.wrap(["function(",a.join(","),") {\n  ",s,"}"])},mergeSource:function(e){var t=this.environment.isSimple,r=!this.forceBuffer,n=void 0,i=void 0,o=void 0,a=void 0;return this.source.each(function(e){e.appendToBuffer?(o?e.prepend("  + "):o=e,a=e):(o&&(i?o.prepend("buffer += "):n=!0,a.add(";"),o=a=void 0),i=!0,t||(r=!1))}),r?o?(o.prepend("return "),a.add(";")):i||this.source.push('return "";'):(e+=", buffer = "+(n?"":this.initializeBuffer()),o?(o.prepend("return buffer + "),a.add(";")):this.source.push("return buffer;")),e&&this.source.prepend("var "+e.substring(2)+(n?"":";\n")),this.source.merge()},blockValue:function(e){var t=this.aliasable("helpers.blockHelperMissing"),r=[this.contextName(0)];this.setupHelperArgs(e,0,r);var n=this.popStack();r.splice(1,0,n),this.push(this.source.functionCall(t,"call",r))},ambiguousBlockValue:function(){var e=this.aliasable("helpers.blockHelperMissing"),t=[this.contextName(0)];this.setupHelperArgs("",0,t,!0),this.flushInline();var r=this.topStack();t.splice(1,0,r),this.pushSource(["if (!",this.lastHelper,") { ",r," = ",this.source.functionCall(e,"call",t),"}"])},appendContent:function(e){this.pendingContent?e=this.pendingContent+e:this.pendingLocation=this.source.currentLocation,this.pendingContent=e},append:function(){if(this.isInline())this.replaceStack(function(e){return[" != null ? ",e,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var e=this.popStack();this.pushSource(["if (",e," != null) { ",this.appendToBuffer(e,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(e){this.lastContext=e},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(e,t,r,n){var i=0;n||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(e[i++])),this.resolvePath("context",e,i,t,r)},lookupBlockParam:function(e,t){this.useBlockParams=!0,this.push(["blockParams[",e[0],"][",e[1],"]"]),this.resolvePath("context",t,1)},lookupData:function(e,t,r){e?this.pushStackLiteral("container.data(data, "+e+")"):this.pushStackLiteral("data"),this.resolvePath("data",t,0,!0,r)},resolvePath:function(e,t,r,n,i){var a=this;if(this.options.strict||this.options.assumeObjects)return void this.push(o(this.options.strict&&i,this,t,e));for(var s=t.length;s>r;r++)this.replaceStack(function(i){var o=a.nameLookup(i,t[r],e);return n?[" && ",o]:[" != null ? ",o," : ",i]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(e,t){this.pushContext(),this.pushString(t),"SubExpression"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(e){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(e?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(e.ids)),this.stringParams&&(this.push(this.objectLiteral(e.contexts)),this.push(this.objectLiteral(e.types))),this.push(this.objectLiteral(e.values))},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){null!=e?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},registerDecorator:function(e,t){var r=this.nameLookup("decorators",t,"decorator"),n=this.setupHelperArgs(t,e);this.decorators.push(["fn = ",this.decorators.functionCall(r,"",["fn","props","container",n])," || fn;"])},invokeHelper:function(e,t,r){var n=this.popStack(),i=this.setupHelper(e,t),o=r?[i.name," || "]:"",a=["("].concat(o,n);this.options.strict||a.push(" || ",this.aliasable("helpers.helperMissing")),a.push(")"),this.push(this.source.functionCall(a,"call",i.callParams))},invokeKnownHelper:function(e,t){var r=this.setupHelper(e,t);this.push(this.source.functionCall(r.name,"call",r.callParams))},invokeAmbiguous:function(e,t){this.useRegister("helper");var r=this.popStack();this.emptyHash();var n=this.setupHelper(0,e,t),i=this.lastHelper=this.nameLookup("helpers",e,"helper"),o=["(","(helper = ",i," || ",r,")"];this.options.strict||(o[0]="(helper = ",o.push(" != null ? helper : ",this.aliasable("helpers.helperMissing"))),this.push(["(",o,n.paramsInit?["),(",n.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",n.callParams)," : helper))"])},invokePartial:function(e,t,r){var n=[],i=this.setupParams(t,1,n);e&&(t=this.popStack(),delete i.name),r&&(i.indent=JSON.stringify(r)),i.helpers="helpers",i.partials="partials",i.decorators="container.decorators",e?n.unshift(t):n.unshift(this.nameLookup("partials",t,"partial")),this.options.compat&&(i.depths="depths"),i=this.objectLiteral(i),n.push(i),this.push(this.source.functionCall("container.invokePartial","",n))},assignToHash:function(e){var t=this.popStack(),r=void 0,n=void 0,i=void 0;this.trackIds&&(i=this.popStack()),this.stringParams&&(n=this.popStack(),r=this.popStack());var o=this.hash;r&&(o.contexts[e]=r),n&&(o.types[e]=n),i&&(o.ids[e]=i),o.values[e]=t},pushId:function(e,t,r){"BlockParam"===e?this.pushStackLiteral("blockParams["+t[0]+"].path["+t[1]+"]"+(r?" + "+JSON.stringify("."+r):"")):"PathExpression"===e?this.pushString(t):"SubExpression"===e?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:i,compileChildren:function(e,t){for(var r=e.children,n=void 0,i=void 0,o=0,a=r.length;a>o;o++){n=r[o],i=new this.compiler;var s=this.matchExistingProgram(n);if(null==s){this.context.programs.push("");var c=this.context.programs.length;n.index=c,n.name="program"+c,this.context.programs[c]=i.compile(n,t,this.context,!this.precompile),this.context.decorators[c]=i.decorators,this.context.environments[c]=n,this.useDepths=this.useDepths||i.useDepths,this.useBlockParams=this.useBlockParams||i.useBlockParams,n.useDepths=this.useDepths,n.useBlockParams=this.useBlockParams}else n.index=s.index,n.name="program"+s.index,this.useDepths=this.useDepths||s.useDepths,this.useBlockParams=this.useBlockParams||s.useBlockParams}},matchExistingProgram:function(e){for(var t=0,r=this.context.environments.length;r>t;t++){var n=this.context.environments[t];if(n&&n.equals(e))return n}},programExpression:function(e){var t=this.environment.children[e],r=[t.index,"data",t.blockParams];return(this.useBlockParams||this.useDepths)&&r.push("blockParams"),this.useDepths&&r.push("depths"),"container.program("+r.join(", ")+")"},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},push:function(e){return e instanceof n||(e=this.source.wrap(e)),this.inlineStack.push(e),e},pushStackLiteral:function(e){this.push(new n(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),e&&this.source.push(e)},replaceStack:function(e){var t=["("],r=void 0,i=void 0,o=void 0;if(!this.isInline())throw new l["default"]("replaceStack on non-inline");var a=this.popStack(!0);if(a instanceof n)r=[a.value],t=["(",r],o=!0;else{i=!0;var s=this.incrStack();t=["((",this.push(s)," = ",a,")"],r=this.topStack()}var c=e.call(this,r);o||this.popStack(),i&&this.stackSlot--,this.push(t.concat(c,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;this.inlineStack=[];for(var t=0,r=e.length;r>t;t++){var i=e[t];if(i instanceof n)this.compileStack.push(i);else{var o=this.incrStack();this.pushSource([o," = ",i,";"]),this.compileStack.push(o)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),r=(t?this.inlineStack:this.compileStack).pop();if(!e&&r instanceof n)return r.value;if(!t){if(!this.stackSlot)throw new l["default"]("Invalid stack pop");this.stackSlot--}return r},topStack:function(){var e=this.isInline()?this.inlineStack:this.compileStack,t=e[e.length-1];return t instanceof n?t.value:t},contextName:function(e){return this.useDepths&&e?"depths["+e+"]":"depth"+e},quotedString:function(e){return this.source.quotedString(e)},objectLiteral:function(e){return this.source.objectLiteral(e)},aliasable:function(e){var t=this.aliases[e];return t?(t.referenceCount++,t):(t=this.aliases[e]=this.source.wrap(e),t.aliasable=!0,t.referenceCount=1,t)},setupHelper:function(e,t,r){var n=[],i=this.setupHelperArgs(t,e,n,r),o=this.nameLookup("helpers",t,"helper"),a=this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})");return{params:n,paramsInit:i,name:o,callParams:[a].concat(n)}},setupParams:function(e,t,r){var n={},i=[],o=[],a=[],s=!r,c=void 0;s&&(r=[]),n.name=this.quotedString(e),n.hash=this.popStack(),this.trackIds&&(n.hashIds=this.popStack()),this.stringParams&&(n.hashTypes=this.popStack(),n.hashContexts=this.popStack());var l=this.popStack(),u=this.popStack();(u||l)&&(n.fn=u||"container.noop",n.inverse=l||"container.noop");for(var p=t;p--;)c=this.popStack(),r[p]=c,this.trackIds&&(a[p]=this.popStack()),this.stringParams&&(o[p]=this.popStack(),i[p]=this.popStack());return s&&(n.args=this.source.generateArray(r)),this.trackIds&&(n.ids=this.source.generateArray(a)),this.stringParams&&(n.types=this.source.generateArray(o),n.contexts=this.source.generateArray(i)),this.options.data&&(n.data="data"),this.useBlockParams&&(n.blockParams="blockParams"),n},setupHelperArgs:function(e,t,r,n){var i=this.setupParams(e,t,r);return i=this.objectLiteral(i),n?(this.useRegister("options"),r.push("options"),["options=",i]):r?(r.push(i),""):i}},function(){for(var e="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),t=i.RESERVED_WORDS={},r=0,n=e.length;n>r;r++)t[e[r]]=!0}(),i.isValidJavaScriptVariableName=function(e){return!i.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)},t["default"]=i,e.exports=t["default"]},function(e,t,r){"use strict";function n(e,t,r){if(o.isArray(e)){for(var n=[],i=0,a=e.length;a>i;i++)n.push(t.wrap(e[i],r));return n}return"boolean"==typeof e||"number"==typeof e?e+"":e}function i(e){this.srcFile=e,this.source=[]}t.__esModule=!0;var o=r(5),a=void 0;try{}catch(s){}a||(a=function(e,t,r,n){this.src="",n&&this.add(n)},a.prototype={add:function(e){o.isArray(e)&&(e=e.join("")),this.src+=e},prepend:function(e){o.isArray(e)&&(e=e.join("")),this.src=e+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),i.prototype={isEmpty:function(){return!this.source.length},prepend:function(e,t){this.source.unshift(this.wrap(e,t))},push:function(e,t){this.source.push(this.wrap(e,t))},merge:function(){var e=this.empty();return this.each(function(t){e.add(["  ",t,"\n"])}),e},each:function(e){for(var t=0,r=this.source.length;r>t;t++)e(this.source[t])},empty:function(){var e=this.currentLocation||{start:{}};return new a(e.start.line,e.start.column,this.srcFile)},wrap:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return e instanceof a?e:(e=n(e,this,t),new a(t.start.line,t.start.column,this.srcFile,e))},functionCall:function(e,t,r){return r=this.generateList(r),this.wrap([e,t?"."+t+"(":"(",r,")"])},quotedString:function(e){return'"'+(e+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(e){var t=[];for(var r in e)if(e.hasOwnProperty(r)){var i=n(e[r],this);"undefined"!==i&&t.push([this.quotedString(r),":",i])}var o=this.generateList(t);return o.prepend("{"),o.add("}"),o},generateList:function(e){for(var t=this.empty(),r=0,i=e.length;i>r;r++)r&&t.add(","),t.add(n(e[r],this));return t},generateArray:function(e){var t=this.generateList(e);return t.prepend("["),t.add("]"),t}},t["default"]=i,e.exports=t["default"]}])})},{}],28:[function(e,t,r){t.exports=function(e,t,r){var n={attr:e.toLowerCase()};return t&&(n.tag=t.toLowerCase()),r&&(n.valuePolicy=r),n}},{}],29:[function(e,t,r){var n=e("insane"),i=e("./insane-config-builder");t.exports=function(e){var t=i(e);return function(e){return n(e,t,!0)}}},{"./insane-config-builder":30,insane:36}],30:[function(e,t,r){function n(e){return u(e)?String(e):""}function i(e,t){var r=Object.keys(t.attrs),n=r.map(function(e){return e.toLowerCase()}),i=n.indexOf(e);return i>-1?r[i]:void 0}function o(e){return e.map(function(e){return e.name.toLowerCase()})}function a(e,t){var r=e.global.reduce(function(e,r){var n=t.map(function(e){return l(r.attr,e,r.valuePolicy)});return e.concat(n)},[]);return e.tagSpecific.concat(r).reduce(function(e,t){var r=e[t.tag],n=t.attr;return r||(r=e[t.tag]=[]),-1===r.indexOf(n)&&r.push(n),e},{})}function s(e){return e.tagSpecific.concat(e.global).filter(function(e){var t=e.valuePolicy;return t&&u(t.values)}).map(function(e){var t=e.tag,r=e.attr,o=e.valuePolicy,a=o.ignoreCase!==!1,s=[].concat(o.values).map(function(e){var t=n(e);return a?t.toLowerCase():t});return function(e){var o=i(r,e),c=n(e.attrs[o]),l=a?c.toLowerCase():c;return t&&e.tag!==t||!o||-1===s.indexOf(l)&&delete e.attrs[o],!0}})}function c(){return function(e){var t=i("rel",e),r=e.attrs[t];return"a"===e.tag&&(t||(t="rel"),u(r)||(r=""),e.attrs[t]=r+(r.length?" ":"")+"nofollow noopener noreferrer"),!0}}var l=e("./attribute-policy-builder"),u=e("./utils").isDefined;t.exports=function(e){var t={},r=o(e.tagPolicies),n=a(e.attrPolicies,r),i=s(e.attrPolicies);return e.requireNofollowOnAnchors&&i.push(c()),t.allowedTags=r,t.allowedAttributes=n,t.allowedSchemes=e.urlProtocols,i.length&&(t.filter=function(e){return i.reduce(function(t,r){return t?r(e):!1},!0)}),t}},{"./attribute-policy-builder":28,"./utils":32}],31:[function(e,t,r){function n(e){var t=c(e.elements)?[].concat(e.elements):[];return t.filter(function(e){return"string"==typeof e}).map(function(e){return{name:e.toLowerCase()}})}function i(e){var t=c(e.attributes)?[].concat(e.attributes):[],r={global:[],tagSpecific:[]};return t.filter(function(e){return c(e.names)}).forEach(function(e){var t=c(e.on)?[].concat(e.on):[];[].concat(e.names).filter(function(e){return"string"==typeof e}).forEach(function(n){t.length>0?t.forEach(function(t){r.tagSpecific.push(s(n,t,e.matching))}):r.global.push(s(n,null,e.matching))})}),r}function o(e){var t="object"==typeof e?e:{},r={};return r.tagPolicies=n(t),r.attrPolicies=i(t),r.urlProtocols=t.urlProtocols,r.requireNofollowOnAnchors=t.requireRelNofollowOnLinks!==!1,r}function a(e){var t=o(e);return l(t)}var s=e("./attribute-policy-builder"),c=e("./utils").isDefined,l=e("./insane-adapter");t.exports={create:a}},{"./attribute-policy-builder":28,"./insane-adapter":29,"./utils":32}],32:[function(e,t,r){function n(e){return void 0!==e&&null!==e}t.exports={isDefined:n}},{}],33:[function(e,t,r){"use strict";var n=e("./toMap"),i=["background","base","cite","href","longdesc","src","usemap"];t.exports={uris:n(i)}},{"./toMap":42}],34:[function(e,t,r){"use strict";var n={allowedAttributes:{a:["href","name","target","title","aria-label"],iframe:["allowfullscreen","frameborder","src"],img:["src","alt","title","aria-label"]},allowedClasses:{},allowedSchemes:["http","https","mailto"],allowedTags:["a","abbr","article","b","blockquote","br","caption","code","del","details","div","em","h1","h2","h3","h4","h5","h6","hr","i","img","ins","kbd","li","main","mark","ol","p","pre","section","span","strike","strong","sub","summary","sup","table","tbody","td","th","thead","tr","u","ul"],filter:null};t.exports=n},{}],35:[function(e,t,r){"use strict";var n=e("./toMap"),i=["area","br","col","hr","img","wbr","input","base","basefont","link","meta"];t.exports={voids:n(i)}},{"./toMap":42}],36:[function(e,t,r){"use strict";function n(e,t,r){var n=[],c=r===!0?t:i({},s,t),l=a(n,c);return o(e,l),n.join("")}var i=(e("he"),e("assignment")),o=e("./parser"),a=e("./sanitizer"),s=e("./defaults");n.defaults=s,t.exports=n},{"./defaults":34,"./parser":39,"./sanitizer":40,assignment:38,he:41}],37:[function(e,t,r){"use strict";t.exports=function(e){return"string"==typeof e?e.toLowerCase():e}},{}],38:[function(e,t,r){"use strict";function n(e){for(var t,r,i=Array.prototype.slice.call(arguments,1);i.length;){t=i.shift();for(r in t)t.hasOwnProperty(r)&&("[object Object]"===Object.prototype.toString.call(e[r])?e[r]=n(e[r],t[r]):e[r]=t[r])}return e}t.exports=n},{}],39:[function(e,t,r){"use strict";function n(){var e=[];return e.lastItem=function(){return e[e.length-1]},e}function i(e,t){function r(){y=!0,i();var t=e===w;w=e,t&&(e="")}function i(){"<!--"===e.substr(0,4)?d():f.test(e)?h(l,v):p.test(e)&&h(c,m),g()}function h(t,r){var n=e.match(t);n&&(e=e.substring(n[0].length),n[0].replace(t,r),y=!1)}function d(){var r=e.indexOf("-->");r>=0&&(t.comment&&t.comment(e.substring(4,r)),e=e.substring(r+3),y=!1)}function g(){if(y){var r,n=e.indexOf("<");n>=0?(r=e.substring(0,n),e=e.substring(n)):(r=e,e=""),t.chars&&t.chars(r)}}function m(e,r,n,i){function c(e,t,r,n,i){void 0===r&&void 0===n&&void 0===i?l[t]=void 0:l[t]=o.decode(r||n||i||"")}var l={},p=a(r),f=s.voids[p]||!!i;n.replace(u,c),f||b.push(p),t.start&&t.start(p,l,f)}function v(e,r){var n,i=0,o=a(r);if(o)for(i=b.length-1;i>=0&&b[i]!==o;i--);if(i>=0){for(n=b.length-1;n>=i;n--)t.end&&t.end(b[n]);b.length=i}}for(var y,b=n(),w=e;e;)r();v()}var o=e("he"),a=e("./lowercase"),s=(e("./attributes"),e("./elements")),c=/^<\s*([\w:-]+)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*>/,l=/^<\s*\/\s*([\w:-]+)[^>]*>/,u=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,p=/^</,f=/^<\s*\//;t.exports=i},{"./attributes":33,"./elements":35,"./lowercase":37,he:41}],40:[function(e,t,r){"use strict";function n(e,t){function r(t){e.push(t)}function n(e,t,n){function s(e){function n(e){return p&&-1!==p.indexOf(e)}var s,u=t[e],p=(g.allowedClasses||{})[c]||[],f=(g.allowedAttributes||{})[c]||[],h=o(e);"class"===h&&-1===f.indexOf(h)?(u=u.split(" ").filter(n).join(" ").trim(),s=u.length):s=-1!==f.indexOf(h)&&(a.uris[h]!==!0||l(u)),s&&(r(" "),r(e),"string"==typeof u&&(r('="'),r(i.encode(u)),r('"')))}var c=o(e);return d.ignoring?void p(c):-1===(g.allowedTags||[]).indexOf(c)?void p(c):g.filter&&!g.filter({tag:c,attrs:t})?void p(c):(r("<"),r(c),Object.keys(t).forEach(s),void r(n?"/>":">"))}function c(e){var t=o(e),n=-1!==(g.allowedTags||[]).indexOf(t);n&&d.ignoring===!1?(r("</"),r(t),r(">")):f(t)}function l(e){function t(t){return 0===e.indexOf(t+":")}var r=e[0];if("#"===r||"/"===r)return!0;var n=e.indexOf(":");if(-1===n)return!0;var i=e.indexOf("?");if(-1!==i&&n>i)return!0;var o=e.indexOf("#");return-1!==o&&n>o?!0:g.allowedSchemes.some(t)}function u(e){d.ignoring===!1&&r(g.transformText?g.transformText(e):e)}function p(e){s.voids[e]||(d.ignoring===!1?d={ignoring:e,depth:1}:d.ignoring===e&&d.depth++)}function f(e){d.ignoring===e&&--d.depth<=0&&h()}function h(){d={ignoring:!1,depth:0}}var d,g=t||{};return h(),{start:n,end:c,chars:u}}var i=e("he"),o=e("./lowercase"),a=e("./attributes"),s=e("./elements");t.exports=n},{"./attributes":33,"./elements":35,"./lowercase":37,he:41}],41:[function(e,t,r){"use strict";function n(e){return s[e]}function i(e){return c[e]}function o(e){return null==e?"":String(e).replace(u,n)}function a(e){return null==e?"":String(e).replace(l,i)}var s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},c={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},l=/(&amp;|&lt;|&gt;|&quot;|&#39;)/g,u=/[&<>"']/g;o.options=a.options={},t.exports={encode:o,escape:o,decode:a,unescape:a,version:"1.0.0-browser"}},{}],42:[function(e,t,r){"use strict";function n(e){return e.reduce(i,{})}function i(e,t){return e[t]=!0,e}t.exports=n},{}],43:[function(e,t,r){function n(e,t){if("function"!=typeof e)throw new TypeError(i);return t=o(void 0===t?e.length-1:+t||0,0),function(){for(var r=arguments,n=-1,i=o(r.length-t,0),a=Array(i);++n<i;)a[n]=r[t+n];switch(t){case 0:return e.call(this,a);case 1:return e.call(this,r[0],a);case 2:return e.call(this,r[0],r[1],a)}var s=Array(t+1);for(n=-1;++n<t;)s[n]=r[n];return s[t]=a,e.apply(this,s)}}var i="Expected a function",o=Math.max;t.exports=n},{}],44:[function(e,t,r){(function(r){function n(e){var t=e?e.length:0;for(this.data={hash:s(null),set:new a};t--;)this.push(e[t])}var i=e("./cachePush"),o=e("./getNative"),a=o(r,"Set"),s=o(Object,"create");n.prototype.push=i,t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./cachePush":65,"./getNative":70}],45:[function(e,t,r){function n(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}t.exports=n},{}],46:[function(e,t,r){function n(e,t){for(var r=-1,n=e.length;++r<n&&t(e[r],r,e)!==!1;);return e}t.exports=n},{}],47:[function(e,t,r){function n(e,t){for(var r=-1,n=e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}t.exports=n},{}],48:[function(e,t,r){function n(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}t.exports=n},{}],49:[function(e,t,r){function n(e,t,r){for(var n=-1,o=i(t),a=o.length;++n<a;){var s=o[n],c=e[s],l=r(c,t[s],s,e,t);(l===l?l===c:c!==c)&&(void 0!==c||s in e)||(e[s]=l)}return e}var i=e("../object/keys");t.exports=n},{"../object/keys":94}],50:[function(e,t,r){function n(e,t){return null==t?e:i(t,o(t),e)}var i=e("./baseCopy"),o=e("../object/keys");t.exports=n},{"../object/keys":94,"./baseCopy":52}],51:[function(e,t,r){function n(e,t,r,d,g,m,v){var b;if(r&&(b=g?r(e,d,g):r(e)),void 0!==b)return b;if(!f(e))return e;var w=p(e);if(w){if(b=c(e),!t)return i(e,b)}else{var _=D.call(e),E=_==y;if(_!=x&&_!=h&&(!E||g))return F[_]?l(e,_,t):g?e:{};if(b=u(E?{}:e),!t)return a(b,e)}m||(m=[]),v||(v=[]);for(var k=m.length;k--;)if(m[k]==e)return v[k];return m.push(e),v.push(b),(w?o:s)(e,function(i,o){b[o]=n(i,t,r,o,e,m,v)}),b}var i=e("./arrayCopy"),o=e("./arrayEach"),a=e("./baseAssign"),s=e("./baseForOwn"),c=e("./initCloneArray"),l=e("./initCloneByTag"),u=e("./initCloneObject"),p=e("../lang/isArray"),f=e("../lang/isObject"),h="[object Arguments]",d="[object Array]",g="[object Boolean]",m="[object Date]",v="[object Error]",y="[object Function]",b="[object Map]",w="[object Number]",x="[object Object]",_="[object RegExp]",E="[object Set]",k="[object String]",P="[object WeakMap]",S="[object ArrayBuffer]",O="[object Float32Array]",A="[object Float64Array]",C="[object Int8Array]",j="[object Int16Array]",I="[object Int32Array]",R="[object Uint8Array]",N="[object Uint8ClampedArray]",L="[object Uint16Array]",T="[object Uint32Array]",F={};F[h]=F[d]=F[S]=F[g]=F[m]=F[O]=F[A]=F[C]=F[j]=F[I]=F[w]=F[x]=F[_]=F[k]=F[R]=F[N]=F[L]=F[T]=!0,F[v]=F[y]=F[b]=F[E]=F[P]=!1;var M=Object.prototype,D=M.toString;t.exports=n},{"../lang/isArray":86,"../lang/isObject":89,"./arrayCopy":45,"./arrayEach":46,"./baseAssign":50,"./baseForOwn":57,"./initCloneArray":72,"./initCloneByTag":73,"./initCloneObject":74}],52:[function(e,t,r){function n(e,t,r){r||(r={});for(var n=-1,i=t.length;++n<i;){var o=t[n];r[o]=e[o]}return r}t.exports=n},{}],53:[function(e,t,r){function n(e,t){var r=e?e.length:0,n=[];if(!r)return n;var c=-1,l=i,u=!0,p=u&&t.length>=s?a(t):null,f=t.length;p&&(l=o,u=!1,t=p);e:for(;++c<r;){var h=e[c];if(u&&h===h){for(var d=f;d--;)if(t[d]===h)continue e;n.push(h)}else l(t,h,0)<0&&n.push(h)}return n}var i=e("./baseIndexOf"),o=e("./cacheIndexOf"),a=e("./createCache"),s=200;t.exports=n},{"./baseIndexOf":58,"./cacheIndexOf":64,"./createCache":68}],54:[function(e,t,r){function n(e,t,r,l){l||(l=[]);for(var u=-1,p=e.length;++u<p;){var f=e[u];c(f)&&s(f)&&(r||a(f)||o(f))?t?n(f,t,r,l):i(l,f):r||(l[l.length]=f)}return l}var i=e("./arrayPush"),o=e("../lang/isArguments"),a=e("../lang/isArray"),s=e("./isArrayLike"),c=e("./isObjectLike");t.exports=n},{"../lang/isArguments":85,"../lang/isArray":86,"./arrayPush":48,"./isArrayLike":75,"./isObjectLike":79}],55:[function(e,t,r){var n=e("./createBaseFor"),i=n();t.exports=i},{"./createBaseFor":67}],56:[function(e,t,r){function n(e,t){return i(e,t,o)}var i=e("./baseFor"),o=e("../object/keysIn");t.exports=n},{"../object/keysIn":95,"./baseFor":55}],57:[function(e,t,r){function n(e,t){return i(e,t,o)}var i=e("./baseFor"),o=e("../object/keys");t.exports=n},{"../object/keys":94,"./baseFor":55}],58:[function(e,t,r){function n(e,t,r){if(t!==t)return i(e,r);for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}var i=e("./indexOfNaN");t.exports=n},{"./indexOfNaN":71}],59:[function(e,t,r){function n(e,t,r,f,h){if(!c(e))return e;var d=s(t)&&(a(t)||u(t)),g=d?void 0:p(t);return i(g||t,function(i,a){if(g&&(a=i,i=t[a]),l(i))f||(f=[]),h||(h=[]),o(e,t,a,n,r,f,h);else{var s=e[a],c=r?r(s,i,a,e,t):void 0,u=void 0===c;u&&(c=i),void 0===c&&(!d||a in e)||!u&&(c===c?c===s:s!==s)||(e[a]=c)}}),e}var i=e("./arrayEach"),o=e("./baseMergeDeep"),a=e("../lang/isArray"),s=e("./isArrayLike"),c=e("../lang/isObject"),l=e("./isObjectLike"),u=e("../lang/isTypedArray"),p=e("../object/keys");
t.exports=n},{"../lang/isArray":86,"../lang/isObject":89,"../lang/isTypedArray":91,"../object/keys":94,"./arrayEach":46,"./baseMergeDeep":60,"./isArrayLike":75,"./isObjectLike":79}],60:[function(e,t,r){function n(e,t,r,n,p,f,h){for(var d=f.length,g=t[r];d--;)if(f[d]==g)return void(e[r]=h[d]);var m=e[r],v=p?p(m,g,r,e,t):void 0,y=void 0===v;y&&(v=g,s(g)&&(a(g)||l(g))?v=a(m)?m:s(m)?i(m):[]:c(g)||o(g)?v=o(m)?u(m):c(m)?m:{}:y=!1),f.push(g),h.push(v),y?e[r]=n(v,g,p,f,h):(v===v?v!==m:m===m)&&(e[r]=v)}var i=e("./arrayCopy"),o=e("../lang/isArguments"),a=e("../lang/isArray"),s=e("./isArrayLike"),c=e("../lang/isPlainObject"),l=e("../lang/isTypedArray"),u=e("../lang/toPlainObject");t.exports=n},{"../lang/isArguments":85,"../lang/isArray":86,"../lang/isPlainObject":90,"../lang/isTypedArray":91,"../lang/toPlainObject":92,"./arrayCopy":45,"./isArrayLike":75}],61:[function(e,t,r){function n(e){return function(t){return null==t?void 0:t[e]}}t.exports=n},{}],62:[function(e,t,r){function n(e,t,r){if("function"!=typeof e)return i;if(void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 3:return function(r,n,i){return e.call(t,r,n,i)};case 4:return function(r,n,i,o){return e.call(t,r,n,i,o)};case 5:return function(r,n,i,o,a){return e.call(t,r,n,i,o,a)}}return function(){return e.apply(t,arguments)}}var i=e("../utility/identity");t.exports=n},{"../utility/identity":98}],63:[function(e,t,r){(function(e){function r(e){var t=new n(e.byteLength),r=new i(t);return r.set(new i(e)),t}var n=e.ArrayBuffer,i=e.Uint8Array;t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],64:[function(e,t,r){function n(e,t){var r=e.data,n="string"==typeof t||i(t)?r.set.has(t):r.hash[t];return n?0:-1}var i=e("../lang/isObject");t.exports=n},{"../lang/isObject":89}],65:[function(e,t,r){function n(e){var t=this.data;"string"==typeof e||i(e)?t.set.add(e):t.hash[e]=!0}var i=e("../lang/isObject");t.exports=n},{"../lang/isObject":89}],66:[function(e,t,r){function n(e){return a(function(t,r){var n=-1,a=null==t?0:r.length,s=a>2?r[a-2]:void 0,c=a>2?r[2]:void 0,l=a>1?r[a-1]:void 0;for("function"==typeof s?(s=i(s,l,5),a-=2):(s="function"==typeof l?l:void 0,a-=s?1:0),c&&o(r[0],r[1],c)&&(s=3>a?void 0:s,a=1);++n<a;){var u=r[n];u&&e(t,u,s)}return t})}var i=e("./bindCallback"),o=e("./isIterateeCall"),a=e("../function/restParam");t.exports=n},{"../function/restParam":43,"./bindCallback":62,"./isIterateeCall":77}],67:[function(e,t,r){function n(e){return function(t,r,n){for(var o=i(t),a=n(t),s=a.length,c=e?s:-1;e?c--:++c<s;){var l=a[c];if(r(o[l],l,o)===!1)break}return t}}var i=e("./toObject");t.exports=n},{"./toObject":83}],68:[function(e,t,r){(function(r){function n(e){return s&&a?new i(e):null}var i=e("./SetCache"),o=e("./getNative"),a=o(r,"Set"),s=o(Object,"create");t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./SetCache":44,"./getNative":70}],69:[function(e,t,r){var n=e("./baseProperty"),i=n("length");t.exports=i},{"./baseProperty":61}],70:[function(e,t,r){function n(e,t){var r=null==e?void 0:e[t];return i(r)?r:void 0}var i=e("../lang/isNative");t.exports=n},{"../lang/isNative":88}],71:[function(e,t,r){function n(e,t,r){for(var n=e.length,i=t+(r?0:-1);r?i--:++i<n;){var o=e[i];if(o!==o)return i}return-1}t.exports=n},{}],72:[function(e,t,r){function n(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&o.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var i=Object.prototype,o=i.hasOwnProperty;t.exports=n},{}],73:[function(e,t,r){function n(e,t,r){var n=e.constructor;switch(t){case u:return i(e);case o:case a:return new n(+e);case p:case f:case h:case d:case g:case m:case v:case y:case b:var x=e.buffer;return new n(r?i(x):x,e.byteOffset,e.length);case s:case l:return new n(e);case c:var _=new n(e.source,w.exec(e));_.lastIndex=e.lastIndex}return _}var i=e("./bufferClone"),o="[object Boolean]",a="[object Date]",s="[object Number]",c="[object RegExp]",l="[object String]",u="[object ArrayBuffer]",p="[object Float32Array]",f="[object Float64Array]",h="[object Int8Array]",d="[object Int16Array]",g="[object Int32Array]",m="[object Uint8Array]",v="[object Uint8ClampedArray]",y="[object Uint16Array]",b="[object Uint32Array]",w=/\w*$/;t.exports=n},{"./bufferClone":63}],74:[function(e,t,r){function n(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Object),new t}t.exports=n},{}],75:[function(e,t,r){function n(e){return null!=e&&o(i(e))}var i=e("./getLength"),o=e("./isLength");t.exports=n},{"./getLength":69,"./isLength":78}],76:[function(e,t,r){function n(e,t){return e="number"==typeof e||i.test(e)?+e:-1,t=null==t?o:t,e>-1&&e%1==0&&t>e}var i=/^\d+$/,o=9007199254740991;t.exports=n},{}],77:[function(e,t,r){function n(e,t,r){if(!a(r))return!1;var n=typeof t;if("number"==n?i(r)&&o(t,r.length):"string"==n&&t in r){var s=r[t];return e===e?e===s:s!==s}return!1}var i=e("./isArrayLike"),o=e("./isIndex"),a=e("../lang/isObject");t.exports=n},{"../lang/isObject":89,"./isArrayLike":75,"./isIndex":76}],78:[function(e,t,r){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&i>=e}var i=9007199254740991;t.exports=n},{}],79:[function(e,t,r){function n(e){return!!e&&"object"==typeof e}t.exports=n},{}],80:[function(e,t,r){function n(e,t){e=i(e);for(var r=-1,n=t.length,o={};++r<n;){var a=t[r];a in e&&(o[a]=e[a])}return o}var i=e("./toObject");t.exports=n},{"./toObject":83}],81:[function(e,t,r){function n(e,t){var r={};return i(e,function(e,n,i){t(e,n,i)&&(r[n]=e)}),r}var i=e("./baseForIn");t.exports=n},{"./baseForIn":56}],82:[function(e,t,r){function n(e){for(var t=c(e),r=t.length,n=r&&e.length,l=!!n&&s(n)&&(o(e)||i(e)),p=-1,f=[];++p<r;){var h=t[p];(l&&a(h,n)||u.call(e,h))&&f.push(h)}return f}var i=e("../lang/isArguments"),o=e("../lang/isArray"),a=e("./isIndex"),s=e("./isLength"),c=e("../object/keysIn"),l=Object.prototype,u=l.hasOwnProperty;t.exports=n},{"../lang/isArguments":85,"../lang/isArray":86,"../object/keysIn":95,"./isIndex":76,"./isLength":78}],83:[function(e,t,r){function n(e){return i(e)?e:Object(e)}var i=e("../lang/isObject");t.exports=n},{"../lang/isObject":89}],84:[function(e,t,r){function n(e,t,r){return"function"==typeof t?i(e,!0,o(t,r,1)):i(e,!0)}var i=e("../internal/baseClone"),o=e("../internal/bindCallback");t.exports=n},{"../internal/baseClone":51,"../internal/bindCallback":62}],85:[function(e,t,r){function n(e){return o(e)&&i(e)&&s.call(e,"callee")&&!c.call(e,"callee")}var i=e("../internal/isArrayLike"),o=e("../internal/isObjectLike"),a=Object.prototype,s=a.hasOwnProperty,c=a.propertyIsEnumerable;t.exports=n},{"../internal/isArrayLike":75,"../internal/isObjectLike":79}],86:[function(e,t,r){var n=e("../internal/getNative"),i=e("../internal/isLength"),o=e("../internal/isObjectLike"),a="[object Array]",s=Object.prototype,c=s.toString,l=n(Array,"isArray"),u=l||function(e){return o(e)&&i(e.length)&&c.call(e)==a};t.exports=u},{"../internal/getNative":70,"../internal/isLength":78,"../internal/isObjectLike":79}],87:[function(e,t,r){function n(e){return i(e)&&s.call(e)==o}var i=e("./isObject"),o="[object Function]",a=Object.prototype,s=a.toString;t.exports=n},{"./isObject":89}],88:[function(e,t,r){function n(e){return null==e?!1:i(e)?u.test(c.call(e)):o(e)&&a.test(e)}var i=e("./isFunction"),o=e("../internal/isObjectLike"),a=/^\[object .+?Constructor\]$/,s=Object.prototype,c=Function.prototype.toString,l=s.hasOwnProperty,u=RegExp("^"+c.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=n},{"../internal/isObjectLike":79,"./isFunction":87}],89:[function(e,t,r){function n(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}t.exports=n},{}],90:[function(e,t,r){function n(e){var t;if(!a(e)||u.call(e)!=s||o(e)||!l.call(e,"constructor")&&(t=e.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var r;return i(e,function(e,t){r=t}),void 0===r||l.call(e,r)}var i=e("../internal/baseForIn"),o=e("./isArguments"),a=e("../internal/isObjectLike"),s="[object Object]",c=Object.prototype,l=c.hasOwnProperty,u=c.toString;t.exports=n},{"../internal/baseForIn":56,"../internal/isObjectLike":79,"./isArguments":85}],91:[function(e,t,r){function n(e){return o(e)&&i(e.length)&&!!C[I.call(e)]}var i=e("../internal/isLength"),o=e("../internal/isObjectLike"),a="[object Arguments]",s="[object Array]",c="[object Boolean]",l="[object Date]",u="[object Error]",p="[object Function]",f="[object Map]",h="[object Number]",d="[object Object]",g="[object RegExp]",m="[object Set]",v="[object String]",y="[object WeakMap]",b="[object ArrayBuffer]",w="[object Float32Array]",x="[object Float64Array]",_="[object Int8Array]",E="[object Int16Array]",k="[object Int32Array]",P="[object Uint8Array]",S="[object Uint8ClampedArray]",O="[object Uint16Array]",A="[object Uint32Array]",C={};C[w]=C[x]=C[_]=C[E]=C[k]=C[P]=C[S]=C[O]=C[A]=!0,C[a]=C[s]=C[b]=C[c]=C[l]=C[u]=C[p]=C[f]=C[h]=C[d]=C[g]=C[m]=C[v]=C[y]=!1;var j=Object.prototype,I=j.toString;t.exports=n},{"../internal/isLength":78,"../internal/isObjectLike":79}],92:[function(e,t,r){function n(e){return i(e,o(e))}var i=e("../internal/baseCopy"),o=e("../object/keysIn");t.exports=n},{"../internal/baseCopy":52,"../object/keysIn":95}],93:[function(e,t,r){var n=e("../internal/assignWith"),i=e("../internal/baseAssign"),o=e("../internal/createAssigner"),a=o(function(e,t,r){return r?n(e,t,r):i(e,t)});t.exports=a},{"../internal/assignWith":49,"../internal/baseAssign":50,"../internal/createAssigner":66}],94:[function(e,t,r){var n=e("../internal/getNative"),i=e("../internal/isArrayLike"),o=e("../lang/isObject"),a=e("../internal/shimKeys"),s=n(Object,"keys"),c=s?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&i(e)?a(e):o(e)?s(e):[]}:a;t.exports=c},{"../internal/getNative":70,"../internal/isArrayLike":75,"../internal/shimKeys":82,"../lang/isObject":89}],95:[function(e,t,r){function n(e){if(null==e)return[];c(e)||(e=Object(e));var t=e.length;t=t&&s(t)&&(o(e)||i(e))&&t||0;for(var r=e.constructor,n=-1,l="function"==typeof r&&r.prototype===e,p=Array(t),f=t>0;++n<t;)p[n]=n+"";for(var h in e)f&&a(h,t)||"constructor"==h&&(l||!u.call(e,h))||p.push(h);return p}var i=e("../lang/isArguments"),o=e("../lang/isArray"),a=e("../internal/isIndex"),s=e("../internal/isLength"),c=e("../lang/isObject"),l=Object.prototype,u=l.hasOwnProperty;t.exports=n},{"../internal/isIndex":76,"../internal/isLength":78,"../lang/isArguments":85,"../lang/isArray":86,"../lang/isObject":89}],96:[function(e,t,r){var n=e("../internal/baseMerge"),i=e("../internal/createAssigner"),o=i(n);t.exports=o},{"../internal/baseMerge":59,"../internal/createAssigner":66}],97:[function(e,t,r){var n=e("../internal/arrayMap"),i=e("../internal/baseDifference"),o=e("../internal/baseFlatten"),a=e("../internal/bindCallback"),s=e("./keysIn"),c=e("../internal/pickByArray"),l=e("../internal/pickByCallback"),u=e("../function/restParam"),p=u(function(e,t){if(null==e)return{};if("function"!=typeof t[0]){var t=n(o(t),String);return c(e,i(s(e),t))}var r=a(t[0],t[1],3);return l(e,function(e,t,n){return!r(e,t,n)})});t.exports=p},{"../function/restParam":43,"../internal/arrayMap":47,"../internal/baseDifference":53,"../internal/baseFlatten":54,"../internal/bindCallback":62,"../internal/pickByArray":80,"../internal/pickByCallback":81,"./keysIn":95}],98:[function(e,t,r){function n(e){return e}t.exports=n},{}],99:[function(e,t,r){(function(e){function r(e,t){"use strict";var r={isRejected:function(){return!e},isFulfilled:function(){return e}};return r.isResolved=r.isFulfilled,e?Object.defineProperty(r,"value",{enumerable:!0,value:t}):Object.defineProperty(r,"reason",{enumerable:!0,value:t}),r}function n(e){"use strict";return e.prototype.spread=function(t){return this.then(function(t){return e.all(t)}).then(function(e){return t.apply(null,e)})},e.prototype.delay=function(t){return this.then(function(r){return new e(function(e){setTimeout(function(){e(r)},t)})})},e.delay=function(e,t){return void 0===t&&(t=e,e=void 0),this.resolve(e).delay(t)},e.prototype["finally"]=function(t){var r=function(){},n=new e(function(e){var r;try{r=t()}finally{e(r)}}).then(r,r);return this.then(function(e){return n.then(function(){return e})},function(e){return n.then(function(){throw e})})},e.prototype.reflect=function(){return this.then(function(e){return r(!0,e)},function(e){return r(!1,e)})},e.settleAll=function(t){var r=Array.isArray(t)?t:[t];return this.all(r.map(function(t){return e.resolve(t).reflect()}))},e.prototype.done=function(){this["catch"](function(e){s(function(){throw e})})},e}function i(e,t){"use strict";t.forEach(function(t){e.prototype[t]=function(){var r=this.__instance,n=r[t].apply(r,c(arguments));return e.resolve(n)}})}function o(e,t,r){"use strict";r.forEach(function(r){e[r]=function(){var n=t[r].apply(t,c(arguments));return e.resolve(n)}})}function a(e){"use strict";var t=function(t){var r=new e(t);Object.defineProperty(this,"__instance",{value:r})};return t.resolve=function(e){var t=this;return e&&e.__instance&&"object"==typeof e.__instance?e:new t(function(t){t(e)})},o(t,e,["all","reject","race"]),i(t,["then","catch"]),n(t)}var s=function(){"use strict";return s?s:"[object process]"==={}.toString.call(e.process)?e.process.nextTick.bind(e.process):function(e){setTimeout(e,0)}}(),c=function(){"use strict";var e=Array.prototype.slice;return function(t){return t?e.call(t):[]}}();t.exports=function(t){"use strict";var r=t||e.Promise;if(!r)throw new Error("No Promise implementation found.");if("function"!=typeof r)throw new TypeError("Not supported. The argument provided is not a constructor.");return a(r)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],100:[function(e,t,r){"use strict";var n=e("../util/util"),i=e("../util/logger-factory"),o=e("browser-bunyan"),a=e("./default-widget-model"),s=function(){this.log=i.getLogger()};s.prototype.combine=function(e){var t=this.log,r=n.cloneDeep(a);return e.forEach(function(e){n.merge(r,n.omit(e,["preferences","viewmodes"])),e.viewmodes&&(r.viewmodes=e.viewmodes),e.preferences&&(r.preferences=e.preferences)}),t.debug("Aggregated model created."),t.level()<=o.TRACE&&t.trace("Aggregated model is this:\n %s",JSON.stringify(r,null,"	")),r},t.exports=s},{"../util/logger-factory":153,"../util/util":155,"./default-widget-model":103,"browser-bunyan":2}],101:[function(e,t,r){"use strict";var n=function(e){};n.prototype.parse=function(e){throw new Error("ConfigParser#parse must be overridden.")},t.exports=n},{}],102:[function(e,t,r){"use strict";var n=function(e){};n.prototype.read=function(e){throw new Error("ConfigReader#read must be overridden.")},t.exports=n},{}],103:[function(e,t,r){"use strict";var n={id:null,version:null,height:null,width:null,viewmodes:[],name:null,shortName:null,description:null,author:null,authorHref:null,authorEmail:null,preferences:{},license:null,licenseHref:null,icons:[],content:{src:"index.html",type:"text/html",encoding:"UTF-8"},features:[]};t.exports=n},{}],104:[function(e,t,r){"use strict";var n=e("promise-extensions")(Promise),i=e("../util/util"),o=e("../util/logger-factory"),a=e("./widget-renderer"),s=e("./config-reader"),c=e("./config-parser"),l=e("./widget-storage"),u=e("./widget-instance-factory"),p=e("./widget-feature-augmenter"),f=e("./config-aggregator"),h=e("../util/verror"),d=e("../events/destroy-event"),g="model.xml",m={POST_READ:"postRead",PRE_RENDER:"preRender",POST_RENDER:"postRender"},v={html:"text/html",hbs:"text/x-handlebars-template",handlebars:"text/x-handlebars-template","hbs.js":"application/x-handlebars-template"},y=function(e){this.config=e,this.plugins=[],this.features=[],this.widgetInstanceFactory=new u,this.widgetFeatureAugmenter=new p,this._widgetInstance=null,this.log=o.getLogger();var t=b(this.config);if(t.warnings.length&&this.log.debug(t.warnings.join("\n")),t.errors.length){var r="Problems with widget config:\n	"+t.errors.join("	\n");throw new h(r)}};y.prototype.start=function(){var e=(new Date).getTime(),t=this.log,r=this.config,o=this.plugins,s=this.features,c=r.initialModel||{},l=r.widgetPath,u=r.configFile||g;""===l&&(l=".");var p=this.widgetInstanceFactory,d=this.widgetFeatureAugmenter;t.info("Starting widget @ %s...",l),t.info("Entering READ phase.");var y=Promise.resolve({});return r.reader&&(y=y.then(function(){var e=(i.endsWith(l,"/")?l:l+"/")+u;return r.reader.read(e)})),r.parser&&(y=y.then(function(e){return r.parser.parse(e)})),n.all([c,y]).then(function(e){t.debug("Aggregating models...");var r=new f({log:t});return r.combine(e)}).then(function(e){return t.info("Invoking plugins for POST READ phase..."),w(o,t,m.POST_READ,[e])}).spread(function(e){e.content.type&&e.content.type!==v.html||(e.content.type=x(e),t.debug("The start file type was inferred as [%s]",e.content.type)),e.content.src=a.getResolvedStartFilePath(l,e),t.info("Widget config read for: %s (%s).",e.id,e.name),t.info("Entering INSTANCE CREATION phase...");var n=r.renderer,o=r.storage;e.id=e.id||i.randomId(),o.init(e.name,e.preferences,e.type),t.debug("Widget storage initialized.");var c=p.makeWidget(e,o,n,l);return t.debug("Widget instance created."),d.addFeaturesToWidget(c,s,e),t.debug("%s feature(s) added to widget.",s.length),[c,n,e]}).spread(function(e,r,n){t.info("Invoking plugins for PRE RENDER phase...");var i=w(o,t,m.PRE_RENDER,[e,r,n]);return i}).spread(function(e,r,n){t.info("Entering RENDERING phase...");var i=r.render(n,e);return[e,r,n,i]}).spread(function(e,r,n){t.info("Invoking plugins for POST RENDER phase...");var i=w(o,t,m.POST_RENDER,[e,r,n]);return i}).spread(function(r,n,i){this._widgetInstance=r;var o={},a=(new Date).getTime();return o.time=a-e,o.id=i.id,o.message="Widget rendering for ["+i.name+"] completed in "+o.time+"ms.",o.areaNodes="function"==typeof n.getAreaNodes?n.getAreaNodes():null,t.info(o.message),o}.bind(this))["catch"](function(e){throw t.error(e),new h(e,"An error occurred whilst starting the widget")})},y.prototype.addFeature=function(e){return this.log.info("Adding feature for widget, %s",e.name||"[Anonymous feature]"),"object"==typeof e&&this.features.push(e),this},y.prototype.addPlugin=function(e){return this.log.info("Adding plugin for widget, %s",e.name||"[Anonymous plugin]"),"object"==typeof e&&this.plugins.push(e),this},y.prototype.destroy=function(){var e=this._widgetInstance;if(e&&e.dispatchEvent){var t=new d;this._widgetInstance.dispatchEvent(t),this._widgetInstance=null}this.plugins.forEach(function(e){"function"==typeof e.destroy&&e.destroy()}),this.config.renderer.destroy()};var b=function(e){var t={warnings:[],errors:[]};return"string"!=typeof e.widgetPath?t.errors.push("You must supply a valid widget path"):e.widgetPath.indexOf(g)>=0&&t.errors.push("Please supply the base path of your widget, not its configuration file path"),e.initialModel||e.reader||t.warnings.push("No initial model or widget reader was provided. Can't get any config"),e.reader&&!e.parser&&t.warnings.push("A widget reader was provided, but not a widget config parser"),!e.reader||e.reader instanceof s||t.warnings.push("The configured widget reader might not be a valid ConfigReader instance"),!e.parser||e.parser instanceof c||t.warnings.push("The configured widget parser might not be a valid ConfigParser instance"),e.storage?e.storage instanceof l||t.warnings.push("The configured widget storage might not be a valid WidgetStorage instance"):t.errors.push("No widget storage is configured"),e.renderer?e.renderer instanceof a||t.warnings.push("The configured widget renderer might not be a valid WidgetRenderer instance"):t.errors.push("No widget renderer is configured"),t},w=function(e,t,r,i){var o=n.all(i);return e.filter(function(e){return"function"==typeof e[r]}).forEach(function(e){var n,i=e.name||"Anonymous plugin";o=o.then(function(t){n=t;var i=e[r].apply(e,t);return[i,t]}).spread(function(e,t){return void 0===e?t:[e].concat(t.slice(1))})["catch"](function(e){var o="Failed to invoke plugin ["+i+"] for ["+r+"]";return t.error(e,o),n})}),o},x=function(e){var t=e.content.src.match(/\.([A-z0-9]+)$/);return t&&t[1]&&v[t[1]]||e.content.type};t.exports=y},{"../events/destroy-event":115,"../util/logger-factory":153,"../util/util":155,"../util/verror":156,"./config-aggregator":100,"./config-parser":101,"./config-reader":102,"./widget-feature-augmenter":105,"./widget-instance-factory":106,"./widget-renderer":107,"./widget-storage":108,"promise-extensions":99}],105:[function(e,t,r){"use strict";var n=function(){};n.prototype.addFeaturesToWidget=function(e,t,r){function n(e,t){return t.filter(function(t){return t.name===e})[0]||null}function i(e,t){return t.features.filter(function(t){return t.name===e})[0]||null}t=t||[],r.features=r.features||[],t.forEach(function(e){e.name&&!i(e.name,r)&&r.features.push({name:e.name,params:[],required:!1})});for(var o={},a=0;a<r.features.length;a++){var s=r.features[a],c=n(s.name,t);if(c)"function"==typeof c._init&&c._init(s.params,e,r),Object.defineProperty(o,c.name,{enumerable:!0,value:c});else if(s.required){var l="Unable to render widget. A required feature is not available ("+s.name+")";throw new Error(l)}}return Object.defineProperty(e,"features",{enumerable:!1,value:o}),e},t.exports=n},{}],106:[function(e,t,r){"use strict";var n=e("../util/util"),i=["author","version","id","authorEmail","authorHref","locale"],o=["description","name","shortName"],a=function(){};a.prototype.makeWidget=function(e,t,r,a){var s={},c=e.locale||null;return Object.defineProperty(s,"baseURI",{enumerable:!0,value:a}),i.forEach(function(t){Object.defineProperty(s,t,{enumerable:!0,value:"undefined"!=typeof e[t]?e[t]:""})}),o.forEach(function(t){var r=null;if(c&&e._lang){var i=n.getDescendantLocales(c),o=i.map(function(t){return e._lang[t]}),a=function(e){var r;if(e.length){var n=e.pop();if(n&&(r=n[t]),"string"!=typeof r)return a(e)}return r};r=a(o)}if("string"!=typeof r&&"string"==typeof e[t])r=e[t];else if("string"!=typeof r&&e.defaultlocale){var l=e._lang[e.defaultlocale];l&&(r=l[t])}Object.defineProperty(s,t,{enumerable:!0,value:"string"==typeof r?r:""})}),Object.defineProperty(s,"width",{enumerable:!0,get:function(){return r.getWidth()}}),Object.defineProperty(s,"height",{enumerable:!0,get:function(){return r.getHeight()}}),Object.defineProperty(s,"preferences",{enumerable:!1,value:t}),s},t.exports=a},{"../util/util":155}],107:[function(e,t,r){"use strict";function n(e,t){var r=i.isUrlAbsolute(t)||i.isUrlSiteRelative(e)&&i.isUrlSiteRelative(t)||e&&i.startsWith(t,e);if(r)return t;var n=!i.endsWith(e,"/")&&!i.startsWith(t,"/");return n?e+"/"+t:e+t}var i=e("../util/util"),o=function(e){};o.prototype.render=function(e,t){throw new Error("WidgetRenderer#render must be overridden.")},o.prototype.process=function(e,t,r){throw new Error("WidgetRenderer#process must be overridden.")},o.prototype.getWidth=function(){throw new Error("WidgetRenderer#getWidth must be overridden.")},o.prototype.getHeight=function(){throw new Error("WidgetRenderer#getHeight must be overridden.")},o.prototype.getWidgetNode=function(){throw new Error("WidgetRenderer#getWidgetNode must be overridden.")},o.prototype.getParentNode=function(){throw new Error("WidgetRenderer#getContainerNode must be overridden.")},o.prototype.setParentNode=function(){throw new Error("WidgetRenderer#setContainerNode must be overridden.")},o.prototype.getAreaNodes=function(){if(this.isContainer)throw new Error("WidgetRenderer#getAreaNodes must be overridden.")},o.prototype.destroy=function(){throw new Error("WidgetRenderer#destroy must be overriden.")},o.prototype.isRendered=function(){throw new Error("WidgetRenderer#isRendered must be overridden.")},o.prototype.getType=function(){return"text/html"},o.getResolvedStartFilePath=function(e,t){var r=t.content&&t.content.src?t.content.src:"index.html";return n(e,r)},t.exports=o},{"../util/util":155}],108:[function(e,t,r){"use strict";function n(e){}n.prototype.init=function(e,t){throw new Error("WidgetStorage#init must be overridden.")},n.prototype.getItem=function(e){throw new Error("WidgetStorage#getItem must be overridden.")},n.prototype.setItem=function(e,t,r){throw new Error("WidgetStorage#setItem must be overridden.")},n.prototype.removeItem=function(e){throw new Error("WidgetStorage#removeItem must be overridden.")},n.prototype.clear=function(e){throw new Error("WidgetStorage#removeItem must be overridden.")},n.prototype.key=function(e){throw new Error("WidgetStorage#key must be overridden.")},t.exports=n},{}],109:[function(e,t,r){"use strict";function n(){this._resolvers=[]}t.exports=n,n.prototype.addResolver=function(e){if("function"!=typeof e)throw new TypeError("resolverFunc argument must be a function");this._resolvers.push(e)},n.prototype.getResolver=function(e){var t=this._resolvers.map(function(t){return t(e)}).filter(function(e){return!!e}),r=t.length;if(0===r)throw new Error("No datasource resolver found which can handle ["+e.uri+"] URI");return t[r-1]}},{}],110:[function(e,t,r){(function(e){"use strict";function r(e,t){return t?t.replace(l,function(t,r){var i=n(e,r);return void 0===i||null===i?"":i}):""}function n(e,t){for(var r="string"==typeof t?t.split("."):t,n=0,i=e,o=r.length;null!=i&&o>n;)i=i[r[n++]];return n&&n===o?i:void 0}function i(t){var r=t;try{r=e.decodeURIComponent(t)}catch(n){}return e.encodeURIComponent(r)}function o(e){return e.trim().replace(u,"")}function a(e,t){var n=t||{},i=n.value;return{name:r(e,n.name),value:"string"==typeof i?r(e,i):i}}function s(e){return(e||[]).map(function(e){return i(e.name)+"="+i(e.value)}).join("&")}function c(e,t){var r=(t||[]).map(function(t){return a(e,t)}).filter(function(e){return!!e.name});return s(r)}var l=/\$\{([^}\s]+)}/g,u=/^\/+|\/+$/g;t.exports={resolveExpression:r,resolveParameter:a,buildQueryString:s,resolveQueryString:c,encodeURIComponent:i,trimSlashes:o}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],111:[function(e,t,r){"use strict";function n(e,t){var r=t&&t.uri;return r&&r.slice(0,e.length).toLowerCase()===e}function i(e){this._resolverImpl=e;var t=o.getLogger();this._log=t.child({childName:"datasource-resolver"})}var o=e("../util/logger-factory"),a=e("../fetch/filtering-fetch"),s=e("../util/response-helpers");t.exports=i,i.prototype.loadData=function(e){var t=this._resolverImpl,r=t.resolveUrl(e);return a(r,{headers:{"Cache-control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}}).then(function(e){return s.isResponseOk(e)?Promise.resolve(e):Promise.reject(s.createError(e))}).then(function(r){return t.processResponse(r,e)})},i.createFactoryFunction=function(e,t){var r=this._log,o="function"==typeof e?e:n.bind(null,e);return function(e){if(o(e)){var n=new t(e,r);return new i(n)}}}},{"../fetch/filtering-fetch":119,"../util/logger-factory":153,"../util/response-helpers":154}],112:[function(e,t,r){"use strict";function n(e,t,r,n){var i=s.normalizeListener(r);if(!i)throw new TypeError('Unrecognized "listener" argument. It must be a function or an object with handleEvent method.');var o,a=s.normalizeOptions(n);Object.prototype.hasOwnProperty.call(e,t)?o=e[t]:(o=[],Object.defineProperty(e,t,{writable:!0,configurable:!0,value:o}));var c=o.some(function(e){return e.func===i&&e.opts.capture===a.capture});c||o.push({func:i,opts:a})}function i(e,t,r,n){var i=s.normalizeListener(r);if(!i)throw new TypeError('Unrecognized "listener" argument. It must be a function or an object with handleEvent method.');var o=s.normalizeOptions(n);if(Object.prototype.hasOwnProperty.call(e,t)){var a=e[t]=e[t].filter(function(e){return e.func!==i||e.opts.capture!==o.capture});0===a.length&&delete e[t]}}function o(e,t,r){if(!Object.prototype.hasOwnProperty.call(e,t))return!0;var n=e[t],i=c(r,e),o=n.filter(function(e){return!e.opts.capture}).reduce(function(t,r){return i[l]?t:(i[u]=r.opts.passive,r.func.call(e,i),r.opts.once&&(r.remove=!0),!i.defaultPrevented)},!0);return n=e[t]=n.filter(function(e){return!e.remove}),0===n.length&&delete e[t],o}var a=e("./event-wrapper"),s=e("./helpers"),c=a.createEventWrapper,l=a.STOP_IMMEDIATE_PROPAGATION_FLAG,u=a.PASSIVE_LISTENER_FLAG,p="@@";t.exports=Object.create(Object.prototype,{addEventListener:{value:function(e,t,r){if(s.isEmpty(e))throw TypeError("Type argument cannot be empty");if("undefined"==typeof t)throw TypeError("Listener argument is required");n(this,p+e,t,r)}},removeEventListener:{value:function(e,t,r){if(s.isEmpty(e))throw TypeError("Type argument cannot be empty");if("undefined"==typeof t)throw TypeError("Listener argument is required");i(this,p+e,t,r)}},dispatchEvent:{value:function(e){if(!s.isObject(e))throw new TypeError("Event argument is not an object");if(s.isEmpty(e.type))throw new TypeError('Event object must have non-empty "type" property');return o(this,p+e.type,e)}}})},{"./event-wrapper":113,"./helpers":114}],113:[function(e,t,r){"use strict";var n="__STOP_IP",i="__CANCELED",o="__PASSIVE_LISTENER",a="__ORIG_EVENT",s={stopPropagation:{value:function(){var e=this[a];"function"==typeof e.stopPropagation&&e.stopPropagation()},writable:!0,configurable:!0},stopImmediatePropagation:{value:function(){this[n]=!0;var e=this[a];"function"==typeof e.stopImmediatePropagation&&e.stopImmediatePropagation()},writable:!0,configurable:!0},preventDefault:{value:function(){if(!this[o]){this.cancelable===!0&&(this[i]=!0);var e=this[a];"function"==typeof e.preventDefault&&e.preventDefault()}},writable:!0,configurable:!0},defaultPrevented:{get:function(){return this[i]},enumerable:!0,configurable:!0}};t.exports.STOP_IMMEDIATE_PROPAGATION_FLAG=n,t.exports.PASSIVE_LISTENER_FLAG=o,t.exports.createEventWrapper=function(e,t){var r="number"==typeof e.timeStamp?e.timeStamp:Date.now(),c={target:{value:t},currentTarget:{value:t},eventPhase:{value:2},bubbles:{value:e.bubbles===!0},cancelable:{value:e.cancelable===!0},timeStamp:{value:r},isTrusted:{value:!1,enumerable:!0}};return c[n]={value:!1,writable:!0},c[i]={value:!1,writable:!0},c[o]={value:!1,writable:!0},c[a]={value:e},Object.create(Object.create(e,s),c)}},{}],114:[function(e,t,r){"use strict";function n(e){return null!==e&&"object"==typeof e}function i(e){return"undefined"==typeof e||null===e||""===e}function o(e){var t="function"==typeof e?e:null;return n(e)&&"function"==typeof e.handleEvent&&(t=e.handleEvent),t}function a(e){var t={capture:!1,passive:!1,once:!1};return"boolean"==typeof e?t.capture=e===!0:n(e)&&(t.capture=e.capture===!0,t.passive=e.passive===!0,t.once=e.once===!0),t}t.exports={isEmpty:i,isObject:n,normalizeListener:o,normalizeOptions:a}},{}],115:[function(e,t,r){(function(e){"use strict";function r(t){var r="destroy";if("function"==typeof e.Event)return new e.Event(r,t);var n=e.document.createEvent("Event"),i=t||{};return n.initEvent(r,i.bubbles===!0,i.cancelable===!0),n}t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],116:[function(e,t,r){"use strict";var n=e("../util/util");t.exports=function(e){if("omit"!==e.credentials)return e;var t=n.isRunningOnFilesystem()?"include":"same-origin";return new Request(e,{credentials:t})}},{"../util/util":155}],117:[function(e,t,r){(function(r){"use strict";function n(e,t,r){var n=s(t);d[e]=n,r>0&&(n.timeoutId=o(e,r))}function i(e){var t,r=d[e];return r&&(r.setLastAccessedTime(),t=r.value),t}function o(e,t,r){var n;return"undefined"==typeof r?(n=t,c.debug("setting sliding expire handler to purge item [%s] in %sms",e,n)):(n=r,c.debug("%sms elapsed since last access to item [%s]. Extending expiration time by %sms",t-r,e,n)),setTimeout(function(){var r=d[e];if(r){var n=(new Date).getTime()-r.lastAccessed;n>=t?(c.debug("purging expired item [%s]",e),delete d[e]):r.timeoutId=o(e,t,t-n)}},n)}function a(){Object.keys(d).forEach(function(e){var t=d[e].timeoutId;"undefined"!=typeof t&&clearTimeout(t),
delete d[e]})}function s(e){var t=(new Date).getTime(),r=Object.create(g);return r.value=e,r.created=t,r.lastAccessed=t,r}var c,l=e("../util/logger-factory"),u=e("../util/util"),p=e("./fetch-file"),f=e("../util/response-helpers"),h=1e3,d={},g={setLastAccessedTime:function(){this.lastAccessed=(new Date).getTime()}};t.exports=function(e,t){var o="string"==typeof e?e:e.url,s=o,g=e.method||t&&t.method||"GET",m="string"==typeof g&&"GET"===g.toUpperCase();c||(c=l.getLogger()),m||a();var v=i(s);if(v&&m)c.debug("returning data for [%s] from cache",s);else{c.debug("data from [%s] not found in cache. Requesting it from remote resource...",s);var y=u.isUrlForFile(o)?p:r.fetch;v=y(e,t).then(function(e){var t=e.status;if(c.debug("response from [%s] received. Status: [%s]",s,t),!f.isResponseOk(e)){var r=f.createError(e);throw r._response=e,r}return e}).then(function(e){var t=i(s);return t&&(c.debug("holding data from [%s] in cache for %sms",s,h),n(s,t,h)),e})["catch"](function(e){if(c.debug("removing data for [%s] from cache as the following error occurred: [%s]",s,e.message),delete d[s],e._response)return e._response;throw e}),m&&n(s,v)}return v.then(function(e){return e.clone()})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util/logger-factory":153,"../util/response-helpers":154,"../util/util":155,"./fetch-file":118}],118:[function(e,t,r){(function(e){"use strict";var r="Content-Type";t.exports=function(t){return new Promise(function(n,i){var o="string"==typeof t?t:t.url,a=new e.XMLHttpRequest;a.onload=function(){var t={status:0===a.status?200:a.status},i=a.getResponseHeader(r);i&&(t.headers={},t.headers[r]=i),n(new e.Response(a.responseText,t))},a.onerror=function(){i(new Error("Local request failed for "+t))},a.open("GET",o),a.send(null)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],119:[function(e,t,r){"use strict";function n(e,t){var r=s.reduce(function(e,t){return t(e)||e},new Request(e,t));return i(r)}var i=e("./deduping-fetch"),o=e("./credentials-filter"),a=e("./xsrf-filter"),s=[o,a];n.addRequestFilter=function(e){if("function"!=typeof e)throw new TypeError("The filter argument must be a function");return s.push(e),function(){s=s.filter(function(t){return t!==e})}},n.clearRequestFilters=function(){s=[]},t.exports=n},{"./credentials-filter":116,"./deduping-fetch":117,"./xsrf-filter":120}],120:[function(e,t,r){"use strict";function n(){var e=document.cookie.match(a);return e&&e[1]||void 0}var i="XSRF-TOKEN",o="X-XSRF-TOKEN",a=new RegExp("(?:^|;\\s*)"+i+"=([^;]+)");t.exports=function(e){if(!e.headers.has(o)&&"GET"!==e.method){var t=n();t&&e.headers.set(o,t)}return e}},{}],121:[function(e,t,r){(function(r){"use strict";var n=e("./core/widget-engine"),i=e("./strategies/parser/auto-config-parser"),o=e("./strategies/reader/fetch-widget-reader"),a=e("./strategies/renderer/html5-seamless-renderer"),s=e("./strategies/storage/html5-local-storage"),c=e("./strategies/renderer/preprocessors/handlebars-preprocessor"),l=e("./datasource/datasource-resolver-factory"),u=e("./strategies/datasource/resource-datasource-resolver"),p=e("./strategies/datasource/http-datasource-resolver"),f=e("./plugins/cxp-additions-plugin"),h=e("./plugins/replace-config-vars-plugin"),d=e("./plugins/backbase-format-plugin"),g=e("./util/logger-factory"),m=e("./util/util"),v=null,y=function(e){return v||(v=new c(e))},b=function(e){e=e||{},g.createLogger({parentLog:e.log,loggerName:"widget",logLevel:e.logLevel,appendId:!0})};b.prototype.init=function(e){e=e||{};var t=e.widgetPath,c=e.widgetEl,d=this.configVars=e.configVars||{},g=e.reader||(e.initialModel?null:new o),v=e.parser||new i,b=e.storage||new s,w=e.renderer;if(!w){var x=new l;x.addResolver(u.getInstance),x.addResolver(p.getInstance),this._datasourceResolverFactory=x,w=new a(c,x,{configVars:d})}var _;if("string"!=typeof t?_="You must provide a widget path":c||(_="You must provide a widget parent node"),_)throw new Error(_);var E=y(d);w.addPreprocessor("text/x-handlebars-template",E),w.addPreprocessor("application/x-handlebars-template",E),this.widgetEngine=new n({configFile:e.configFile,widgetPath:t,parser:v,reader:g,renderer:w,storage:b,initialModel:e.initialModel}),this.widgetEngine.addPlugin(new f),this.widgetEngine.addPlugin(new h({contextRoot:d.contextRoot,remoteContextRoot:d.remoteContextRoot||d.contextRoot,apiRoot:d.apiRoot,itemRoot:d.itemRoot||""},{full:!!d.fullConfigReplacement})),this.widgetEngine.addPlugin({name:"Angular JS",postRender:function(e,t){var n=r.angular;if(n){var i=t.getWidgetNode(),o=i.getAttribute("widget-ng-app")||i.getAttribute("data-widget-ng-app");if(o){var a=i.getAttribute("ng-strict-di")||i.getAttribute("data-ng-strict-di");n.element(document).ready(function(){n.module(o).value("widget",e),n.bootstrap(e.body,[o],{strictDi:m.parseBoolean(a)})})}}return e}})},b.prototype.enableCompatibility=function(){var e=this.configVars||{},t={apiRoot:e.apiRoot||"",contextRoot:e.contextRoot||"",remoteContextRoot:e.remoteContextRoot||""};this.widgetEngine.addPlugin(new d(t))},b.prototype.start=function(){return this.widgetEngine.start()},b.prototype.addPlugin=function(e){return this.widgetEngine.addPlugin(e),this},b.prototype.addFeature=function(e){return this.widgetEngine.addFeature(e),this},b.prototype.getLogger=function(){return this.log},b.prototype.destroy=function(){return this.widgetEngine.destroy()},b.prototype.addDatasourceResolver=function(e){if(this._datasourceResolverFactory)return this._datasourceResolverFactory.addResolver(e),this;throw new Error("This method cannot be called when custom renderer is provided")},t.exports=b}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./core/widget-engine":104,"./datasource/datasource-resolver-factory":109,"./plugins/backbase-format-plugin":122,"./plugins/cxp-additions-plugin":129,"./plugins/replace-config-vars-plugin":130,"./strategies/datasource/http-datasource-resolver":131,"./strategies/datasource/resource-datasource-resolver":132,"./strategies/parser/auto-config-parser":133,"./strategies/reader/fetch-widget-reader":143,"./strategies/renderer/html5-seamless-renderer":144,"./strategies/renderer/preprocessors/handlebars-preprocessor":145,"./strategies/storage/html5-local-storage":148,"./util/logger-factory":153,"./util/util":155}],122:[function(e,t,r){"use strict";function n(e){e=e||{},this.opts=e,this.name="Backbase Format",this.portalConf=e.portalConf||{},this.window="undefined"==typeof window?e.window:window,this.log=o.getLogger(),this.opts.log=this.log}function i(e){for(var t=e;t;){if("function"==typeof t.hasAttribute&&t.hasAttribute("data-chrome"))return t;t=t.parentNode}return null}var o=e("../util/logger-factory"),a=e("../util/util"),s=e("promise-extensions")(),c=e("./backbase-format/widget-handlers"),l=e("./backbase-format/legacy-widget-api"),u=e("./backbase-format/include-object"),p=Array.prototype.slice.call.bind(Array.prototype.slice);t.exports=n,n.prototype.preRender=function(e,t,r){this.log.info("Backbase format plugin is running in PRE RENDER phase..."),e.preferences.getItem("src")||e.preferences.defineItem({name:"src",value:r.content.src,readonly:!1}),e.preferences.getItem("thumbnailUrl")||e.preferences.defineItem({name:"thumbnailUrl",value:r.icons[0],readonly:!1}),e.preferences.getItem("title")||e.preferences.defineItem({name:"title",value:r.title,readonly:!1});var n=l.buildWidget(e,r,this.log,this.portalConf.tags),i=n.preferences.eventTarget?n.preferences.eventTarget.indexOf(e):-1;return i>-1&&(n.preferences.eventTarget[i]=n),this.log.info("Backbase format plugin PRE RENDER done."),n},n.prototype.postRender=function(e,t,r){var n,o=this,f=this.log,h=this.window;f.info("Backbase format plugin is running in POST RENDER phase..."),l.applyPresentationApi(e,t,r,f);var d=p(e.body.getElementsByTagName("g:include")),g=d.filter(function(t){return a.ensureElementBelongsToItem(e.name,t)}).map(function(t){return new u(t,e,r,o.opts)});return g.length?(e.includes=g,e.refreshIncludes=function(){var e=this.includes.map(function(e){return e.refresh()});return s.settleAll(e).then(function(e){var t=e.filter(function(e){return e.isRejected()}).length;t>0&&f.warn("%s includes failed to resolve.",t)})},g.forEach(function(e,t){var r=d[t];r.parentNode.replaceChild(e.htmlNode,r)}),n=e.refreshIncludes()):n=s.resolve(),n.then(function(){var t=i(e.body)||e.body;return c.handleLoad(h,e,f),c.handlePrefModified(h,e,f),c.handleMaximize(h,e,t,f),c.handleRestore(h,e,t,f),f.info("Backbase format plugin POST RENDER done."),e})}},{"../util/logger-factory":153,"../util/util":155,"./backbase-format/include-object":124,"./backbase-format/legacy-widget-api":126,"./backbase-format/widget-handlers":128,"promise-extensions":99}],123:[function(e,t,r){"use strict";function n(e,t){var r=e.replace(/\/[^\/]+$/,"");r=r.replace(/\$\(contextRoot\)/,t);var n=s.isUrlAbsolute(e)?e:r+"/"+e;return n.substring(0,n.lastIndexOf("/")+1)}function i(e,t){if("undefined"!=typeof DOMParser){var r=new DOMParser,n=r.parseFromString(e,"text/html"),i=c(n.getElementsByTagName("img"));return i.forEach(function(e){var r=e.getAttribute("src");r&&s.isUrlSiteRelative(r)&&(r=new URL(r,t).href,e.setAttribute("src",r))}),n.body.innerHTML}return e}function o(e,t){function r(e,t){return t=t[e.shift()],e.length>0&&t&&"object"==typeof t?r(e,t):t}var n=e.split(".");return r(n,t)}function a(e){return void 0===e||null===e||""===e}var s=e("../../util/util"),c=Array.prototype.slice.call.bind(Array.prototype.slice);t.exports={getStartFileFolder:n,makeReferenceAbsolute:i,resolveExpression:o,isEmpty:a,convertToArray:c}},{"../../util/util":155}],124:[function(e,t,r){(function(r){"use strict";function n(e,t,n,i){i=i||{};var o=i.contextRoot||"",c=i.remoteContextRoot||"",l="true"===e.getAttribute("local"),u={replaceRegex:/\$\{([a-zA-Z0-9-_.]+)\}/g,log:i.log,startFileFolder:a.getStartFileFolder(n.content.src,o),contextRoot:l||!c?o:c};Object.defineProperty(this,"_config",{value:u}),this.widget=t,this.uri={template:e.getAttribute("src")},this.proxy="true"===e.getAttribute("proxy"),this.method=e.getAttribute("method")||"GET";var p=r.document.createElement("div");p.className="bp-g-include",this.htmlNode=p;var f=new s(n,i);this.params=f.buildParameters(this,e)}var i=e("../../util/util"),o=e("browser-bunyan"),a=e("./include-helpers"),s=e("./include-param-builder"),c=e("../../fetch/filtering-fetch"),l=e("../../util/response-helpers"),u=r.FormData;t.exports=n,n.prototype.setURI=function(e){e&&"string"==typeof e&&(this.uri.template=e)},n.prototype.getContentURI=function(){var e=this.uri.template;if(!e)return"";var t=this._config,r=this;return e=e.replace(t.replaceRegex,function(e,t){return r.widget.getPreference(t)}),e=e.replace("$(contextRoot)",t.contextRoot),i.isUrlDocumentRelative(e)&&(e=t.startFileFolder+e,t.log.debug("g:include src after resolution is [%s]",e)),e},n.prototype.refresh=function(){var e=this._config,t=e.log,r=this._getRequestParams(),n=this._resolveRequestUrl(r),s=this._getRequestOptions(r);if(t.level()<=o.DEBUG){var u=JSON.stringify(s,null,"	");t.debug("Making g:include http request to [%s] with fetch opts: [%s]",n,u)}return c(n,s).then(function(e){return t.debug("g:include request to [%s] completed with status: %s",n,e.status),l.isResponseOk(e)?Promise.resolve(e.text()):Promise.reject(l.createError(e))})["catch"](function(e){return"Unable to resolve g:include ( "+e.message+" )"}).then(function(r){return t.trace("Received html response:\n%s",r),i.isRunningOnFilesystem()&&i.isUrlAbsolute(e.contextRoot)&&(r=a.makeReferenceAbsolute(r,e.contextRoot)),this.htmlNode.innerHTML=r,this.htmlNode.setAttribute("data-src",n),this.htmlNode}.bind(this))},n.prototype._getRequestParams=function(){var e=[];if(this.proxy){e=this.params.filter(function(e){return"proxy"===e.destination});var t=this.getContentURI();if(t){var r=this.params.filter(function(e){return"target"===e.destination}).map(function(e){return e.toQueryString()}).filter(function(e){return!!e}).join("&"),n={name:"url",getQueryParams:function(){return[{name:this.name,value:t+(-1!==t.indexOf("?")?"&":"?")+r}]},toQueryString:function(){var e=this.getQueryParams()[0];return e.name+"="+encodeURIComponent(e.value)}};e.push(n)}}else e=this.params.filter(function(e){return"target"===e.destination});return e},n.prototype._resolveRequestUrl=function(e){var t=this.proxy?this._config.contextRoot+"/proxy":this.getContentURI();if(this.method&&"POST"!==this.method.toUpperCase()){var r=e.map(function(e){return e.toQueryString()}).join("&");t+=(t.indexOf("?")>=0?"&":"?")+r}return t},n.prototype._getRequestOptions=function(e){var t={};return this.method&&"POST"===this.method.toUpperCase()&&(t.method=this.method,t.body=this._constructFormData(e)),t},n.prototype._constructFormData=function(e){var t=new u;return e.reduce(function(e,t){return e.concat(t.getQueryParams())},[]).forEach(function(e){t.append(e.name,e.value)}),t},["getContentIterator","hasContent","setContent"].forEach(function(e){n.prototype[e]=function(){this._config.log.warn("%s method is no longer supported in CXP6",e)}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../fetch/filtering-fetch":119,"../../util/response-helpers":154,"../../util/util":155,"./include-helpers":123,"./include-param-builder":125,"browser-bunyan":2}],125:[function(e,t,r){"use strict";function n(e,t){this._widgetModel=e,this._log=t.log,this._remoteContextRoot=t.remoteContextRoot||"",this._contextRoot=t.contextRoot||"",this._apiRoot=t.apiRoot||"",this._paramFactoryMap={"g:http-param":this._buildHttpParam,"g:http-proxy-param":this._buildHttpProxyParam,"g:http-preference-param":this._buildPreferenceParam,"g:http-preference-param-map":this._buildPreferenceParamMap}}function i(e,t,r,n){this.name={template:e.getAttribute("name")},this.value={template:e.getAttribute("value")},this.destination=n||"target",this.method=(e.getAttribute("method")||t.method||"GET").toUpperCase(),Object.defineProperty(this,"_include",{value:t}),Object.defineProperty(this,"_log",{value:r})}function o(e,t,r,n){i.call(this,e,t,r);var o=e.getAttribute("dataType")||e.getAttribute("datatype");Object.defineProperty(this,"_typeName",{value:o});var a=n.preferences||{},s=Object.keys(a).filter(function(e){return a[e].type===o});Object.defineProperty(this,"_prefs",{value:s})}function a(e,t,r){i.call(this,e,t,r)}function s(e,t,r,n,o,a){var s=n?"proxy":"target";i.call(this,e,t,r,s),Object.defineProperty(this,"_replaceRegex",{value:/\$\{([a-zA-Z0-9-_]+)\}/}),Object.defineProperty(this,"_contextRoot",{value:o}),Object.defineProperty(this,"_apiRoot",{value:a})}var c=e("./include-helpers");t.exports=n,n.prototype.buildParameters=function(e,t){var r=this,n=this._flattenElementTree(t).filter(function(e){var t=e.nodeName.toLowerCase();return t in r._paramFactoryMap}).map(function(t){var n=t.nodeName.toLowerCase(),i=r._paramFactoryMap[n];return i.call(r,t,e)}).filter(function(e){return!!e});return n.forEach(function(e){["getName","getValues"].forEach(function(t){e[t]=function(){this._log.warn("%s method is no longer supported in CXP6",t)}})}),n},n.prototype._flattenElementTree=function(e){for(var t=[],r=e.firstChild;r;)1===r.nodeType&&t.push(r),r=r.hasChildNodes()?r.firstChild:r.nextSibling;return t},n.prototype._buildHttpParam=function(e,t,r){var n=this._remoteContextRoot||this._contextRoot,i=new s(e,t,this._log,r,n,this._apiRoot);return i.value.template?i:null},n.prototype._buildHttpProxyParam=function(e,t){return this._buildHttpParam(e,t,!0)},n.prototype._buildPreferenceParam=function(e,t){var r=new a(e,t,this._log);return r.name.template?r:null},n.prototype._buildPreferenceParamMap=function(e,t){var r=new o(e,t,this._log,this._widgetModel);return r._typeName?r:null},i.prototype.getQueryParams=function(){return[]},i.prototype.toQueryString=function(){return this.getQueryParams().map(function(e){return e.name+"="+encodeURIComponent(e.value)}).join("&")},o.prototype=Object.create(i.prototype),o.prototype.getQueryParams=function(){var e=this._typeName,t=this;return this._prefs.map(function(r){return{name:e+"."+r,value:t._include.widget.getPreference(r)}})},a.prototype=Object.create(i.prototype),a.prototype.getQueryParams=function(){var e=this.name?this.name.template:null;if(c.isEmpty(e))return[];var t=this._include.widget.getPreference(e);return c.isEmpty(t)&&this._log.warn("Failed to resolve g:include parameter value. Parameter - [%s]",e),[{name:e,value:t}]},s.prototype=Object.create(i.prototype),s.prototype.getQueryParams=function(){var e=this.name?this.name.template:null,t=this.value?this.value.template:null,r=t,n=this._include.widget,i=this._contextRoot,o=this._apiRoot;if(c.isEmpty(e)||c.isEmpty(t))return[];if(t=t.replace(this._replaceRegex,function(e,t){return"contextRoot"===t?i:"apiRoot"===t?o:n.getPreference(t)}),0===t.indexOf("__WIDGET__")){var a=t.split(".").filter(function(e,t){return 0!==t}).join(".");t=c.resolveExpression(a,n),c.isEmpty(t)&&this._log.warn("Failed to resolve g:include parameter value. Parameter - [%s], unresolved value - [%s], resolved value - [%s]",e,r,t)}return[{name:e,value:t}]}},{"./include-helpers":123}],126:[function(e,t,r){(function(r,n){"use strict";function i(e,t,r,n){var i="backbaseWidget",o=u.cloneWidgetInstance(e);return o.id=t.id||Math.random().toString(36).substr(2,5),o.name=t.name,o.nodeType=1,o.nodeValue=i,o.margins={top:0,right:0,bottom:0,left:0},Object.getOwnPropertyNames(e).forEach(function(t){u.startsWith(t,"@@")&&(o[t]=e[t])}),o.myDefinition={sUrl:t.content.src},o.nodeName=i,o.tagName=i,o.tags=Array.isArray(n)?n:[],o.model=a(o,t),f(o,r),s(o),o.addEventListener&&o.dispatchEvent&&o.addEventListener("storage",function(e){r.debug("Chaining StorageEvent to Backbase 'PrefModified' event...");var t="PrefModified",n=new h(t);n.initStorageEvent(t,!1,!1,e.key,e.oldValue,e.newValue,e.url,o.preferences),n.attrName=e.key,n.prevValue=e.oldValue,o.model.dispatchEvent(n)}),o}function o(e,t,r,i){var o=e.body||t.getWidgetNode(),a=o.getAttribute("g:onload");if(a){var s=n.document.createElement("div"),c=o.parentNode,u=o.nextSibling;s.appendChild(o),s.className="bp-widget-body",u?c.insertBefore(s,u):c.appendChild(s),e.body=s}e.htmlNode=l(o),e.refreshHtml=function(){var e=this.features&&this.features.cxp;return e?e.model.item(r.name,r.type).get().then(function(t){return e.render.rerenderItem(t.id,t.name,t)}):(i.warn('A widget is required to have "CXP" feature in order to be able to refresh its view.'),Promise.resolve())}}function a(e,t){var i={jxid:"VIEW-"+t.name,localName:"Widget",name:t.name,tag:"widget",tagName:"Widget",contextItemName:e.features&&e.features.cxp&&e.features.cxp.config?e.features.cxp.config.get("portalName"):null,extendedItemName:t.extendedItemName||null,parentItemName:t.parentItemName||null,securityProfile:t.securityProfile||null,uuid:t.id||null,preferences:c(e.preferences),tags:Array.isArray(t.tags)?t.tags:[],addEventListener:p.addEventListener,removeEventListener:p.removeEventListener,dispatchEvent:p.dispatchEvent};return i.save=function(e){var t=this;r.nextTick(function(){if("function"==typeof e){var r={contextItemName:t.contextItemName,name:t.name,preferences:t.preferences,tag:t.tag},i={status:204,statusText:"No Content",readyState:4};e.call(n,r,i)}})},i.getPreference=function(t){return e.preferences.getItem(t)},i.setPreference=function(t,r){e.preferences.setItem(t,r)},i}function s(e){e.getPreference=function(e){return this.preferences.getItem(e)},e.getPreferenceFromParents=e.getPreference,e.getAreaPreference=function(){return this.preferences.getItem("area")||0},e.getOrderPreference=function(){return this.preferences.getItem("order")},e.setPreference=function(e,t){this.preferences.setItem(e,t)},e.getDefinition=function(){return e.myDefinition},e.setAreaPreference=function(e){this.preferences.setItem("area",e)},e.setOrderPreference=function(e){this.preferences.setItem("order",e)}}function c(e){return e._items}function l(e){for(var t=e;t;){if("function"==typeof t.hasAttribute&&t.hasAttribute("data-chrome"))return t;t=t.parentNode}return null}var u=e("../../util/util"),p=e("../../event-target/event-target"),f=e("./warn-deprecated-access"),h=e("../../strategies/storage/storage-event");t.exports={buildWidget:i,applyPresentationApi:o}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../event-target/event-target":112,"../../strategies/storage/storage-event":149,"../../util/util":155,"./warn-deprecated-access":127,_process:238}],127:[function(e,t,r){"use strict";function n(e,t,r){return function(){var n="COMPATIBILITY: %s is a widget %s that is no longer supported in CXP6";e.warn(n,t,r?"method":"property")}}function i(e,t){var r=o.reduce(function(e,r){return e[r]={enumerable:!0,get:n(t,r),set:n(t,r)},e},{});return Object.defineProperties(e,r),a.reduce(function(e,r){return e[r]=n(t,r,!0),e},e),e}t.exports=i;var o=["attributes","childNodes","cls_custom","cnBase","firstChild","flex","htmlArea","htmlDoc","htmlFoot","htmlHead","lastChild","layout","local_listeners","localName","namespaceURI","nextSibling","node","ownerDocument","parentNode","perspective","prefix","previousSiblings"],a=["appendChild","cloneNode","createDisplay","createPerspective","destroy","disableDesignMode","dragIsTarget","enableDesignMode","getAreaOrderedChildren","getAttribute","getAttributeNS","getClassID","getCurrentPerspective","getDisplay","getDisplayEventTarget","getDisplayModel","getElementsByTagName","getElementsByTagNameNS","getHTMLArea","hasAttribute","hasAttributeNS","hasAttributes","hasChildNodes","hideDesignTools","hideDragTargets","insertBefore","insertDisplayChild","loadChildren","lookupNamespaceURI","refreshIncludes","removeAttribute","removeAttributeNS","removeChild","renderDisplay","replaceChild","setAttribute","setAttributeNS","setCurrentPerspective","showDesignTools","showDragTargets","template"]},{}],128:[function(e,t,r){"use strict";function n(e,t,r){var n="onload",i=s(n,t.body,t.name);i&&c(e,t.id,i,n,r)}function i(e,t,r){var n="onPrefModified",i=s(n,t.body,t.name);i&&t.model.addEventListener("PrefModified",function(){c(e,t.id,i,n,r)})}function o(e,t,r,n){var i="onmaximize",o=s(i,t.body,t.name);o&&r.addEventListener("click",function(r){"maximized"===r.target.getAttribute("data-cxp-viewmode")&&c(e,t.id,o,i,n)})}function a(e,t,r,n){var i="onrestore",o=s(i,t.body,t.name);o&&r.addEventListener("click",function(r){"windowed"===r.target.getAttribute("data-cxp-viewmode")&&c(e,t.id,o,i,n)})}function s(e,t,r){var n=t.querySelector("div[g\\:"+e+"]");return n&&l.ensureElementBelongsToItem(r,n)?n.getAttribute("g:"+e):null}function c(e,t,r,n,i){try{i.debug("Executing g:%s script...",n);var o=e.cxp._widgets?"window.cxp._widgets['"+t+"']":"window.widget",a=r.replace(/(__WIDGET__|__GADGET__)/,o);e.eval("(function() {"+a+"})()")}catch(s){var c=/is not defined$/.test(s.message)?"This maybe because in CXP6 functions in start files must be explicitly declared on the global scope":"";i.warn("g:%s failed! %s",n,c),i.error(s)}}var l=e("../../util/util");t.exports={handleLoad:n,handleMaximize:o,handleRestore:a,handlePrefModified:i}},{"../../util/util":155}],129:[function(e,t,r){"use strict";var n=e("../event-target/event-target"),i=function(){this.name="CXP Additions Plugin"};i.prototype.postRead=function(e){var t=e.preferences;return Array.isArray(t)&&(e.preferences=t.reduce(function(e,t){return e[t.name]=t,e},{})),e},i.prototype.preRender=function(e,t,r){r.type&&Object.defineProperty(e,"type",{value:r.type}),e.addEventListener=n.addEventListener,e.removeEventListener=n.removeEventListener,e.dispatchEvent=n.dispatchEvent;var i=e.preferences.eventTarget=e.preferences.eventTarget||[];return-1===i.indexOf(e)&&(i.push(e),e.addEventListener("destroy",function(){var e=this,t=e.preferences;t.eventTarget=t.eventTarget.filter(function(t){return t!==e})},{once:!0})),e},t.exports=i},{"../event-target/event-target":112}],130:[function(e,t,r){"use strict";var n=e("../util/logger-factory"),i=e("browser-bunyan"),o=function(e,t){t=t||{},this.name="Replace Config Vars",this.varMap=e,this.full=!!t.full,this.interpolateStartRegex=t.interpolateStartRegex||"\\$\\(",this.interpolateEndRegex=t.interpolateEndRegex||"\\)",this.log=n.getLogger()};o.prototype.postRead=function(e){var t=this,r=this.log;r.info("Replace config vars plugin is running is POST READ phase...");var n=this._getExcludeObjects(e);if(n.length&&n.forEach(function(e){e.value=e.value.replace("contextRoot","__contextRoot__")}),t.full)r.debug("Doing full config vars replacement..."),t._traverse(e);else{r.debug("Doing minimal config vars replacement..."),e.content&&e.content.src&&(e.content.src=t._replaceVars("src",e.content.src)),e.content&&e.content.config&&(e.content.config=t._replaceVars("config",e.content.config)),e.icons&&e.icons.forEach(function(e,r,n){n[r]=t._replaceVars("icons["+r+"]",e)});var i=e.preferences.messages;i&&(i.value=t._replaceVars("messages",i.value));var o=e.preferences.options;if(o&&(o.value=t._replaceVars("options",o.value)),e.datasources&&t._traverse(e.datasources),e.altContent){var a=Object.keys(e.altContent);a.forEach(function(r){var n=e.altContent[r];n.src=t._replaceVars("src."+r,n.src)})}}return n.length&&n.forEach(function(e){e.value=e.value.replace("__contextRoot__","contextRoot")}),r.info("Replace config vars plugin in POST READ is DONE."),e},o.prototype._traverse=function(e){Object.keys(e).forEach(function(t){e[t]=this._replaceVars(t,e[t]),e[t]&&"object"==typeof e[t]&&this._traverse(e[t])},this)},o.prototype._getExcludeObjects=function(e){var t=e.datasources||{},r=Object.keys(t).map(function(e){return t[e]}).reduce(function(e,t){return e.concat(t.params)},[]).filter(function(e){return"template"===e.name&&"string"==typeof e.value}),n=e.preferences||{},i=Object.keys(n).map(function(e){return n[e]}).filter(function(e){return"templateUrl"===e.name&&"string"==typeof e.value});return r.concat(i)},o.prototype._replaceVars=function(e,t){if("string"!=typeof t)return t;var r=this,n=r.log,o=r.varMap,a=Object.keys(o);return a.forEach(function(a){var s=new RegExp(r.interpolateStartRegex+a+r.interpolateEndRegex,"g");n.level()<=i.DEBUG&&s.test(t)&&n.debug("Replacing occurences of [%s] with [%s] where [%s=%s]",s,o[a],e,t),t=t.replace(s,o[a])}),t},t.exports=o},{"../util/logger-factory":153,"browser-bunyan":2}],131:[function(e,t,r){"use strict";function n(e){var t=e&&e.uri;return t&&l.test(t)}function i(e){this._datasource=e}var o=e("../../datasource/datasource-resolver"),a=e("../../datasource/datasource-resolver-helpers"),s=e("../../util/util"),c=e("lib-bb-html-sanitizer"),l=/^https?:/i;t.exports=i,i.prototype.resolveUrl=function(e){var t=a.resolveQueryString(e,this._datasource.params),r=a.resolveExpression(e,this._datasource.uri);return t&&(r+="?"+t),r},i.prototype.processResponse=function(e,t){var r=this;return s.getContentBodyAndTypeFromResponse(e).then(function(e){return"html"===e.type?r._sanitize(t,e.body):e.body})},i.prototype._sanitize=function(e,t){return this._sanitizer||(this._sanitizer=c.create(e.htmlSanitizerWhitelist)),this._sanitizer(t)},i.getInstance=o.createFactoryFunction(n,i)},{"../../datasource/datasource-resolver":111,"../../datasource/datasource-resolver-helpers":110,"../../util/util":155,"lib-bb-html-sanitizer":31}],132:[function(e,t,r){"use strict";function n(e){this._datasource=e,this._sanitizeParamName="sanitize"}var i=e("../../datasource/datasource-resolver"),o=e("../../datasource/datasource-resolver-helpers"),a=e("../../util/util"),s=e("lib-bb-html-sanitizer");t.exports=n,n.prototype.resolveUrl=function(e){var t=this._datasource.uri,r=this._sanitizeParamName,n=e.contextRoot||"",i=e.itemRoot||"",s=t.split(":");if(2!==s.length)throw new Error("Invalid resource datasource uri: ",t);var c,l=(this._datasource.params||[]).filter(function(e){return e.name!==r}),u=o.resolveQueryString(e,l),p=o.resolveExpression(e,s[1]);return c=a.isUrlDocumentRelative(p)?i+"/"+p:n+p,u&&(c+="?"+u),c},n.prototype.processResponse=function(e,t){var r=this._datasource.params||[],n=this._sanitizeParamName,i=this;return a.getContentBodyAndTypeFromResponse(e).then(function(e){var o;return o="html"===e.type?r.some(function(e){return e.name===n&&"false"===e.value}):!0,o?e.body:i._sanitize(t,e.body)})},n.prototype._sanitize=function(e,t){return this._sanitizer||(this._sanitizer=s.create(e.htmlSanitizerWhitelist)),this._sanitizer(t)},n.getInstance=i.createFactoryFunction("resource",n)},{"../../datasource/datasource-resolver":111,"../../datasource/datasource-resolver-helpers":110,"../../util/util":155,"lib-bb-html-sanitizer":31}],133:[function(e,t,r){"use strict";var n=e("../../core/config-parser"),i=e("../../util/verror"),o=e("../../util/logger-factory"),a={json:{parser:e("./commonjs-package-config-parser"),testFn:function(e){return"string"==typeof e&&0===e.trim().indexOf("{")}},backbaseXml:{parser:e("./backbase-dom-config-parser"),testFn:function(e){return"string"==typeof e&&e.trim().indexOf("<catalog")>=0}},jsObject:{parser:e("./js-object-parser"),testFn:function(e){return"object"==typeof e}}},s=function(){this.log=o.getLogger(),this.parserMap=a};s.prototype=Object.create(n.prototype),s.prototype.parse=function(e){var t=null;for(var r in this.parserMap)if(this.parserMap.hasOwnProperty(r)){var n=this.parserMap[r];if(n.testFn(e)){this.log.debug("Parsing widget config as: %s",r),t=n.parser;break}}if(null===t)throw new i("Could not determine the config parser to use");var o=new t;return o.parse(e)},s.prototype.addParserStrategy=function(e,t,r){this.parserMap[e]={parser:t,testFn:r}},t.exports=s},{"../../core/config-parser":101,"../../util/logger-factory":153,"../../util/verror":156,"./backbase-dom-config-parser":134,"./commonjs-package-config-parser":135,"./js-object-parser":136}],134:[function(e,t,r){"use strict";var n=e("../../core/config-parser"),i=e("./xml/widget"),o=e("./xml/helpers"),a=function(){};a.prototype=Object.create(n.prototype),a.prototype.parse=function(e){try{var t=new DOMParser,r=t.parseFromString(e,"application/xml"),n=r.documentElement,a="catalog"===n.tagName?o.getChildElements(n)[0]:n;return Promise.resolve(i(a))}catch(s){return Promise.reject(s)}},t.exports=a},{"../../core/config-parser":101,"./xml/helpers":139,"./xml/widget":142}],135:[function(e,t,r){"use strict";var n=e("../../core/config-parser"),i=e("../../util/util"),o=function(){};o.prototype=Object.create(n.prototype),o.prototype.parse=function(t){try{var r=JSON.parse(t),n=i.cloneDeep(e("../../core/default-widget-model"));return n.id=r.name||n.id,n.version=r.version||n.version,n.description=r.description||n.description,n._lang=r.locales||n._lang,Array.isArray(r.contributors)&&r.contributors.length>0&&(n.author=r.contributors[0].name||n.author,n.authorEmail=r.contributors[0].email||n.authorEmail,n.authorHref=r.contributors[0].web||n.authorHref),Array.isArray(r.licenses)&&r.licenses.length>0?(n.license=r.licenses[0].type||n.license,n.licenseHref=r.contributors[0].url||n.licenseHref):"string"==typeof n.license&&(n.license=r.license),n.defaultlocale=r.defaultlocale||n.defaultlocale,n.width=r.width||n.width,n.height=r.height||n.height,n.viewmodes=r.viewmodes||n.viewmodes,n.name=r.fullName||n.name,n.shortName=r.shortName||n.shortName,n.preferences=r.preferences||n.preferences,n.features=r.features||n.features,n.icons=r.icons||n.icons,n.content=r.content||n.content,Promise.resolve(n)}catch(o){return Promise.reject(o)}},t.exports=o},{"../../core/config-parser":101,"../../core/default-widget-model":103,"../../util/util":155}],136:[function(e,t,r){"use strict";var n=e("../../core/config-parser"),i=function(){};i.prototype=Object.create(n.prototype),i.prototype.parse=function(e){return e},t.exports=i},{"../../core/config-parser":101}],137:[function(e,t,r){"use strict";function n(e){var t=[];return s.pushIfExists(t,e.thumbnailUrl),s.pushIfExists(t,e.icon),t}function i(e,t){
var r=s.getChildElementByName(e,"children"),n=r&&s.getChildElements(r);return n&&n.map(t).sort(o)}function o(e,t){var r=a(e,"area"),n=a(t,"area"),i=a(e,"order"),o=a(t,"order"),s=0;return n>r?s=-1:r>n?s=1:o>i?s=-1:i>o&&(s=1),s}function a(e,t){if("undefined"==typeof e.preferences[t])return null;var r=e.preferences[t].value,n=parseFloat(r);return isNaN(n)?r:n}var s=e("./helpers");t.exports={parseIcons:n,parseChildren:i}},{"./helpers":139}],138:[function(e,t,r){t.exports.PROPERTY_BLACKLIST=["description","shortName","thumbnailUrl","icon","viewmodes","author","authorEmail","authorHref","license","licenseHref","widgetChrome","config","src","isManageableArea","version","width","height"],t.exports.SPECIAL_TYPES=["contentRef","linkRef","datasource"],t.exports.NO_LOCALE_NAME="no_locale"},{}],139:[function(e,t,r){"use strict";function n(e){return e&&e.value.length?e.value:void 0}function i(e){var t=n(e);return t?t.split(/[,\s]/).filter(function(e){return e.trim().length>0}):[]}function o(e){return"undefined"!=typeof e&&null!==e}function a(e,t,r,n){o(r)&&(e[t]=n?n(r):r)}function s(e,t){o(t)&&e.push(t)}function c(e){return o(e)?"string"==typeof e?"true"===e:e&&"true"===e.value:void 0}function l(e){return[].slice.call(e)}function u(e){return"string"==typeof e?parseFloat(e):void 0}function p(e){if("string"==typeof e){var t=parseInt(e,10);return isNaN(t)?void 0:t}}function f(e,t){for(var r=d(e),n=0;n<r.length;n++)if(r[n].tagName===t)return r[n]}function h(e,t,r){var n=f(e,t);return"undefined"==typeof r&&(r=null),n&&n.textContent||r}function d(e){return"undefined"!=typeof e.children?l(e.children):l(e.childNodes).filter(function(e){return 1===e.nodeType})}t.exports={assignIfExists:a,content:h,isExists:o,parseBool:c,parseString:n,parseFloat:u,parseInt:p,parseViewhint:i,pushIfExists:s,toArray:l,getChildElementByName:f,getChildElements:d}},{}],140:[function(e,t,r){(function(r){"use strict";function n(e){var t=f.getChildElementByName(e,"properties"),r=f.getChildElements(t),n=f.content(e,"locale")||c(),a={},s=r.reduce(function(e,t){var r=i(t,n);return a[r.name]=r.value,-1===h.indexOf(r.name)&&(e[r.name]=r),e},{}),l={id:f.content(e,"uuid"),name:f.content(e,"name",""),shortName:a.shortName,preferences:s,preferencesDict:a,type:e.tagName,locale:n,dir:f.content(e,"dir","ltr")};return f.assignIfExists(l,"tags",o(e)),f.assignIfExists(l,"extendedItemName",f.content(e,"extendedItemName")),f.assignIfExists(l,"parentItemName",f.content(e,"parentItemName")),f.assignIfExists(l,"contextItemName",f.content(e,"contextItemName")),f.assignIfExists(l,"lockState",f.content(e,"lockState")),f.assignIfExists(l,"securityProfile",f.content(e,"securityProfile")),f.assignIfExists(l,"manageable",f.parseBool(f.content(e,"manageable"))),l}function i(e,t){var r=e.attributes,n=f.parseString(r.name),i=f.parseString(r.label),o=f.parseString(r.itemName),a=r.manageable,c=f.parseBool(r.readonly),l=f.parseBool(r.localizable),u=r.viewHint&&f.parseViewhint(r.viewHint),p=r.type,h=f.toArray(e.getElementsByTagName("value")),m=h.map(function(e){return s(e)}),v=m.filter(function(e){return e.locale===t})[0];v||(v=m.filter(function(e){return!e.locale})[0]||{});var y={name:n,readonly:c||!1,value:v.value};return i&&(y.label=i),a&&(y.manageable=f.parseBool(a)),u&&(y.viewhints=u),o&&(y.itemName=o),p&&d.indexOf(p.value)>-1?y.type=p.value:d.indexOf(v.type)>-1&&(y.type=v.type),l&&(y.localizable=l,y._lang=m.reduce(function(e,t){var r=t.locale||g;return e[r]={value:t.value},e},{}),Object.defineProperty(y,"value",{enumerable:!0,set:function(e){var r=this._lang||(this._lang={}),n=r[t]||(r[t]={});n.value=e,v=n},get:function(){return v.value}})),y}function o(e){var t=f.getChildElementByName(e,"tags"),r=t&&f.getChildElements(t);return r&&r.map(a)}function a(e){return{type:e.attributes.type.value,name:f.parseString({value:e.textContent})}}function s(e){return{value:e.textContent,type:e.getAttribute("type"),locale:e.getAttribute("locale")}}function c(){var e,t=l();return t&&(e=t.getItem("bb:locale")),e||p.defaultLocale}function l(){var e="bb:__test";try{var t=r.localStorage;return t.setItem(e,e),t.removeItem(e),t}catch(n){return null}}var u=e("./constants"),p=e("../../../util/i18n"),f=e("./helpers"),h=u.PROPERTY_BLACKLIST,d=u.SPECIAL_TYPES,g=u.NO_LOCALE_NAME;t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../util/i18n":152,"./constants":138,"./helpers":139}],141:[function(e,t,r){"use strict";function n(e){var t=c(e);return this._parseXmlItemModel(t.documentElement)}function i(e){var t=c(e),r=this;return f.getChildElements(t.documentElement).map(function(e){return r._parseXmlItemModel(e)}).filter(function(e){return!!e})}function o(e){var t=l(),r=e.tagName.toLowerCase(),n=this.getParser(r);return n?n(e,t):(t.warn("Unsupported item type [%s]",r),null)}function a(e,t){this._typeSpecificParser||(this._typeSpecificParser={}),this._typeSpecificParser[e]=t}function s(e){return this._typeSpecificParser&&this._typeSpecificParser[e]}function c(e){var t=new DOMParser;return t.parseFromString(e,"application/xml")}function l(){if(!p){var e=d.getLogger();p=e.child({childName:"model-parser"})}return p}function u(){var e=Object.create(g);return e.setParser("widget",h),e.setParser("container",h),e}var p,f=e("./helpers"),h=e("./widget"),d=e("../../../util/logger-factory"),g={parse:n,parseList:i,setParser:a,getParser:s,_parseXmlItemModel:o};t.exports={createInstance:u}},{"../../../util/logger-factory":153,"./helpers":139,"./widget":142}],142:[function(e,t,r){"use strict";function n(e){var t=f(e),r=t.preferencesDict,o={content:a(r),description:r.description,icons:h.parseIcons(r),title:r.title};d.assignIfExists(o,"width",d.parseInt(r.width,10)),d.assignIfExists(o,"height",d.parseInt(r.height,10)),d.assignIfExists(o,"isManageableArea",d.parseBool(r.isManageableArea)),d.assignIfExists(o,"viewmodes",c(r)),d.assignIfExists(o,"author",r.author),d.assignIfExists(o,"authorEmail",r.authorEmail),d.assignIfExists(o,"authorHref",r.authorHref),d.assignIfExists(o,"version",r.version),d.assignIfExists(o,"license",r.license),d.assignIfExists(o,"licenseHref",r.licenseHref),o.altContent=s(t);var l=i(t);Object.keys(l).length>0&&(o.datasources=l);var u=h.parseChildren(e,n);return(u||[]).length>0&&(o.children=u),delete t.preferencesDict,p(t,o)}function i(e){var t=e.preferences,r=Object.keys(t);return r.map(function(e){return t[e]}).filter(function(e){return"datasource"===e.type}).reduce(function(e,t){var r=o(t.value);return r.uri&&(r.name=t.name,e[t.name]=r),e},{})}function o(e){var t={};if(e){var r,n=l();try{r=m.parse(e,!0),t.params=Object.keys(r.query).map(function(e){return{name:e,value:r.query[e]}}),t.uri=t.params.length>0?e.slice(0,e.indexOf("?")):e}catch(i){n.error(i)}}return t}function a(e){var t={src:"",type:"text/html",encoding:"UTF-8"};return d.assignIfExists(t,"src",e.src),d.assignIfExists(t,"config",e.config),t}function s(e){var t=e.preferences,r=Object.keys(t),n=r.filter(function(e){return/^src\..*/.test(e)}),i=n.reduce(function(e,r){var n=t[r].value,i=r.replace(/^src\./,"");return e[i]={src:n,encoding:"UTF-8"},e},{});return n.forEach(function(t){delete e.preferences[t]}),i}function c(e){var t=e.viewmodes;return t?t.split(/\s+/).filter(function(e){return e.trim().length>0}):[]}function l(){if(!u){var e=g.getLogger();u=e.child({childName:"xml-widget-parser"})}return u}var u,p=e("../../../util/util").merge,f=e("./item"),h=e("./common"),d=e("./helpers"),g=e("../../../util/logger-factory"),m=e("url");t.exports=n},{"../../../util/logger-factory":153,"../../../util/util":155,"./common":137,"./helpers":139,"./item":140,url:243}],143:[function(e,t,r){"use strict";var n=e("../../fetch/filtering-fetch"),i=e("../../core/config-reader"),o=e("../../util/verror"),a=e("../../util/logger-factory"),s=e("../../util/response-helpers"),c=function(e){e=e||{},this.log=a.getLogger(),this.useCache="boolean"==typeof e.useCache?e.useCache:!0,this.responseCache={}};c.prototype=Object.create(i.prototype),c.prototype.read=function(e){var t=this,r=this.log;return r.debug("Making http request for widget config to [%s]...",e),this.responseCache[e]?(this.log.debug("Using cached response for [%s]",e),this.responseCache[e]):n(e).then(function(t){return r.debug("Response received for [%s]. Status: %s.",e,t.status),s.isResponseOk(t)?Promise.resolve(t):Promise.reject(s.createError(t))}).then(function(e){return e.text()}).then(function(n){return r.trace("Received config:\n%s",n),t.useCache&&(t.responseCache[e]=n),n})["catch"](function(t){throw new o(t,"Failed to XHR get from "+e)})},t.exports=c},{"../../core/config-reader":102,"../../fetch/filtering-fetch":119,"../../util/logger-factory":153,"../../util/response-helpers":154,"../../util/verror":156}],144:[function(e,t,r){(function(r){"use strict";var n=e("../../util/verror"),i=e("./seamless/start-file-processor"),o=e("../../fetch/filtering-fetch"),a=e("../../util/logger-factory"),s=e("../../util/util"),c=e("../../core/widget-renderer"),l=e("../../util/response-helpers"),u=function(e,t,r){if("undefined"==typeof DOMParser)throw new Error("DOMParser is not shimmed or a native object. This renderer will not work");this._domParser=new DOMParser,this.widgetEl=null,this.areaMap=null,this.preprocessorMap={},this.log=a.getLogger(),this._datasourceResolverFactory=t,this.widgetContainerEl=e,this.opts=r||{},this.configVars=this.opts.configVars||{},this.parsingFormat=this.opts.parsingFormat||null,this.useFolderLocalization=this.opts.useFolderLocalization||!1};u.prototype=Object.create(c.prototype),u.prototype.render=function(e,t){var r,i=this;if(this.isRendered())r=Promise.resolve(i.process(e,t,null));else{var o=[];o.push(this._fetchStartFile(e).then(function(e){return{name:"startFile",data:e}}));var a=e.preferences.messages&&e.preferences.messages.value,c=e.preferences.options&&e.preferences.options.value;a&&o.push(this._fetchStaticJSON(a).then(function(e){return{name:"messages",data:e}})),c&&o.push(this._fetchStaticJSON(c).then(function(e){return{name:"options",data:e}}));var l=Object.keys(e.datasources||{}).map(function(t){return e.datasources[t]});if(l.length>0){var p=u._buildDatasourceContext(e,t,i.configVars),f=l.map(function(e){return i._fetchDatasource(e,p).then(function(e){return e})});o=o.concat(f)}r=Promise.all(o).then(function(t){var r,n,o,a=t.map(function(e){if("startFile"===e.name)r=e.data;else if("messages"===e.name)n=e.data;else{if("options"!==e.name)return e;o=e.data}}).filter(function(e){return e}).reduce(function(e,t){return e[t.name]=t.data,e},{}),c=s.merge({},e,{datasources:a}),l={messageBundle:n,optionsBundle:o};return i.preprocess(e,r,c,l)}).then(function(r){return i.process(e,t,r)})["catch"](function(t){throw new n(t,"The widget ["+e.name+"] could not be rendered:\n	"+t.message)})}return r.then(function(){return i.postprocess(e,t)})},u.prototype.preprocess=function(e,t,r,n){var i=e.content.type;if(t&&this.preprocessorMap.hasOwnProperty(i)){var o=this.preprocessorMap[i];return this.log.debug("Applying preprocessor for [%s] for [%s (%s)] ",o.name,e.content.src,i),o.process(e,t,r,n)}return t},u.prototype._fetchStartFile=function(e){var t=this.log;return t.debug("Starting HTML5 seamless rendering..."),t.debug("Requesting start file [%s] ...",e.content.src),o(e.content.src).then(function(e){if(t.debug("Start file request resolved/ Status: %s",e.status),l.isResponseOk(e))return e.text();var r=l.createError(e);throw r.code=e.status,r}).then(function(e){return t.trace("Received HTML\n: %s",e),e})["catch"](function(t){var r=new n(t,"Failed to fetch: "+e.content.src);throw 404===t.code&&(r.code="STARTFILE_NOT_FOUND"),r})},u.prototype.process=function(e,t,n){var o,a=this.startFileProcessor=new i({document:document,configVars:this.configVars,log:this.log,startFileSrc:e.content.src});if(n){var s=this._domParser.parseFromString(n,"text/html");s=a.aggregateStylesheets(e,s),s=a.normalizeMediaUrls(e,s);var c=a.collateInvokableScripts(e,s);o=a.createWidgetRootNode(e,s),o=a.setDimensions(e,o),a.prepareScripts(e,o,c),this.widgetContainerEl.appendChild(o)}else for(var l=0;l<this.widgetContainerEl.children.length;l++)if(this.widgetContainerEl.children[l].hasAttribute("data-widget")){o=this.widgetContainerEl.children[l];break}Object.defineProperty(t,"body",{enumerable:!0,writable:!!this.configVars.compat,value:o}),r.cxp&&(r.cxp._widgets=r.cxp._widgets||{},r.cxp._widgets[e.id]=t),this.widgetEl=o},u.prototype.postprocess=function(e,t){return this.startFileProcessor.invokeScripts(e,t,this.widgetEl)},u.prototype.getWidgetNode=function(){return this.widgetEl||null},u.prototype.getParentNode=function(){return this.widgetContainerEl||null},u.prototype.setParentNode=function(e){this.widgetContainerEl=e},u.prototype.getWidth=function(){return this.getWidgetNode()?this.getWidgetNode().offsetWidth:"auto"},u.prototype.getHeight=function(){return this.getWidgetNode()?this.getWidgetNode().offsetHeight:"auto"},u.prototype.isRendered=function(){return!!this.widgetContainerEl.innerHTML.trim()},u.prototype.destroy=function(){for(var e=this.widgetEl.getAttribute("data-widget"),t=this.widgetEl.parentElement,n=null;t;){var i=t.getAttribute("data-chrome");if(i===e){n=t;break}t=t.parentElement}this.startFileProcessor.removeInlineScripts(this.widgetEl.id,this.widgetEl),n&&n.parentElement?n.parentElement.removeChild(n):this.widgetEl.parentElement&&this.widgetEl.parentElement.removeChild(this.widgetEl),r.cxp&&r.cxp._widgets&&this.widgetEl.id&&delete r.cxp._widgets[this.widgetEl.id],this.widgetEl=null},u.prototype.getAreaNodes=function(){var e=this;if(!this.areaMap){var t="data-area",r="["+t+"]",n=this.widgetEl.querySelectorAll(r);this.areaMap=Array.prototype.slice.call(n).filter(function(t){return s.ensureElementBelongsToItem(e.widgetEl.getAttribute("data-widget"),t)}).reduce(function(e,r){var n=r.getAttribute(t);return e[n]=r,e},{})}return this.areaMap},u.prototype.addPreprocessor=function(e,t){if(this.preprocessorMap.hasOwnProperty(e)){var r=this.preprocessorMap[e].name;this.log.warn("Overriding a previously added preprocessor [%s] for the mime type [%s]",r,e)}t.name=t.name||"Anonymous preprocessor",this.log.debug("Adding the preprocessor [%s] for start files with the mime type [%s]",t.name,e),this.preprocessorMap[e]=t},u.prototype._fetchStaticJSON=function(e){var t=this;return o(e).then(function(e){var r=e.json();return t.log.trace("Fetched JSON file:\n%s",r),r})},u.prototype._fetchDatasource=function(e,t){var r=this,n=e.name,i=r._datasourceResolverFactory.getResolver(e);return i.loadData(t).then(function(e){return r.log.trace("Fetched datasource [%s]:\n%s",n,e),{name:n,data:e}})["catch"](function(e){return r.log.error("Datasource [%s] fetch failed.",n,e),{name:n,error:e}})},u._buildDatasourceContext=function(e,t,r){var n={itemRoot:t.baseURI};return s.merge({},r,n,e)},t.exports=u}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../core/widget-renderer":107,"../../fetch/filtering-fetch":119,"../../util/logger-factory":153,"../../util/response-helpers":154,"../../util/util":155,"../../util/verror":156,"./seamless/start-file-processor":147}],145:[function(require,module,exports){"use strict";var Handlebars=require("handlebars/dist/handlebars.min"),HandlebarsHelpers=require("handlebars-helpers"),VError=require("../../../util/verror"),loggerFactory=require("../../../util/logger-factory"),i18n=require("../../../util/i18n"),HandlebarsIntl=require("../../../util/handlebars-intl-decorator"),HandlebarsPreprocessor=function(e){this.name="Handlebars Preprocessor",this.log=loggerFactory.getLogger(),this.dataObj={cxpConfig:e||{}},this.templateCache={},this.hbs=Handlebars.create();var t=HandlebarsPreprocessor.cxpHelpers;for(var r in t)t.hasOwnProperty(r)&&this.hbs.registerHelper(r,t[r]);i18n.intlSupported?HandlebarsIntl.registerWith(this.hbs):this.log.warn("The ECMAScript Internationalization API is not supported on this platform. Some i18n related features will fail.")};HandlebarsPreprocessor.prototype.process=function(widgetModel,startFileContent,context,additionalOptions){var log=this.log,errMessage,templateKey=widgetModel.content.src,template=this.templateCache[templateKey];if(!template){if(widgetModel.content.type&&"application/x-handlebars-template"===widgetModel.content.type){var precompiledTemplate=null;try{eval("precompiledTemplate = "+startFileContent),template=this.hbs.template(precompiledTemplate)}catch(err){throw errMessage='There was a problem evaluating a pre-compiled handlebars template. Ensure it was compiled using the simple option.E.g. "handlebars index.handlebars -s -f index.js"',this.log.error(err,errMessage),new VError(err,errMessage)}}else{log.debug("Compiling handlebars template instance for %s",templateKey);try{template=this.hbs.compile(startFileContent)}catch(err){throw errMessage="There was a problem compiling a handlebars template",this.log.error(err,errMessage),new VError(err,errMessage)}}this.templateCache[templateKey]=template}if(additionalOptions&&additionalOptions.messageBundle){var messages=additionalOptions.messageBundle.messages||{},formats=additionalOptions.messageBundle.formats||{},availableLocales=Object.keys(messages),bestFitLocale=i18n.chooseBestLocale(availableLocales,widgetModel.locale);this.dataObj.intl=messages[bestFitLocale]||messages[i18n.defaultLocale]||{},this.dataObj.intl.locales&&this.log.warn('"locales" is a reserved key. It will be overridden'),this.dataObj.intl.locales=widgetModel.locale===i18n.defaultLocale?widgetModel.locale:[widgetModel.locale,i18n.defaultLocale],this.dataObj.intl.formats&&this.log.warn('"formats" is a reserved key. It will be overridden'),this.dataObj.intl.formats=formats}additionalOptions&&additionalOptions.optionsBundle&&(this.dataObj.options=additionalOptions.optionsBundle.options||{});var result;try{result=template(context,{data:this.dataObj}),log.trace("Using compiled Handlebars start file for %s:\n%s",templateKey,result)}catch(err){throw log.error(err,"A handlebars template [%s] could not be processed:\n	%s",templateKey,err.message),err}return result},HandlebarsPreprocessor.prototype.registerHelper=function(e,t){this.hbs.registerHelper(e,t)},HandlebarsPreprocessor.prototype.registerPartial=function(e,t){this.hbs.registerPartial(e,t)},HandlebarsPreprocessor.cxpHelpers=HandlebarsHelpers,module.exports=HandlebarsPreprocessor},{"../../../util/handlebars-intl-decorator":151,"../../../util/i18n":152,"../../../util/logger-factory":153,"../../../util/verror":156,"handlebars-helpers":3,"handlebars/dist/handlebars.min":27}],146:[function(e,t,r){"use strict";function n(){this._initilized=!1,this._allLoadingPromises={}}var i,o=e("promise-extensions")(Promise);t.exports=function(){return i||(i=new n),i},n.prototype._init=function(){this._initilized||(this.head=document.getElementsByTagName("head")[0]||document.documentElement,this.asyncSupported="undefined"!=typeof document.createElement("script").async,this._prepopulateLoadedCache(),this._initilized=!0)},n.prototype._prepopulateLoadedCache=function(){var e=this,t=Array.prototype.slice.call(document.getElementsByTagName("link"));t.forEach(function(t){var r=t.getAttribute("href"),n="stylesheet"===t.rel&&r;n&&e._addToCache(r,r)});var r=Array.prototype.slice.call(document.getElementsByTagName("script"));r.forEach(function(t){var r=t.getAttribute("src"),n=!t.innerHTML&&r;!n||t.async||e._getFromCache(r)||e._addToCache(r,Promise.resolve(r))})},n.prototype._normalizeKey=function(e){var t=decodeURI(e);return t.replace(/(?:features|widgets|containers|pages|templates)\/\[BBHOST\]/gi,"items")},n.prototype._addToCache=function(e,t){if(e){var r=this._normalizeKey(e);this._allLoadingPromises[r]=t}},n.prototype._getFromCache=function(e){if(e){var t=this._normalizeKey(e);return this._allLoadingPromises[t]}},n.prototype.loadScripts=function(e){return e instanceof Array||(e=[e]),this._init(),this.asyncSupported?this._loadScriptsAsync(e):this._loadScriptsSync(e)},n.prototype._loadScriptsAsync=function(e){var t=this,r=e.map(function(e){var r=e.src,n=t._getFromCache(r);if(!n){var i={async:!1},o=e.attributes||{},a={src:r};o.nonce&&(a.nonce=o.nonce);var s=t._createScriptElement(a,i);n=t._createScriptPromise(s),t._addToCache(r,n),t.head.insertBefore(s,t.head.firstChild)}return n});return o.settleAll(r)},n.prototype._loadScriptsSync=function(e){function t(e){return e.element&&r.head.insertBefore(e.element,r.head.firstChild),e.promise}var r=this,n=e.map(function(e){var t,n=e.src,i=r._getFromCache(n);if(!i){var o=e.attributes||{},a={src:n};o.nonce&&(a.nonce=o.nonce),t=r._createScriptElement(a),i=r._createScriptPromise(t),r._addToCache(n,i)}return{element:t,promise:i}}),i=n.map(function(e){return e.promise}),a=Promise.resolve(t(n[0]||{})),s=n.slice(1).reduce(function(e,r){var n=t.bind(null,r);return e.then(n,n)},a);return s["catch"](function(){}),o.settleAll(i)},n.prototype._createScriptElement=function(e,t){var r=Object.keys(e||{}).reduce(function(t,r){return t.setAttribute(r,e[r]),t},document.createElement("script"));return t&&Object.assign(r,t),r},n.prototype._createScriptPromise=function(e){var t=e.src;return new Promise(function(r,n){e.onload=function(){r(t)},e.onerror=function(){n(t)}})},n.prototype.loadCss=function(e){e instanceof Array||(e=[e]),this._init();var t=this,r=t.head,n=[];return e.forEach(function(e){var i=t._getFromCache(e);if(i)n.push(i);else{var o=document.createElement("link");o.setAttribute("rel","stylesheet"),o.setAttribute("type","text/css"),o.setAttribute("href",e);var a=Promise.resolve(e);t._addToCache(e,a),n.push(a);var s=Array.prototype.slice.call(r.getElementsByTagName("link")).filter(function(e){return"stylesheet"===e.rel});if(s.length){var c=s.pop();c.parentNode.insertBefore(o,c.nextSibling)}else r.insertBefore(o,r.firstChild)}}),Promise.all(n)}},{"promise-extensions":99}],147:[function(e,t,r){(function(r){"use strict";function n(e){e=e||{},this.log=e.log||null,this.documentContext=e.document,this.configVars=e.configVars||{},this.startFileSrc=e.startFileSrc||"",this._scriptKeySuffix=""}var i,o=e("../../../util/util"),a=e("url"),s=e("./resource-loader")(),c=e("../../../util/verror");r.location&&(i=r.location.pathname),n.prototype.aggregateStylesheets=function(e,t){function r(t){var r=t.getAttribute("href"),n=i._normalizeResourceUrl(r,e);o.push(n)}function n(){s.loadCss(o),o=[]}var i=this,o=[],a=t.querySelectorAll(" head > style, head > link[rel=stylesheet]");return Array.prototype.slice.call(a).forEach(function(e){"style"===e.tagName.toLowerCase()?(n(),i.documentContext.head.appendChild(e)):e.getAttribute("href")&&r(e)}),n(),t},n.prototype.collateInvokableScripts=function(e,t){var r=this,n=t.getElementsByTagName("script"),i=Array.prototype.slice.call(n).reduce(function(t,n){if(!n.type||"text/javascript"===n.type){var i=n.innerHTML,o=n.getAttribute("src");i?t.push({content:i}):o&&t.push({src:r._normalizeResourceUrl(o,e)}),n.parentNode.removeChild(n)}return t},[]),o=t.getElementsByTagName("body")[0],a=o.getAttribute("onload");return a&&i.push({content:a}),i},n.prototype.normalizeMediaUrls=function(e,t){var r=this,n=t.getElementsByTagName("img");return Array.prototype.slice.call(n).forEach(function(t){var n=t.getAttribute("src");if(n){var i=r._normalizeResourceUrl(n,e);t.getAttribute("src")!==i&&(t.src=i)}}),t},n.prototype.createWidgetRootNode=function(e,t){var r=this.documentContext.createElement("div");r.id=e.id,r.setAttribute("data-widget",e.name);for(var n=t.getElementsByTagName("body")[0],i=0;i<n.attributes.length;i++){var o=n.attributes[i];o.specified&&"onload"!==o.name&&"id"!==o.name&&r.setAttribute(o.name,o.value)}return r.innerHTML=n.innerHTML,r},n.prototype.setDimensions=function(e,t){function r(r){e[r]&&!isNaN(parseInt(e[r]))&&(t.style[r]=parseInt(e[r])+"px",n.log.debug("Widget %s set to %s.",r,t.style[r]))}var n=this;return r("width"),r("height"),t},n.prototype.prepareScripts=function(e,t,n){var i=this;this._scriptKeySuffix="_"+this.startFileSrc;var o=this._getScriptKey(e.id);return r.cxp=r.cxp||{},r.cxp.scripts=r.cxp.scripts||{},r.cxp.scripts[o]=[],n.forEach(function(e){var r=i.configVars.cspNonce,n=i.documentContext.createElement("script");if(r&&n.setAttribute("nonce",r),e.content){var a="cxp.scripts['"+o+"'].push(function(widget, __GADGET__,  __WIDGET__) { ",s=" });";n.innerHTML=a+e.content+s,n.setAttribute("data-cxp-script",o),i.documentContext.body.appendChild(n)}else n.setAttribute("data-src",e.src),t.appendChild(n)}),t},n.prototype.removeInlineScripts=function(e){var t=this._getScriptKey(e);r.cxp.scripts=r.cxp.scripts||{},delete r.cxp.scripts.scriptKey;var n=this.documentContext.querySelectorAll("script[data-cxp-script='"+t+"']");Array.prototype.slice.call(n).forEach(function(e){e.parentElement.removeChild(e)})},n.prototype.invokeScripts=function(e,t,n){var i=this,a=this.log,l=e.name,u="data-src",p="script[data-src]",f=n.querySelectorAll(p),h=Array.prototype.slice.call(f).filter(function(e){return o.ensureElementBelongsToItem(l,e)}).map(function(t){var r=[].slice.call(t.attributes).filter(function(e){return e.name!==u}).reduce(function(e,t){return e[t.name]=t.value,e},{}),n=t.getAttribute(u);return{src:i._normalizeResourceUrl(n,e),attributes:r}});return s.loadScripts(h).then(function(n){a.debug("JS resources have loaded.");var o=[];if(n){var s=n.filter(function(e){var t=e.isRejected();return t&&o.push(e.reason)}).length;s>0&&a.warn("%s scripts failed to load:\n%s",s,o.join(", "))}var c=i._getScriptKey(e.id);if(r.cxp&&r.cxp.scripts&&Array.isArray(r.cxp.scripts[c]))try{r.cxp.scripts[c].forEach(function(e){"function"==typeof e&&e.call(null,t,t,t)})}catch(l){a.warn('Failed to invoke inline scripts for widget "%s".\n%s',e.name,l)}})["catch"](function(e){throw new c(e,"Failed to render HTML5 seamless widget")})},n.prototype._normalizeResourceUrl=function(e,t){if(e=o.replacePathVars(e,this.configVars,this.log),o.isUrlDocumentRelative(e)){var r=t.content.src,n=r.substring(0,r.lastIndexOf("/")+1);if(o.isUrlDocumentRelative(r)){var s=i.substring(0,i.lastIndexOf("/")+1);n=a.resolve(s,n)}e=a.resolve(n,e)}return e},n.prototype._getScriptKey=function(e){return e+this._scriptKeySuffix},t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../util/util":155,"../../../util/verror":156,"./resource-loader":146,url:243}],148:[function(e,t,r){"use strict";function n(){i.call(this,window.localStorage)}var i=e("./web-storage-decorator");n.prototype=Object.create(i.prototype),t.exports=n},{"./web-storage-decorator":150}],149:[function(e,t,r){"use strict";function n(e){this.type=e}var i=e("../../util/util");n.prototype.initStorageEvent=function(e,t,r,n,i,o,a,s){this.type=e,this.canBubble=t,this.cancellable=r,this.key=n,this.oldValue=i,this.newValue=o,this.url=a,this.storageArea=s},n.prototype.toString=function(){return i.format("[object StorageEvent] (key=%s, oldValue=%s, newValue=%s, url=%s)",this.key,this.oldValue,this.newValue,this.url)},t.exports=n},{"../../util/util":155}],150:[function(e,t,r){(function(r){"use strict";function n(e){this.eventTarget=[],this.log=i.getLogger(),this._items=[],this._storage=e,this._prefix="",this._eventsEnabled=!1;var t=this;Object.defineProperty(this,"length",{enumerable:!1,configurable:!1,get:function(){return Object.keys(t._items).length}})}var i=e("../../util/logger-factory"),o=e("browser-bunyan"),a=e("../../core/widget-storage"),s=e("../../util/verror"),c=e("./storage-event"),l=e("../../util/util");n.prototype=Object.create(a.prototype),n.prototype.init=function(e,t){var r=this,n=this.log;this._prefix=e||"",n.debug("Initializing preference storage for widget [%s]",e),n.debug("Using internal storage [%s]",this._storage.toString()),n.level()<=o.TRACE&&n.trace("Initializing storage with the following preferences:\n %s",JSON.stringify(t)),t&&(this._items=Object.keys(t).map(function(e){return r.defineItem(t[e])})),this._eventsEnabled=!0},n.prototype.getItem=function(e){var t=this._storage.getItem(this._prefix+e);if("undefined"==typeof t||null===t){var r=this._getItemDefinition(e)||null;t=r?r.value:null}return"undefined"==typeof t&&(t=null),this.log.trace("Getting preference [%s=%s]",e,t),t},n.prototype.defineItem=function(e){var t=this,r=e.name;this._items.push(e);var n={enumerable:!0,configurable:!0,get:function(){return t.getItem(r)},set:function(e){return t.setItem(t._prefix+r,e)}};return Object.defineProperty(this,r,n),e},n.prototype.setItem=function(e,t,r){return this._ensureItemWritable(e),this.log.debug("Setting preference to storage [%s=%s]",e,t),null===t?this.removeItem(e):(this._notify(e,this.getItem(e),t),this._storage.setItem(this._prefix+e,t,r))},n.prototype.removeItem=function(e){return this._notify(e,this.getItem(e),null),this.log.debug("Removing preference from storage [%s]",e),this._storage.removeItem(this._prefix+e)},n.prototype.clear=function(){var e=this;this._notify(null,null,null),this.log.debug("Clearing preferences"),this._eventsEnabled=!1,Object.keys(this._storage).filter(function(t){return 0===t.indexOf(e._prefix)}).forEach(function(t){e.removeItem(t.substr(e.prefix.length))}),this._eventsEnabled=!0},n.prototype.key=function(e){return this._items[e]?this._items[e].name:null},n.prototype.keys=function(){var e=this,t=Object.keys(this._storage).filter(function(t){return 0===t.indexOf(e._prefix)});return 0===t.length?[]:t.map(function(t){return t.slice(e._prefix.length)})},n.prototype._getItemDefinition=function(e){var t=this._items.filter(function(t){return e===t.name})[0];return t||null},n.prototype._notify=function(e,t,n){if(this._eventsEnabled){var i=this,a=Array.isArray(this.eventTarget)?this.eventTarget:[this.eventTarget];a.filter(function(e){return void 0!==e&&null!==e}).forEach(function(a){if("function"!=typeof a.dispatchEvent){var s="Cannot dispatch StorageEvent for preferences. An event target was provided, but it does not implement the EventTarget interface. [%s, %s, %s]";return void i.log.warn(s,e,t,n)}var l=new c("storage");l.initStorageEvent("storage",!1,!1,e,t,n,i._prefix,i),r.nextTick(function(){i.log.level()<=o.DEBUG&&i.log.debug("Sending StorageEvent [%s] ",l),a.dispatchEvent(l)})})}},n.prototype._ensureItemWritable=function(e){var t=this._getItemDefinition(e);if(t&&t.readonly){var r=l.format("Attempted to modify readonly preference [%s]",e);throw this.log.warn(r),new s(r)}},t.exports=n}).call(this,e("_process"))},{"../../core/widget-storage":108,"../../util/logger-factory":153,"../../util/util":155,"../../util/verror":156,"./storage-event":149,_process:238,"browser-bunyan":2}],151:[function(e,t,r){"use strict";function n(e){var t=i.create(),r={};if(t.registerHelper=function(e,t){"string"==typeof e?r[e]=t:Object.keys(e).forEach(function(t){r[t]=e[t]})},o.registerWith(t),r.formatNumber){var n=r.formatNumber;r.formatNumber=function(e){var t=[].slice.call(arguments);return t[0]=Number(e),n.apply(this,t)}}e.registerHelper(r)}var i=e("handlebars/dist/handlebars.min"),o=e("handlebars-intl");t.exports={registerWith:n}},{"handlebars-intl":4,"handlebars/dist/handlebars.min":27}],152:[function(e,t,r){(function(e){"use strict";var r=["ar","iw","he","dv","ha","fa","ps","ur","yi","ji"];t.exports={defaultLocale:"en",intlSupported:"undefined"!=typeof e.Intl,getDirection:function(e){return e.length>=2&&r.indexOf(e.substr(0,2))>=0?"rtl":"ltr"},chooseBestLocale:function(e,t){for(var r=t;r;){if(Array.prototype.indexOf.call(e,r)>-1)return r;var n=r.lastIndexOf("-");if(0>n)return;n>=2&&"-"===r.charAt(n-2)&&(n-=2),r=r.substring(0,n)}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],153:[function(e,t,r){"use strict";var n=e("browser-bunyan"),i=e("../util/util"),o={},a=null,s={defaultLoggerName:"logger",defaultLogLevel:"info"};s.createLogger=function(e){e=e||{};var t=e.parentLog||null,r=e.loggerName||this.defaultLoggerName,s=e.logLevel||this.defaultLogLevel,c=e.appendId||!1;c&&(r+="/"+i.randomId());var l;return l=t?t.child({childName:r}):n.createLogger({name:r,streams:[{
level:s,stream:new n.ConsoleFormattedStream,type:"raw"}],src:n.resolveLevel(s)<=n.DEBUG}),o[r]=l,a=l,l},s.getLogger=function(e){return e&&o[e]?o[e]:a?a:s.createLogger()},t.exports=s},{"../util/util":155,"browser-bunyan":2}],154:[function(e,t,r){"use strict";function n(e){if("boolean"==typeof e.ok)return e.ok;var t=e.status;return t>=200&&299>=t}function i(e){var t=e.statusText||"Response status "+(e.status||"unknown");return new Error(t)}t.exports={isResponseOk:n,createError:i}},{}],155:[function(e,t,r){(function(r){"use strict";var n=e("browser-bunyan"),i={cloneDeep:e("lodash/lang/cloneDeep"),merge:e("lodash/object/merge"),omit:e("lodash/object/omit"),assign:e("lodash/object/assign")},o={};o.parseBoolean=function(e){return("boolean"==typeof e||e instanceof Boolean)&&1==e||("string"==typeof e||e instanceof String)&&/^\s*true\s*$/i.test(e)||("number"==typeof e||e instanceof Number)&&0!=e},o.isUrlAbsolute=function(e){var t=/^https?:\/\/|file?:\/\//i;return t.test(e)},o.isUrlSiteRelative=function(e){return 0===e.indexOf("/")},o.isUrlDocumentRelative=function(e){return!(o.isUrlAbsolute(e)||o.isUrlSiteRelative(e))},o.isRunningOnFilesystem=function(){return"undefined"!=typeof r.location&&"file:"===r.location.protocol},o.isUrlForFile=function(e){var t=/^file:/.test(e),r=o.isRunningOnFilesystem()&&o.isUrlDocumentRelative(e);return t||r},o.merge=i.merge,o.assign=i.assign,o.omit=i.omit,o.startsWith=function(e,t,r){return r=r||0,e.substr(r,t.length)===t},o.endsWith=function(e,t,r){if(String.prototype.endsWith)return e.endsWith(t,r);var n=e.toString();("number"!=typeof r||!isFinite(r)||Math.floor(r)!==r||r>n.length)&&(r=n.length),r-=t.length;var i=n.indexOf(t,r);return-1!==i&&i===r},o.cloneDeep=function(){try{return i.cloneDeep.apply(i,Array.prototype.slice.call(arguments))}catch(e){throw console.warn(e),e}},o.isArray=i.isArray,o.format=function(e){if(null===e)return"null";if("string"!=typeof e)return e.toString();for(var t=/%[sdj%]/g,r=1,n=arguments,i=n.length,o=String(e).replace(t,function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return e}}),a=n[r];i>r;a=n[++r])o+=" "+a;return o},o.getDescendantLocales=function(e){e=e.toLowerCase();for(var t,r=[],n=e.split("-");t=n.shift();){var i=r[r.length-1];r.push((i?i+"-":"")+t)}return r},o.randomId=function(){return Math.random().toString(36).substring(7)},o.replacePathVars=function(e,t,r){for(var i in t)if(t.hasOwnProperty(i)){var o=new RegExp("\\$\\("+i+"\\)","g");r&&r.level()<=n.DEBUG&&o.test(e)&&r.debug("Updating resource url. Replacing %s for %s in [%s]",o,t[i],e),e=e.replace(o,t[i])}return e},o.getContentBodyAndTypeFromResponse=function(e){return e.text().then(function(t){t=t.trim();var r=e.headers.get("content-type"),n=null,i=null;if(r&&-1!==r.indexOf("/json")?n="json":r&&-1!==r.indexOf("text/html")?n="html":"string"==typeof r&&r.length>0?i=new Error("Content type not supported for rendering: "+r):t&&o.startsWith(t,"{")?n="json":t&&o.startsWith(t,"<")?n="html":i=new Error("Undefined content type for response."),i)throw i;return{type:n,body:"json"===n?JSON.parse(t):t}})},o.ensureElementBelongsToItem=function(e,t){if(!e||!t)return!1;for(var r,n=t;n;){if(r="function"==typeof n.getAttribute?n.getAttribute("data-widget"):null)return r===e;n=n.parentNode}return!1},o.cloneWidgetInstance=function(e){var t=this.cloneDeep(e),r=Object.getOwnPropertyNames(e).reduce(function(t,r){var n=Object.getOwnPropertyDescriptor(e,r);return n.enumerable||(t[r]=n),t},{});return Object.defineProperties(t,r),t},t.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"browser-bunyan":2,"lodash/lang/cloneDeep":84,"lodash/object/assign":93,"lodash/object/merge":96,"lodash/object/omit":97}],156:[function(e,t,r){function n(e){var t,r,i,o,a;return this instanceof n?(e instanceof Error||"object"==typeof e?t=Array.prototype.slice.call(arguments,1):(t=Array.prototype.slice.call(arguments,0),e=void 0),e&&e.strict||(t=t.map(function(e){return null===e?"null":void 0===e?"undefined":e})),a=t.length>0?t.join("; "):"",this.jse_shortmsg=a,this.jse_summary=a,e&&(i=e.cause,i&&e.cause instanceof Error||(i=e),i&&i instanceof Error&&(this.jse_cause=i,this.jse_summary+=": "+i.message)),this.message=this.jse_summary,Error.call(this,this.jse_summary),Error.captureStackTrace&&(o=e?e.constructorOpt:void 0,o=o||arguments.callee,Error.captureStackTrace(this,o)),this):(t=Array.prototype.slice.call(arguments,0),r=Object.create(n.prototype),n.apply(r,arguments),r)}n.prototype=Error.prototype,n.prototype.name="Widget Error",n.prototype.toString=function(){var e=this.hasOwnProperty("name")&&this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(e+=": "+this.message),e},n.prototype.cause=function(){return this.jse_cause},n.prototype.hasCode=function(e){if(!e)return!1;var t="[object Array]"!==Object.prototype.toString.call(e)?[e]:e;if(0===t.length)return!1;for(var r=this,n=!1;r;){if(r.code&&t.indexOf(r.code)>-1){n=!0;break}r=r.cause()}return n},t.exports=n},{}],157:[function(e,t,r){arguments[4][2][0].apply(r,arguments)},{dup:2}],158:[function(e,t,r){arguments[4][3][0].apply(r,arguments)},{dup:3,"handlebars/dist/handlebars.min":159}],159:[function(e,t,r){arguments[4][27][0].apply(r,arguments)},{dup:27}],160:[function(e,t,r){arguments[4][27][0].apply(r,arguments)},{dup:27}],161:[function(e,t,r){arguments[4][43][0].apply(r,arguments)},{dup:43}],162:[function(e,t,r){arguments[4][45][0].apply(r,arguments)},{dup:45}],163:[function(e,t,r){arguments[4][46][0].apply(r,arguments)},{dup:46}],164:[function(e,t,r){arguments[4][50][0].apply(r,arguments)},{"../object/keys":198,"./baseCopy":166,dup:50}],165:[function(e,t,r){arguments[4][51][0].apply(r,arguments)},{"../lang/isArray":191,"../lang/isObject":194,"./arrayCopy":162,"./arrayEach":163,"./baseAssign":164,"./baseForOwn":169,"./initCloneArray":179,"./initCloneByTag":180,"./initCloneObject":181,dup:51}],166:[function(e,t,r){arguments[4][52][0].apply(r,arguments)},{dup:52}],167:[function(e,t,r){arguments[4][55][0].apply(r,arguments)},{"./createBaseFor":176,dup:55}],168:[function(e,t,r){arguments[4][56][0].apply(r,arguments)},{"../object/keysIn":199,"./baseFor":167,dup:56}],169:[function(e,t,r){arguments[4][57][0].apply(r,arguments)},{"../object/keys":198,"./baseFor":167,dup:57}],170:[function(e,t,r){arguments[4][59][0].apply(r,arguments)},{"../lang/isArray":191,"../lang/isObject":194,"../lang/isTypedArray":196,"../object/keys":198,"./arrayEach":163,"./baseMergeDeep":171,"./isArrayLike":182,"./isObjectLike":186,dup:59}],171:[function(e,t,r){arguments[4][60][0].apply(r,arguments)},{"../lang/isArguments":190,"../lang/isArray":191,"../lang/isPlainObject":195,"../lang/isTypedArray":196,"../lang/toPlainObject":197,"./arrayCopy":162,"./isArrayLike":182,dup:60}],172:[function(e,t,r){arguments[4][61][0].apply(r,arguments)},{dup:61}],173:[function(e,t,r){arguments[4][62][0].apply(r,arguments)},{"../utility/identity":201,dup:62}],174:[function(e,t,r){arguments[4][63][0].apply(r,arguments)},{dup:63}],175:[function(e,t,r){arguments[4][66][0].apply(r,arguments)},{"../function/restParam":161,"./bindCallback":173,"./isIterateeCall":184,dup:66}],176:[function(e,t,r){arguments[4][67][0].apply(r,arguments)},{"./toObject":188,dup:67}],177:[function(e,t,r){arguments[4][69][0].apply(r,arguments)},{"./baseProperty":172,dup:69}],178:[function(e,t,r){arguments[4][70][0].apply(r,arguments)},{"../lang/isNative":193,dup:70}],179:[function(e,t,r){arguments[4][72][0].apply(r,arguments)},{dup:72}],180:[function(e,t,r){arguments[4][73][0].apply(r,arguments)},{"./bufferClone":174,dup:73}],181:[function(e,t,r){arguments[4][74][0].apply(r,arguments)},{dup:74}],182:[function(e,t,r){arguments[4][75][0].apply(r,arguments)},{"./getLength":177,"./isLength":185,dup:75}],183:[function(e,t,r){arguments[4][76][0].apply(r,arguments)},{dup:76}],184:[function(e,t,r){arguments[4][77][0].apply(r,arguments)},{"../lang/isObject":194,"./isArrayLike":182,"./isIndex":183,dup:77}],185:[function(e,t,r){arguments[4][78][0].apply(r,arguments)},{dup:78}],186:[function(e,t,r){arguments[4][79][0].apply(r,arguments)},{dup:79}],187:[function(e,t,r){arguments[4][82][0].apply(r,arguments)},{"../lang/isArguments":190,"../lang/isArray":191,"../object/keysIn":199,"./isIndex":183,"./isLength":185,dup:82}],188:[function(e,t,r){arguments[4][83][0].apply(r,arguments)},{"../lang/isObject":194,dup:83}],189:[function(e,t,r){arguments[4][84][0].apply(r,arguments)},{"../internal/baseClone":165,"../internal/bindCallback":173,dup:84}],190:[function(e,t,r){arguments[4][85][0].apply(r,arguments)},{"../internal/isArrayLike":182,"../internal/isObjectLike":186,dup:85}],191:[function(e,t,r){arguments[4][86][0].apply(r,arguments)},{"../internal/getNative":178,"../internal/isLength":185,"../internal/isObjectLike":186,dup:86}],192:[function(e,t,r){arguments[4][87][0].apply(r,arguments)},{"./isObject":194,dup:87}],193:[function(e,t,r){arguments[4][88][0].apply(r,arguments)},{"../internal/isObjectLike":186,"./isFunction":192,dup:88}],194:[function(e,t,r){arguments[4][89][0].apply(r,arguments)},{dup:89}],195:[function(e,t,r){arguments[4][90][0].apply(r,arguments)},{"../internal/baseForIn":168,"../internal/isObjectLike":186,"./isArguments":190,dup:90}],196:[function(e,t,r){arguments[4][91][0].apply(r,arguments)},{"../internal/isLength":185,"../internal/isObjectLike":186,dup:91}],197:[function(e,t,r){arguments[4][92][0].apply(r,arguments)},{"../internal/baseCopy":166,"../object/keysIn":199,dup:92}],198:[function(e,t,r){arguments[4][94][0].apply(r,arguments)},{"../internal/getNative":178,"../internal/isArrayLike":182,"../internal/shimKeys":187,"../lang/isObject":194,dup:94}],199:[function(e,t,r){arguments[4][95][0].apply(r,arguments)},{"../internal/isIndex":183,"../internal/isLength":185,"../lang/isArguments":190,"../lang/isArray":191,"../lang/isObject":194,dup:95}],200:[function(e,t,r){arguments[4][96][0].apply(r,arguments)},{"../internal/baseMerge":170,"../internal/createAssigner":175,dup:96}],201:[function(e,t,r){arguments[4][98][0].apply(r,arguments)},{dup:98}],202:[function(e,t,r){arguments[4][99][0].apply(r,arguments)},{dup:99}],203:[function(e,t,r){"use strict";function n(e){return new a(e)}var i=e("./cxp-util"),o=e("browser-bunyan"),a=function(e){e=e||{};var t="cxp-web";this.log=e.log?e.log.child({childName:t}):o.createLogger({name:t||"logger",streams:Array.isArray(e.logStreams)?e.logStreams:[{level:e.logLevel||"info",stream:new o.ConsoleFormattedStream,type:"raw"}]}),this.settings={}};a.prototype.util=i,a.prototype.clone=function(){var e=this.settings,t=new a({logLevel:e.logLevel});return t.settings=Object.keys(e).reduce(function(t,r){return t[r]=e[r],t},{}),t},a.prototype.set=function(e,t){this.settings[e]=t},a.prototype.get=function(e){var t=this.settings[e];return"function"==typeof t?t():t},a.prototype.enable=function(e){this.log.warn("CxpConfiguration.enable is deprecated, please use CxpConfiguration.set("+e+", true)"),this.settings[e]=!0},a.prototype.disable=function(e){this.log.warn("CxpConfiguration.disable is deprecated, please use CxpConfiguration.set("+e+", false)"),this.settings[e]=!1},a.prototype.enabled=function(e){return this.log.warn("CxpConfiguration.enabled is deprecated, please use CxpConfiguration.get("+e+")"),!!this.settings[e]},a.prototype.disabled=function(e){return this.log.warn("CxpConfiguration.disabled is deprecated, please use CxpConfiguration.get("+e+")"),!this.settings[e]},a.prototype.getLogger=function(){return this.log},a.prototype.toSerializableObject=function(){var e=["logStreams","storageFactory"];return JSON.parse(JSON.stringify(this.settings,function(t,r){return e.indexOf(t)>-1?void 0:r}))},t.exports={Configuration:a,createInstance:n}},{"./cxp-util":204,"browser-bunyan":157}],204:[function(e,t,r){"use strict";t.exports={getPreference:function(e,t){return e.preferences[t]||null},getPreferenceValue:function(e,t){var r=this.getPreference(e,t);return r?r.value:null}}},{}],205:[function(e,t,r){"use strict";function n(e){this._datasource=e}var i=e("backbase-widget-engine/src/datasource/datasource-resolver"),o=e("backbase-widget-engine/src/datasource/datasource-resolver-helpers");t.exports=n,n.prototype.resolveUrl=function(e){var t=this._datasource.uri,r=t.split(":");if(2!==r.length)throw new Error("Invalid breadcrumb datasource uri: ",t);var n=[].concat(this._datasource.params||[]),i=o.trimSlashes(r[1]);i&&n.push({name:"uuid",value:i});var a=e.apiRoot||"",s=a+"/portal/navigation/breadcrumb",c=o.resolveQueryString(e,n);return c&&(s+="?"+c),s},n.prototype.processResponse=function(e){return e.json()},n.getInstance=i.createFactoryFunction("breadcrumb",n)},{"backbase-widget-engine/src/datasource/datasource-resolver":111,"backbase-widget-engine/src/datasource/datasource-resolver-helpers":110}],206:[function(e,t,r){"use strict";function n(e){this._datasource=e}var i=e("backbase-widget-engine/src/datasource/datasource-resolver"),o=e("backbase-widget-engine/src/datasource/datasource-resolver-helpers"),a=e("backbase-widget-engine/src/util/util"),s="assets";t.exports=n,n.prototype.resolveUrl=function(e){var t=this._datasource.uri,r=t.split(":");if(2!==r.length)throw new Error("Invalid contentrendered datasource uri: ",t);var n=(this._datasource.params||[]).map(function(t){var r=o.resolveParameter(e,t);return"template"===r.name&&(r.name="templateUrl"),r}).filter(function(e){return e.name&&e.name!==s}),i=o.resolveExpression(e,o.trimSlashes(r[1]));i&&n.push({name:"uuid",value:i});var a=e.contextItemName;a&&n.push({name:"contextItemName",value:a});var c=e.apiRoot||"",l=c+"/portal/contenttemplates/rendered",u=o.buildQueryString(n);return u&&(l+="?"+u),l},n.prototype.processResponse=function(e,t){var r=this;return e.text().then(function(e){if(a.isRunningOnFilesystem()){var n=t.contextRoot||"",i=t.remoteContextRoot||"",o=r._datasource.params.filter(function(e){return e.name===s})[0]||{},c="local"===o.value,l=c||!i?n:i;return a.isUrlAbsolute(l)?r._makeReferenceAbsolute(e,l):e}return e})},n.prototype._makeReferenceAbsolute=function(e,t){if("undefined"!=typeof DOMParser){var r=new DOMParser,n=r.parseFromString(e,"text/html");return this._getElementObjectsByAttr(n.body,"href").concat(this._getElementObjectsByAttr(n.body,"src")).filter(function(e){return e.value&&a.isUrlSiteRelative(e.value)}).forEach(function(e){var r=new URL(e.value,t).href;e.element.setAttribute(e.attr,r)}),n.body.innerHTML}return e},n.prototype._getElementObjectsByAttr=function(e,t){return Array.prototype.map.call(e.querySelectorAll("["+t+"]"),function(e){return{attr:t,value:e.getAttribute(t),element:e}})},n.getInstance=i.createFactoryFunction("contentrendered",n)},{"backbase-widget-engine/src/datasource/datasource-resolver":111,"backbase-widget-engine/src/datasource/datasource-resolver-helpers":110,"backbase-widget-engine/src/util/util":155}],207:[function(e,t,r){"use strict";function n(e){this._datasource=e}var i=e("backbase-widget-engine/src/datasource/datasource-resolver"),o=e("../model/parsers/xml/model-parser"),a=e("backbase-widget-engine/src/datasource/datasource-resolver-helpers");t.exports=n,n.prototype.resolveUrl=function(e){var t=this._datasource.uri,r=t.split(":");if(2!==r.length)throw new Error("Invalid link datasource uri: ",t);var n=[].concat(this._datasource.params||[]),i=a.trimSlashes(r[1]);i&&n.push({name:"f",value:"uuid(eq)"+i});var o=n.some(function(e){return"depth"===e.name});o||n.push({name:"depth",value:1});var s=e.apiRoot||"",c=e.portalName,l=s+"/portal/portals/"+c+"/links.xml",u=a.resolveQueryString(e,n);return u&&(l+="?"+u),l},n.prototype.processResponse=function(e){return e.text().then(function(e){var t=o.parseList(e);return t&&t.length?t[0]:null})},n.getInstance=i.createFactoryFunction("link",n)},{"../model/parsers/xml/model-parser":225,"backbase-widget-engine/src/datasource/datasource-resolver":111,"backbase-widget-engine/src/datasource/datasource-resolver-helpers":110}],208:[function(e,t,r){"use strict";function n(e){this._datasource=e}var i=e("backbase-widget-engine/src/datasource/datasource-resolver"),o=e("backbase-widget-engine/src/datasource/datasource-resolver-helpers");t.exports=n,n.prototype.resolveUrl=function(e){var t=this._datasource.uri,r=t.split(":");if(2!==r.length)throw new Error("Invalid navigation datasource uri: ",t);var n=[].concat(this._datasource.params||[]),i=o.trimSlashes(r[1]);i&&n.push({name:"uuid",value:i});var a=e.apiRoot||"",s=a+"/portal/navigation/tree",c=o.resolveQueryString(e,n);return c&&(s+="?"+c),s},n.prototype.processResponse=function(e){return e.json()},n.getInstance=i.createFactoryFunction("navigation",n)},{"backbase-widget-engine/src/datasource/datasource-resolver":111,"backbase-widget-engine/src/datasource/datasource-resolver-helpers":110}],209:[function(e,t,r){"use strict";function n(e){this._datasource=e}var i=e("backbase-widget-engine/src/datasource/datasource-resolver"),o=e("../model/parsers/xml/model-parser"),a=e("backbase-widget-engine/src/datasource/datasource-resolver-helpers");t.exports=n,n.prototype.resolveUrl=function(e){var t=this._datasource.uri,r=t.split(":");if(2!==r.length)throw new Error("Invalid link datasource uri: ",t);var n=[].concat(this._datasource.params||[]);n.push({name:"pc",value:!1});var i=e.apiRoot||"",o=a.resolveExpression(e,a.trimSlashes(r[1])),s=a.resolveQueryString(e,n);return i+"/portal/portals/"+o+".xml?"+s},n.prototype.processResponse=function(e){return e.text().then(function(e){return o.parse(e)})},n.getInstance=i.createFactoryFunction("portal",n)},{"../model/parsers/xml/model-parser":225,"backbase-widget-engine/src/datasource/datasource-resolver":111,"backbase-widget-engine/src/datasource/datasource-resolver-helpers":110}],210:[function(e,t,r){"use strict";var n=e("./render/render.js"),i=e("./configuration/configuration.js"),o=e("./model/strategies/xml-cxp-model");t.exports={getRenderer:n.createInstance,createConfiguration:i.createInstance,getModel:o.createInstance}},{"./configuration/configuration.js":203,"./model/strategies/xml-cxp-model":228,"./render/render.js":233}],211:[function(e,t,r){"use strict";function n(e,t,r,n){this._config=e,this.type=t,this._portalName=r,this._filter=n||null,this._requiredParams=this._getRequiredParams(),this._logger=this._config.getLogger().child({childName:"item-collection-context"})}t.exports=n,n.prototype._getRequiredParams=function(){switch(this.type){case"link":return{depth:10,ps:50};case"page":return{depth:10};default:return null}},n.prototype.get=function(){throw new Error("Method not implemented")},n.prototype.create=function(e){throw new Error("Method not implemented")},n.prototype.filter=function(e,t,r){throw new Error("Method not implemented")}},{}],212:[function(e,t,r){"use strict";function n(e,t,r,n,i){this._config=e,this.itemName=t,this.itemType=r,this._findById=n||!1,this._portalName=i,this._requiredParams=this._getRequiredParams(),this._logger=this._config.getLogger().child({childName:"item-context"})}t.exports=n,n.prototype._getRequiredParams=function(){var e={},t=!!this._config.get("designmode"),r=this.itemType;return"link"!==r&&"page"!==r||(e.depth=10),!t||"widget"!==r&&"container"!==r&&"page"!==r||(e.designmode=!0),e},n.prototype.get=function(e){throw new Error("Method not implemented")},n.prototype.update=function(e){throw new Error("Method not implemented")},n.prototype.revert=function(){throw new Error("Method not implemented")},n.prototype.remove=function(){throw new Error("Method not implemented")}},{}],213:[function(e,t,r){"use strict";function n(e,t,r,n){var i=e.preferences[t];i||(i={name:t},e.preferences[t]=i),i.value=r,n&&(i.type=n)}function i(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return s[255&e]+s[e>>8&255]+s[e>>16&255]+s[e>>24&255]+"-"+s[255&t]+s[t>>8&255]+"-"+s[t>>16&15|64]+s[t>>24&255]+"-"+s[63&r|128]+s[r>>8&255]+"-"+s[r>>16&255]+s[r>>24&255]+s[255&n]+s[n>>8&255]+s[n>>16&255]+s[n>>24&255]}function o(e){return e+i()}function a(e,t){var r={designmode:["designModeOnly"],role:["admin","manager","user","none"],input:["text-input","checkbox","select-one"],order:[]};if(!t||!t.length||!r[e])return null;var n=t.filter(function(t){return-1!==r[e].indexOf(t)||t.slice(0,e.length)===e})[0];if(n&&"order"===e){var i=n.split("-");i=2===i.length?i[1]:null;var o=parseFloat(i);isNaN(o)||(i=o),n=i}return n=n||("input"===e?"text-input":null),"designmode"===e&&(n=!!n),n}t.exports={modifyPreference:n,generateItemName:o,getViewHint:a};for(var s=[],c=0;256>c;c++)s[c]=(16>c?"0":"")+c.toString(16)},{}],214:[function(e,t,r){"use strict";function n(e){this.config=e,this.helpers=i}var i=e("../core/model-helpers");t.exports=n,n.prototype.items=function(e,t){throw new Error("Method not implemented")},n.prototype.item=function(e,t,r){throw new Error("Method not implemented")},n.prototype.itemById=function(e,t,r){throw new Error("Method not implemented")},n.prototype.portal=function(e){throw new Error("Method not implemented")}},{"../core/model-helpers":213}],215:[function(e,t,r){"use strict";function n(e,t){this._config=e,Object.defineProperty(this,"portalName",{value:t||this._config.get("portalName")})}n.prototype.item=function(e,t,r){throw new Error("Method not implemented")},n.prototype.itemById=function(e,t,r){throw new Error("Method not implemented")},n.prototype.items=function(e,t){throw new Error("Method not implemented")},t.exports=n},{}],216:[function(e,t,r){"use strict";function n(e){this.configuration=e;var t=e.get("remoteContextRoot");if("string"!=typeof t)throw new Error("RestApiConsumer needs remoteContextRoot variable to be set");/\/$/.test(t)===!1&&(t+="/"),this.baseUrl=t,this.logger=e.getLogger().child({childName:"rest-api-consumer"})}function i(e){return new n(e)}function o(e){return c.isObject(e)?"application/json":e&&e.indexOf("<?xml")>=0?"text/xml":"application/xml"}var a=e("backbase-widget-engine/src/fetch/filtering-fetch"),s=e("backbase-widget-engine/src/util/response-helpers"),c=e("../../util");t.exports={RestApiConsumer:n,createInstance:i},n.prototype._encodeQueryParameters=function(e){var t=[];return Object.keys(e).forEach(function(r){Array.isArray(e[r])?e[r].forEach(function(e){t.push(r+"[]="+encodeURIComponent(e))}):t.push(r+"="+encodeURIComponent(e[r]))}),t.join("&")},n.prototype._buildUrl=function(e,t){var r=this._encodeQueryParameters(t||{}),n=this.baseUrl+e;return r.length>0&&(n+=(e.indexOf("?")>=0?"&":"?")+r),n},n.prototype._makeRequest=function(e,t,r){var n=this,i=this._buildUrl(e,r);this.logger.debug("Making REST request to [%s]",i);var o=a(i,t).then(function(e){if(!s.isResponseOk(e)){var t=s.createError(e);throw t.response=e,t}return n.logger.debug("Request successful server responds %s",e.status),e});return o["catch"](function(e){n.logger.error("Request failed with: %s",e)}),o},n.prototype.get=function(e,t){return this._makeRequest(e,{method:"GET",headers:{Pragma:"no-cache","Cache-Control":"no-cache"}},t)},n.prototype.post=function(e,t){var r=c.isObject(t)?JSON.stringify(t):t,n={"Content-Type":o(t)};return this._makeRequest(e,{method:"POST",body:r,headers:n})},n.prototype.put=function(e,t){var r=c.isObject(t)?JSON.stringify(t):t,n={"Content-Type":o(t)};return this._makeRequest(e,{method:"PUT",body:r||"",headers:n})},n.prototype["delete"]=function(e,t){return this._makeRequest(e,{method:"DELETE"},t)}},{"../../util":236,"backbase-widget-engine/src/fetch/filtering-fetch":119,"backbase-widget-engine/src/util/response-helpers":154}],217:[function(e,t,r){"use strict";var n=e("./property-generator"),i=["type","name","contextItemName","extendedItemName","parentItemName"],o=["shortName","description"];t.exports=function(e,t,r){r=r||[],i.forEach(function(r){t.hasOwnProperty(r)&&(e.beginElement(r),e.text(t[r]),e.endElement(r))}),t.id&&(e.beginElement("uuid"),e.text(t.id),e.endElement("uuid")),"boolean"==typeof t.manageable&&(e.beginElement("manageable"),e.text(t.manageable?"true":"false"),e.endElement("manageable")),e.beginElement("properties"),o.forEach(function(r){t[r]&&n(e,{name:r,readonly:!1,value:t[r]})}),Array.isArray(r)&&r.length>0&&r.forEach(function(t){n(e,t)}),Array.isArray(t.icons)&&t.icons.length>0&&t.icons.forEach(function(t,r){var i=0===r?"thumbnailUrl":"icon";n(e,{name:i,readonly:!1,value:t})});var a=t.preferences||{};return Object.keys(a).forEach(function(r){n(e,a[r],t.locale)}),e.endElement("properties"),t.tags&&t.tags.length>0&&(e.beginElement("tags"),t.tags.forEach(function(t){var r={type:t.type};t.manageable&&(r.manageable=!0),t.blacklist&&(r.blacklist=!0),e.beginElement("tag",r),e.text(t.name),e.endElement("tag")}),e.endElement("tags")),e}},{"./property-generator":220}],218:[function(e,t,r){"use strict";var n=e("./xml-builder"),i=e("./base-xml-generator");t.exports=function(e){var t=new n;return t.beginElement("link"),i(t,e),t.endElement("link"),t.toString()}},{"./base-xml-generator":217,"./xml-builder":222}],219:[function(e,t,r){"use strict";var n=e("./xml-builder"),i=e("./base-xml-generator");t.exports=function(e){var t=new n;return t.beginElement("page"),i(t,e),t.endElement("page"),t.toString()}},{"./base-xml-generator":217,"./xml-builder":222}],220:[function(e,t,r){"use strict";function n(e,t,r){var n={name:t.name,readonly:t.readonly||!1},i=t.type||("order"===t.name?"double":null);"boolean"==typeof t.manageable&&(n.manageable=t.manageable),"boolean"==typeof t.localizable&&(n.localizable=t.localizable),"undefined"!=typeof t.markedForDeletion&&t.markedForDeletion===!0&&(n.markedForDeletion=!0),t.label&&(n.label=t.label),i&&(n.type=i),t.viewhints&&t.viewhints.length>0&&(n.viewHint=t.viewhints.join(",")),e.beginElement("property",n),o(e,t,r),e.endElement("property")}function i(e,t,r){e.beginElement("value",r),e.text(t),e.endElement("value")}function o(e,t,r){var n=r||a;if(t.localizable){var o=t._lang;o||(o={},o[n]={value:t.value}),Object.keys(o).forEach(function(t){var r=o[t]||{},n={};"undefined"!=typeof r.markedForDeletion&&r.markedForDeletion===!0&&(n.markedForDeletion=!0),t!==a&&(n.locale=t),i(e,r.value,n)})}else i(e,t.value)}var a=e("backbase-widget-engine/src/strategies/parser/xml/constants").NO_LOCALE_NAME;t.exports=n},{"backbase-widget-engine/src/strategies/parser/xml/constants":138}],221:[function(e,t,r){"use strict";var n=e("./xml-builder"),i=e("./base-xml-generator"),o=["author","authorEmail","authorHref","license","licenseHref"];t.exports=function(e,t){var r=t?"container":"widget",a=[];o.forEach(function(t){e[t]&&a.push({name:t,readonly:!1,value:e[t]})}),e.content&&e.content.src&&a.push({name:"src",readonly:!1,value:e.content.src}),e.altContent&&Object.keys(e.altContent).forEach(function(t){a.push({name:"src."+t,readonly:!1,value:e.altContent[t].src})}),e.viewmodes&&e.viewmodes.length>0&&a.push({name:"viewmodes",readonly:!1,value:e.viewmodes.join(" ")});var s=new n;return s.beginElement(r),i(s,e,a),s.endElement(r),s.toString()}},{"./base-xml-generator":217,"./xml-builder":222}],222:[function(e,t,r){"use strict";function n(e){return e.replace(s,function(e){return a[e]||e})}function i(e){return null===e||void 0===e?"":String(e)}function o(){this._xml=""}t.exports=o;var a={"<":"&lt;",">":"&gt;",'"':"&quot;","&":"&amp;"},s=/[<>"&]/g;o.prototype.beginElement=function(e,t){var r="";t&&(r=Object.keys(t).reduce(function(e,r){var o=i(t[r]);return e+" "+r+'="'+n(o)+'"'},"")),this._xml+="<"+e+r+">"},o.prototype.endElement=function(e){this._xml+="</"+e+">"},o.prototype.text=function(e){this._xml+=n(i(e))},o.prototype.xml=function(e){this._xml+=e},o.prototype.toString=function(){return this._xml}},{}],223:[function(e,t,r){"use strict";function n(e){return s(e,!0)}function i(e){return s(e,!1)}function o(e,r){var n=r||e.type;if(!n)throw new TypeError('Item type is required. Either provide it as the second argument or set "type" property of the model');var i="generate"+n[0].toUpperCase()+n.substr(1);if(!t.exports[i])throw new Error("Unsupported type passed "+r);return t.exports[i](e)}function a(e){if(!e)throw new TypeError("catalogItems argument is required. It must be an item model object or an array of such objects.");Array.isArray(e)||(e=[e]);var t=new u;return t.beginElement("catalog"),e.forEach(function(e){t.xml(o(e))}),t.endElement("catalog"),t.toString()}var s=e("./widget-xml-generator"),c=e("./page-xml-generator"),l=e("./link-xml-generator"),u=e("./xml-builder");t.exports={generate:o,generateWidget:i,generateContainer:n,generatePage:c,generateLink:l,generateCatalog:a}},{"./link-xml-generator":218,"./page-xml-generator":219,"./widget-xml-generator":221,"./xml-builder":222}],224:[function(e,t,r){"use strict";function n(e){var t=h(e),r=t.preferencesDict,n=r.itemType;"menuHeader"===n&&(n="LINK");var i={children:[],itemType:n,title:r.title};"function"==typeof g[n]&&g[n](i,r);var o=p(e);return(o||[]).length>0&&(i.children=o),delete i.preferencesDict,f(t,i)}function i(e){e.navPattern=null}function o(e,t){e.itemRef=t.ItemRef,e.href=t.generatedUrl,t.Url&&(e.url=t.Url),e.generatedUrl=t.generatedUrl}function a(e,t){e.className=t.className}function s(e,t){e.url=t.Url}function c(e,t){e.redirectionMethod=t.redirectionMethod,e.url=t.Url,e.targetPage=t.targetPage}function l(e,t){e.itemRef=t.ItemRef,e.href=t.generatedUrl,t.Url&&(e.url=t.Url),e.generatedUrl=t.generatedUrl}function u(e,t){e.itemRef=t.ItemRef,e.href=t.generatedUrl,t.Url&&(e.url=t.Url),e.generatedUrl=t.generatedUrl;try{e.state=JSON.parse(t.State)}catch(r){throw new Error('Failed to parse "state" property of link ['+e.itemRef+"]. Error: "+r.message)}t.sectionName&&(e.sectionName=t.sectionName)}function p(e){var t=d.getChildElementByName(e,"children"),r=t&&d.getChildElements(t);return r&&r.map(n)}var f=e("../../../util").merge,h=e("backbase-widget-engine/src/strategies/parser/xml/item"),d=e("backbase-widget-engine/src/strategies/parser/xml/helpers");t.exports=n;var g={LINK:i,divider:a,page:o,externalLink:s,redirect:c,alias:l,state:u}},{"../../../util":236,"backbase-widget-engine/src/strategies/parser/xml/helpers":139,"backbase-widget-engine/src/strategies/parser/xml/item":140}],225:[function(e,t,r){"use strict";var n=e("./link"),i=e("./page"),o=e("./portal"),a=e("backbase-widget-engine/src/strategies/parser/xml/model-parser"),s=a.createInstance();s.setParser("link",n),s.setParser("page",i),s.setParser("portal",o),t.exports=s},{"./link":224,"./page":226,"./portal":227,"backbase-widget-engine/src/strategies/parser/xml/model-parser":141}],226:[function(e,t,r){"use strict";function n(e){var t=o(e),r=t.preferencesDict,n={content:i(r),children:[],description:r.description,icons:s.parseIcons(r)},c=s.parseChildren(e,a);return(c||[]).length>0&&(n.children=c),delete t.preferencesDict,l(t,n)}function i(e){var t={src:"",type:"text/html",encoding:"UTF-8"};return c.assignIfExists(t,"src",e.src),t}var o=e("backbase-widget-engine/src/strategies/parser/xml/item"),a=e("backbase-widget-engine/src/strategies/parser/xml/widget"),s=e("backbase-widget-engine/src/strategies/parser/xml/common"),c=e("backbase-widget-engine/src/strategies/parser/xml/helpers"),l=e("../../../util").merge;t.exports=n},{"../../../util":236,"backbase-widget-engine/src/strategies/parser/xml/common":137,"backbase-widget-engine/src/strategies/parser/xml/helpers":139,"backbase-widget-engine/src/strategies/parser/xml/item":140,"backbase-widget-engine/src/strategies/parser/xml/widget":142}],227:[function(e,t,r){"use strict";function n(e){var t=i(e);return delete t.preferencesDict,t}var i=e("backbase-widget-engine/src/strategies/parser/xml/item");t.exports=n},{"backbase-widget-engine/src/strategies/parser/xml/item":140}],228:[function(e,t,r){"use strict";function n(e){o.apply(this,[e])}function i(e){return new n(e)}var o=e("../core/model"),a=e("./xml-portal-context");t.exports={XmlCxpModel:n,createInstance:i},n.prototype=Object.create(o.prototype),n.prototype.items=function(e,t){return new a(this.config).items(e,t)},n.prototype.item=function(e,t,r){return new a(this.config).item(e,t,r);
},n.prototype.itemById=function(e,t,r){return new a(this.config).itemById(e,t,r)},n.prototype.portal=function(e){return new a(this.config,e)}},{"../core/model":214,"./xml-portal-context":232}],229:[function(e,t,r){"use strict";function n(e,t,r,n){a.call(this,e,t,r,n),this._apiConsumer=s.createInstance(this._config)}var i=e("../parsers/xml/model-parser"),o=e("../generators/xml-generator"),a=e("../core/item-collection-context"),s=e("../core/rest-api-consumer");t.exports=n,n.prototype=Object.create(a.prototype),n.prototype.get=function(){var e=this._portalName,t="portals/"+e+"/"+this.type+"s",r=this._filter,n=this._requiredParams,o=[],a=[];r&&(o=["f="+r.name+"("+r.operator+")"+encodeURIComponent(r.value)]),n&&(a=Object.keys(n).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])}));var s=o.concat(a).join("&");return t+=s.length>0?"?"+s:"",this._apiConsumer.get(t).then(function(e){return e.text()}).then(function(e){this._logger.info("Parsing %s",t);var r=i.parseList(e);return this._logger.info("%s parsed successfully"),r}.bind(this))},n.prototype.filter=function(e,t,r){var i={name:e,value:t,operator:r||"eq"};return new n(this._config,this.type,this._portalName,i)},n.prototype.create=function(e){var t=["parentItemName"];"link"!==this.type&&t.push("extendedItemName"),t.forEach(function(t){if("undefined"==typeof e[t]||"string"!=typeof e[t]||0===e[t].length)throw new Error("ItemCollectionContext.create needs the model has the field named: "+t)});var r=this._portalName;e.contextItemName=r,"undefined"==typeof e.preferences&&(e.preferences={});var n=o.generate(e,this.type),a="portals/"+r+"/"+this.type+"s";return this._apiConsumer.post(a,n).then(function(e){return e.text()}).then(function(e){this._logger.info("Parsing newly created item's xml");var t=i.parse(e);return this._logger.info("Newly created item parsed successfully"),t}.bind(this))}},{"../core/item-collection-context":211,"../core/rest-api-consumer":216,"../generators/xml-generator":223,"../parsers/xml/model-parser":225}],230:[function(e,t,r){"use strict";function n(e,t,r,n,i){s.call(this,e,t,r,n,i),this._apiConsumer=a.createInstance(this._config)}var i=e("../parsers/xml/model-parser"),o=e("../generators/xml-generator"),a=e("../core/rest-api-consumer"),s=e("../core/item-context");t.exports=n,n.prototype=Object.create(s.prototype),n.prototype.get=function(e){var t="object"==typeof e?e:{};return this._findById?this._getItemById():this._getItemByName(t)},n.prototype._buildParams=function(){return Object.keys(this._requiredParams).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(this._requiredParams[e])}.bind(this)).join("&")},n.prototype._getItemByName=function(e){var t=this._config.get("portalName"),r=this.itemType+"s/"+this.itemName,n=e.allLocalizedValues===!0?"/details":".xml",o="portals/"+t+"/"+r+n,a=this._buildParams();return a.length>0&&(o+="?"+a),this._apiConsumer.get(o).then(function(e){return e.text()}).then(function(e){this._logger.info("Parsing response from [%s]",r);var t=i.parse(e);return this._logger.info("Response from [%s] parsed successfully",r),t}.bind(this))},n.prototype._getItemById=function(){var e=this._config.get("portalName"),t=encodeURIComponent(this.itemName),r=this.itemType+"s",n=r+"?f=uuid(eq)"+t,o="portals/"+e+"/"+n,a=this._buildParams();return a.length>0&&(o+="&"+a),this._apiConsumer.get(o).then(function(e){return e.text()}).then(function(e){this._logger.info("Parsing response from [%s]",n);var t=i.parseList(e);this._logger.info("Response from [%s] parsed successfully",n);var r=t[0];if(!r)throw new Error("Item of type ["+this.itemType+"] with id ["+this.itemName+"] not found");return r}.bind(this))},n.prototype.update=function(e){var t=this._config.get("portalName"),r="portals/"+t+"/"+this.itemType+"s/"+this.itemName,n=e;e.name&&e.name.indexOf("~")>0&&(n=Object.create(e),n.parentItemName=void 0,n.extendedItemName=void 0,n.id=void 0);var i=o.generate(n,this.itemType);return this._apiConsumer.put(r,i).then(function(){this._logger.info("%s named %s updated successfully",this.itemType,this.itemName)}.bind(this))},n.prototype.revert=function(){var e="portals/"+this._config.get("portalName")+"/"+this.itemType+"s/"+this.itemName+".xml";return this._apiConsumer["delete"](e)},n.prototype.remove=function(){var e="portals/"+this._config.get("portalName")+"/"+this.itemType+"s/"+this.itemName;return this._apiConsumer["delete"](e)}},{"../core/item-context":212,"../core/rest-api-consumer":216,"../generators/xml-generator":223,"../parsers/xml/model-parser":225}],231:[function(e,t,r){"use strict";function n(e,t,r,n,i){o.call(this,e,t,r,n,i)}var i=e("../parsers/xml/model-parser"),o=e("./xml-item-context");t.exports=n,n.prototype=Object.create(o.prototype),n.prototype.duplicate=function(){var e=this._config.get("portalName"),t=this.itemType+"s/"+this.itemName,r="portals/"+e+"/"+t+"/duplicate";return this._apiConsumer.post(r).then(function(e){return e.text()}).then(function(e){this._logger.info("Parsing response from [%s]",t);var r=i.parse(e);return this._logger.info("Response from [%s] parsed successfully",t),r}.bind(this))}},{"../parsers/xml/model-parser":225,"./xml-item-context":230}],232:[function(e,t,r){"use strict";function n(){i.apply(this,[].slice.call(arguments))}var i=e("../core/portal-context"),o=e("./xml-item-context"),a=e("./xml-link-context"),s=e("./xml-item-collection-context");n.prototype=Object.create(i.prototype),n.prototype.item=function(e,t,r){var n=r&&r.config||this._config;return this._createItemContext(n,e,t,!1,this._getPortalName(r))},n.prototype.itemById=function(e,t,r){var n=r&&r.config||this._config;return this._createItemContext(n,e,t,!0,this._getPortalName(r))},n.prototype.items=function(e,t){var r=t&&t.config||this._config;return new s(r,e,this._getPortalName(t))},n.prototype._getPortalName=function(e){var t=e&&e.config;return t&&t.get("portalName")||this.portalName},n.prototype._createItemContext=function(e,t,r,n,i){return"link"===r?new a(e,t,r,n,i):new o(e,t,r,n,i)},t.exports=n},{"../core/portal-context":215,"./xml-item-collection-context":229,"./xml-item-context":230,"./xml-link-context":231}],233:[function(e,t,r){"use strict";var n=e("./strategies/html5-item-renderer"),i=function(e){return e.get("contextRoot")||e.set("contextRoot",""),e.get("remoteContextRoot")||e.set("remoteContextRoot",""),new n(e)};t.exports={createInstance:i}},{"./strategies/html5-item-renderer":235}],234:[function(e,t,r){(function(r){"use strict";function n(e,t){t=t||{};var r=t.log||e.getLogger();this._config=e,this._log=r.child({childName:"chrome-renderer"})}var i=e("handlebars/dist/handlebars.min"),o=e("handlebars-helpers"),a=e("backbase-widget-engine/src/fetch/filtering-fetch"),s=e("backbase-widget-engine/src/util/response-helpers"),c=["windowed","maximized"],l="data-chrome",u="data-widget-holder",p={},f=i.create();Object.keys(o).forEach(function(e){f.registerHelper(e,o[e])}),t.exports=n,n.prototype.getChrome=function(e,t,r){var n=this._findChromeElement(e,t.name),i=this._findWidgetHolderElement(n);return i?Promise.resolve({chromeElement:n,widgetHolderElement:i}):this._renderChrome(e,t,r)},n.prototype._renderChrome=function(e,t,n){var i,o,a=this,s=!n||n.useChrome!==!1,p=e&&e.ownerDocument||r.document,f=s?this._getTemplate():Promise.resolve(null);return f.then(function(e){if(e&&t.viewmodes&&c.indexOf(t.viewmodes[0])>=0){var r=e(t),n=p.createElement("div");n.innerHTML=r,i=a._findChromeElement(n,t.name),o=a._findWidgetHolderElement(i),i?i.parentNode.removeChild(i):a._log.warn('Chrome layout does not have an element with "data-chrome" attribute. Falling back to blank chrome.'),o||(i=null,a._log.warn('Chrome layout does not have an element with "data-widget-holder" attribute. Falling back to blank chrome.'))}return i||(i=p.createElement("div"),i.setAttribute(l,t.name),i.setAttribute(u,""),o=i),{chromeElement:i,widgetHolderElement:o}})},n.prototype._getTemplate=function(){var e=this._config.get("chromeSrc"),t=this._log;if(!e){var r='No chrome template configured. Widgets with "windowed" or "maximized" view modes will be displayed without chrome.';return t.warn(r),Promise.resolve(null)}var n=this._config.get("contextRoot"),i=this._config.get("apiRoot"),o=e.replace(/\$\(contextRoot\)/,n).replace(/\$\(apiRoot\)/,i),c=p[o];return c||(t.debug("Requesting chrome template from %s",o),c=a(o).then(function(e){if(t.debug("Chrome template request resolved. Status: %s",e.status),s.isResponseOk(e))return e.text();throw s.createError(e)}).then(function(e){t.trace("Chrome template body\n: %s",e),t.debug("Compiling handlebars template instance from %s",o);try{return f.compile(e)}catch(r){throw t.error("There was a problem compiling a handlebars template"),r}})["catch"](function(e){return t.error(e),delete p[o],null}),p[o]=c),c},n.prototype._findChromeElement=function(e,t){if(!e)return null;var r="*["+l+'="'+(t||"")+'"]';return e.querySelector(r)},n.prototype._findWidgetHolderElement=function(e){if(!e)return null;var t="*["+u+"]";return e.hasAttribute(u)?e:e.querySelector(t)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"backbase-widget-engine/src/fetch/filtering-fetch":119,"backbase-widget-engine/src/util/response-helpers":154,"handlebars-helpers":158,"handlebars/dist/handlebars.min":160}],235:[function(e,t,r){"use strict";var n=e("backbase-widget-engine"),i=e("promise-extensions")(Promise),o=e("browser-bunyan"),a=e("../../util"),s=e("./chrome-renderer"),c=e("../../datasource/link-datasource-resolver"),l=e("../../datasource/portal-datasource-resolver"),u=e("../../datasource/contentrendered-datasource-resolver"),p=e("../../datasource/navigation-datasource-resolver"),f=e("../../datasource/breadcrumb-datasource-resolver"),h=function(e){this.config=e,this.log=e.getLogger().child({childName:"html5-item-renderer"}),this.plugins=[],this.features=[],this._widgetEngines=[],this._chromeRenderer=new s(e,{log:this.log}),this._datasourceResolvers=[c.getInstance,l.getInstance,u.getInstance,p.getInstance,f.getInstance]};t.exports=h,h.prototype.start=function(e,t,r){if(!e||0===e.length)return i.resolve();r=r||{};var n=this.log,s=this;n.info("Starting item tree rendering..."),n.level()<=o.TRACE&&n.trace("Item tree model is this:\n %s",JSON.stringify(e,null,"	"));var c=Date.now(),l=Array.isArray(e)?e:[e];if(1===l.length&&r.contentName){var u=a.cloneDeep(l[0]);if(u.content=u.altContent[r.contentName],"undefined"==typeof u.content){var p=new Error('Given content name "'+r.contentName+'" not found for item named "'+e.name+'"');return i.reject(p)}l=[u]}return this._render(l,t,r).then(function(e){n.info("Item tree rendering complete.");var t=Date.now()-c,r={time:t,failures:[]},i=s._flattenArray(e);r=i.reduce(function(e,t){if(t.isRejected()){var r="function"==typeof t.reason.cause&&t.reason.cause()||t.reason;e.failures.push(r)}return e},r);var o=r.failures.length;if(o>0&&n.warn("%s/%s items failed to load.",o,i.length),o===i.length){var a=new Error("All items in a rendering tree failed to render");throw a.result=r,a}return r})},h.prototype.addFeature=function(e){return"object"==typeof e&&this.features.push(e),this},h.prototype.addPlugin=function(e){return"object"==typeof e&&this.plugins.push(e),this},h.prototype._renderItem=function(e,t){var r=this,i=this.config,o="";e.content&&e.content.src?o=e.content.src.replace(/\/[^\/]+$/,""):e.content&&e.content.config&&(o=e.content.config.replace(/\/[^\/]+$/,"")),o=o.replace(/\$\(contextRoot\)/,i.get("contextRoot")).replace(/\$\(apiRoot\)/,i.get("apiRoot"));var a=new n({log:this.log}),s=i.get("storageFactory");a.init({widgetPath:o,widgetEl:t,initialModel:e,storage:s?s.get(e):null,configVars:i.toSerializableObject()}),this._datasourceResolvers.forEach(function(e){a.addDatasourceResolver(e)}),this.plugins.forEach(function(e){a.addPlugin(e)}),this.features.forEach(function(e){a.addFeature(e)}),i.get("compat")&&a.enableCompatibility();var c=a.start(e,t);return c.delay(0).then(function(e){return r._widgetEngines.push(a),e})},h.prototype.destroyAllItems=function(){this._widgetEngines.forEach(function(e){e.destroy()}),this._widgetEngines=[]},h.prototype.destroyItem=function(e){var t=this._widgetEngines.filter(function(t){return t.widgetEngine.config.initialModel.id===e})[0];if(t){t.destroy();var r=t.widgetEngine.config;if(r.initialModel&&r.initialModel.children&&r.initialModel.children.length>0){var n=this;r.initialModel.children.forEach(function(e){var t=n._widgetEngines.filter(function(t){return t.widgetEngine._widgetInstance&&t.widgetEngine._widgetInstance.id===e.id?t:void 0})[0];if(t){var r=n._widgetEngines.indexOf(t);n._widgetEngines.splice(r,1)}})}var i=this._widgetEngines.indexOf(t);return this._widgetEngines.splice(i,1),this}},h.prototype.rerenderItem=function(e,t,r){"object"==typeof e&&"undefined"==typeof r&&(r=e,e=r.id,t=r.name);var n=document.createElement("div"),i=document.querySelector('[data-chrome="'+t+'"]');return i.parentNode.insertBefore(n,i),this.destroyItem(e),this.start(r,n).then(function(){var e=n.firstElementChild;n.parentNode.insertBefore(e,n),n.parentNode.removeChild(n)})},h.prototype._render=function(e,t,r){var n=this,o=e.map(function(e){return n._chromeRenderer.getChrome(t,e,r)});return Promise.all(o).then(function(r){return r.map(function(r,n){return{itemModel:e[n],chrome:r,parentEl:t}})}).then(function(e){var t=[];return e.forEach(function(e,r,i){n._attachChrome(e,r,i),t.push(n._renderItem(e.itemModel,e.chrome.widgetHolderElement))}),i.settleAll(t)}).then(function(t){var i=[];return t.filter(function(e){return e.isFulfilled()}).map(function(e){return e.value}).forEach(function(t){var o=t.areaNodes;if(o){var a=e.filter(function(e){return e.id===t.id})[0];Object.keys(o).forEach(function(e){var s=a.children||[],c=s.filter(function(t){var r;return r=Array.isArray(t.preferences)?t.preferences.filter(function(e){return"area"===e.name})[0]:t.preferences.area,r&&r.value===e});n.log.info("Rendering %s child item(s) for area [%s] of item [%s]...",c.length,e,t.id);var l=o[e];i.push(n._render(c,l,r))})}}),Promise.all(t.concat(i))})},h.prototype._attachChrome=function(e,t,r){var n,i=e.chrome.chromeElement,o=e.parentEl;if(!i.parentNode){if(0===t)n=o.firstElementChild;else{var a=r[t-1].chrome.chromeElement;n=a.nextElementSibling}o.insertBefore(i,n)}},h.prototype._flattenArray=function d(e){return e.reduce(function(e,t){return e.concat(Array.isArray(t)?d(t):t)},[])}},{"../../datasource/breadcrumb-datasource-resolver":205,"../../datasource/contentrendered-datasource-resolver":206,"../../datasource/link-datasource-resolver":207,"../../datasource/navigation-datasource-resolver":208,"../../datasource/portal-datasource-resolver":209,"../../util":236,"./chrome-renderer":234,"backbase-widget-engine":121,"browser-bunyan":157,"promise-extensions":202}],236:[function(e,t,r){"use strict";t.exports={isObject:e("lodash/lang/isObject"),merge:e("lodash/object/merge"),cloneDeep:e("lodash/lang/cloneDeep")}},{"lodash/lang/cloneDeep":189,"lodash/lang/isObject":194,"lodash/object/merge":200}],237:[function(e,t,r){!function(){function e(e){var t=e.__resizeTriggers__,r=t.firstElementChild,n=t.lastElementChild,i=r.firstElementChild;n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight,i.style.width=r.offsetWidth+1+"px",i.style.height=r.offsetHeight+1+"px",r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight}function t(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height}function r(r){var n=this;e(this),this.__resizeRAF__&&s(this.__resizeRAF__),this.__resizeRAF__=a(function(){t(n)&&(n.__resizeLast__.width=n.offsetWidth,n.__resizeLast__.height=n.offsetHeight,n.__resizeListeners__.forEach(function(e){e.call(n,r)}))})}function n(){if(!o){var e=(y?y:"")+".resize-triggers { "+(b?b:"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e)),t.appendChild(r),o=!0}}var i=document.attachEvent,o=!1;if(!i){var a=function(){var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)};return function(t){return e(t)}}(),s=function(){var e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout;return function(t){return e(t)}}(),c=!1,l="animation",u="",p="animationstart",f="Webkit Moz O ms".split(" "),h="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),d="",g=document.createElement("fakeelement");if(void 0!==g.style.animationName&&(c=!0),c===!1)for(var m=0;m<f.length;m++)if(void 0!==g.style[f[m]+"AnimationName"]){d=f[m],l=d+"Animation",u="-"+d.toLowerCase()+"-",p=h[m],c=!0;break}var v="resizeanim",y="@"+u+"keyframes "+v+" { from { opacity: 0; } to { opacity: 0; } } ",b=u+"animation: 1ms "+v+"; "}window.addResizeListener=function(t,o){i?t.attachEvent("onresize",o):(t.__resizeTriggers__||("static"==getComputedStyle(t).position&&(t.style.position="relative"),n(),t.__resizeLast__={},t.__resizeListeners__=[],(t.__resizeTriggers__=document.createElement("div")).className="resize-triggers",t.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',t.appendChild(t.__resizeTriggers__),e(t),t.addEventListener("scroll",r,!0),p&&t.__resizeTriggers__.addEventListener(p,function(r){r.animationName==v&&e(t)})),t.__resizeListeners__.push(o))},window.removeResizeListener=function(e,t){i?e.detachEvent("onresize",t):(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),e.__resizeListeners__.length||(e.removeEventListener("scroll",r),e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)))}}()},{}],238:[function(e,t,r){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(p===setTimeout)return setTimeout(e,0);if((p===n||!p)&&setTimeout)return p=setTimeout,setTimeout(e,0);try{return p(e,0)}catch(t){try{return p.call(null,e,0)}catch(t){return p.call(this,e,0)}}}function a(e){if(f===clearTimeout)return clearTimeout(e);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function s(){m&&d&&(m=!1,d.length?g=d.concat(g):v=-1,g.length&&c())}function c(){if(!m){var e=o(s);m=!0;for(var t=g.length;t;){for(d=g,g=[];++v<t;)d&&d[v].run();v=-1,t=g.length}d=null,m=!1,a(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var p,f,h=t.exports={};!function(){try{p="function"==typeof setTimeout?setTimeout:n}catch(e){p=n}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(e){f=i}}();var d,g=[],m=!1,v=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];g.push(new l(e,t)),1!==g.length||m||o(c)},l.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=u,h.addListener=u,h.once=u,h.off=u,h.removeListener=u,h.removeAllListeners=u,h.emit=u,h.prependListener=u,h.prependOnceListener=u,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],239:[function(e,t,r){(function(e){!function(n){function i(e){throw new RangeError(N[e])}function o(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function a(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]),e=e.replace(R,".");var i=e.split("."),a=o(i,t).join(".");return n+a}function s(e){for(var t,r,n=[],i=0,o=e.length;o>i;)t=e.charCodeAt(i++),t>=55296&&56319>=t&&o>i?(r=e.charCodeAt(i++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--)):n.push(t);return n}function c(e){return o(e,function(e){var t="";return e>65535&&(e-=65536,t+=F(e>>>10&1023|55296),e=56320|1023&e),t+=F(e)}).join("")}function l(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:_}function u(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function p(e,t,r){var n=0;for(e=r?T(e/S):e>>1,e+=T(e/t);e>L*k>>1;n+=_)e=T(e/L);return T(n+(L+1)*e/(e+P))}function f(e){var t,r,n,o,a,s,u,f,h,d,g=[],m=e.length,v=0,y=A,b=O;for(r=e.lastIndexOf(C),0>r&&(r=0),n=0;r>n;++n)e.charCodeAt(n)>=128&&i("not-basic"),g.push(e.charCodeAt(n));for(o=r>0?r+1:0;m>o;){for(a=v,s=1,u=_;o>=m&&i("invalid-input"),f=l(e.charCodeAt(o++)),(f>=_||f>T((x-v)/s))&&i("overflow"),v+=f*s,h=b>=u?E:u>=b+k?k:u-b,!(h>f);u+=_)d=_-h,s>T(x/d)&&i("overflow"),s*=d;t=g.length+1,b=p(v-a,t,0==a),T(v/t)>x-y&&i("overflow"),y+=T(v/t),v%=t,g.splice(v++,0,y)}return c(g)}function h(e){var t,r,n,o,a,c,l,f,h,d,g,m,v,y,b,w=[];for(e=s(e),m=e.length,t=A,r=0,a=O,c=0;m>c;++c)g=e[c],128>g&&w.push(F(g));for(n=o=w.length,o&&w.push(C);m>n;){for(l=x,c=0;m>c;++c)g=e[c],g>=t&&l>g&&(l=g);for(v=n+1,l-t>T((x-r)/v)&&i("overflow"),r+=(l-t)*v,t=l,c=0;m>c;++c)if(g=e[c],t>g&&++r>x&&i("overflow"),g==t){for(f=r,h=_;d=a>=h?E:h>=a+k?k:h-a,!(d>f);h+=_)b=f-d,y=_-d,w.push(F(u(d+b%y,0))),f=T(b/y);w.push(F(u(f,0))),a=p(r,v,n==o),r=0,++n}++r,++t}return w.join("")}function d(e){return a(e,function(e){return j.test(e)?f(e.slice(4).toLowerCase()):e})}function g(e){return a(e,function(e){return I.test(e)?"xn--"+h(e):e})}var m="object"==typeof r&&r&&!r.nodeType&&r,v="object"==typeof t&&t&&!t.nodeType&&t,y="object"==typeof e&&e;y.global!==y&&y.window!==y&&y.self!==y||(n=y);var b,w,x=2147483647,_=36,E=1,k=26,P=38,S=700,O=72,A=128,C="-",j=/^xn--/,I=/[^\x20-\x7E]/,R=/[\x2E\u3002\uFF0E\uFF61]/g,N={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},L=_-E,T=Math.floor,F=String.fromCharCode;if(b={version:"1.4.1",ucs2:{decode:s,encode:c},decode:f,encode:h,toASCII:g,toUnicode:d},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return b});else if(m&&v)if(t.exports==m)v.exports=b;else for(w in b)b.hasOwnProperty(w)&&(m[w]=b[w]);else n.punycode=b}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],240:[function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,r,o){t=t||"&",r=r||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var c=1e3;o&&"number"==typeof o.maxKeys&&(c=o.maxKeys);var l=e.length;c>0&&l>c&&(l=c);for(var u=0;l>u;++u){var p,f,h,d,g=e[u].replace(s,"%20"),m=g.indexOf(r);m>=0?(p=g.substr(0,m),f=g.substr(m+1)):(p=g,f=""),h=decodeURIComponent(p),d=decodeURIComponent(f),n(a,h)?i(a[h])?a[h].push(d):a[h]=[a[h],d]:a[h]=d}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],241:[function(e,t,r){"use strict";function n(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,r,s){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?n(a(e),function(a){var s=encodeURIComponent(i(a))+r;return o(e[a])?n(e[a],function(e){return s+encodeURIComponent(i(e))}).join(t):s+encodeURIComponent(i(e[a]))}).join(t):s?encodeURIComponent(i(s))+r+encodeURIComponent(i(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},{}],242:[function(e,t,r){"use strict";r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")},{"./decode":240,"./encode":241}],243:[function(e,t,r){function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,r){if(e&&l(e)&&e instanceof n)return e;var i=new n;return i.parse(e,t,r),i}function o(e){return c(e)&&(e=i(e)),e instanceof n?e.format():n.prototype.format.call(e)}function a(e,t){return i(e,!1,!0).resolve(t)}function s(e,t){return e?i(e,!1,!0).resolveObject(t):t}function c(e){return"string"==typeof e}function l(e){return"object"==typeof e&&null!==e}function u(e){return null===e}function p(e){return null==e}var f=e("punycode");r.parse=i,r.resolve=a,r.resolveObject=s,r.format=o,r.Url=n;var h=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,g=["<",">",'"',"`"," ","\r","\n","	"],m=["{","}","|","\\","^","`"].concat(g),v=["'"].concat(m),y=["%","/","?",";","#"].concat(v),b=["/","?","#"],w=255,x=/^[a-z0-9A-Z_-]{0,63}$/,_=/^([a-z0-9A-Z_-]{0,63})(.*)$/,E={javascript:!0,"javascript:":!0},k={javascript:!0,"javascript:":!0},P={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},S=e("querystring");n.prototype.parse=function(e,t,r){if(!c(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e;n=n.trim();var i=h.exec(n);if(i){i=i[0];var o=i.toLowerCase();this.protocol=o,n=n.substr(i.length)}if(r||i||n.match(/^\/\/[^@\/]+@[^@\/]+/)){var a="//"===n.substr(0,2);!a||i&&k[i]||(n=n.substr(2),this.slashes=!0)}if(!k[i]&&(a||i&&!P[i])){for(var s=-1,l=0;l<b.length;l++){var u=n.indexOf(b[l]);-1!==u&&(-1===s||s>u)&&(s=u)}var p,d;d=-1===s?n.lastIndexOf("@"):n.lastIndexOf("@",s),-1!==d&&(p=n.slice(0,d),n=n.slice(d+1),this.auth=decodeURIComponent(p)),s=-1;for(var l=0;l<y.length;l++){var u=n.indexOf(y[l]);-1!==u&&(-1===s||s>u)&&(s=u)}-1===s&&(s=n.length),this.host=n.slice(0,s),n=n.slice(s),this.parseHost(),this.hostname=this.hostname||"";var g="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!g)for(var m=this.hostname.split(/\./),l=0,O=m.length;O>l;l++){var A=m[l];if(A&&!A.match(x)){for(var C="",j=0,I=A.length;I>j;j++)C+=A.charCodeAt(j)>127?"x":A[j];if(!C.match(x)){var R=m.slice(0,l),N=m.slice(l+1),L=A.match(_);L&&(R.push(L[1]),N.unshift(L[2])),N.length&&(n="/"+N.join(".")+n),this.hostname=R.join(".");break}}}if(this.hostname.length>w?this.hostname="":this.hostname=this.hostname.toLowerCase(),!g){for(var T=this.hostname.split("."),F=[],l=0;l<T.length;++l){var M=T[l];F.push(M.match(/[^A-Za-z0-9_-]/)?"xn--"+f.encode(M):M)}this.hostname=F.join(".")}var D=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+D,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==n[0]&&(n="/"+n))}if(!E[o])for(var l=0,O=v.length;O>l;l++){var U=v[l],H=encodeURIComponent(U);H===U&&(H=escape(U)),n=n.split(U).join(H)}var z=n.indexOf("#");-1!==z&&(this.hash=n.substr(z),n=n.slice(0,z));var $=n.indexOf("?");if(-1!==$?(this.search=n.substr($),this.query=n.substr($+1),t&&(this.query=S.parse(this.query)),n=n.slice(0,$)):t&&(this.search="",this.query={}),n&&(this.pathname=n),P[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var D=this.pathname||"",M=this.search||"";this.path=D+M}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&l(this.query)&&Object.keys(this.query).length&&(o=S.stringify(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||P[t])&&i!==!1?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+i+r+a+n},n.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(c(e)){var t=new n;t.parse(e,!1,!0),e=t}var r=new n;if(Object.keys(this).forEach(function(e){r[e]=this[e]},this),r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol)return Object.keys(e).forEach(function(t){"protocol"!==t&&(r[t]=e[t])}),P[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r;if(e.protocol&&e.protocol!==r.protocol){if(!P[e.protocol])return Object.keys(e).forEach(function(t){r[t]=e[t]}),r.href=r.format(),r;if(r.protocol=e.protocol,e.host||k[e.protocol])r.pathname=e.pathname;else{for(var i=(e.pathname||"").split("/");i.length&&!(e.host=i.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==i[0]&&i.unshift(""),i.length<2&&i.unshift(""),r.pathname=i.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var o=r.pathname||"",a=r.search||"";r.path=o+a}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var s=r.pathname&&"/"===r.pathname.charAt(0),l=e.host||e.pathname&&"/"===e.pathname.charAt(0),f=l||s||r.host&&e.pathname,h=f,d=r.pathname&&r.pathname.split("/")||[],i=e.pathname&&e.pathname.split("/")||[],g=r.protocol&&!P[r.protocol];if(g&&(r.hostname="",r.port=null,r.host&&(""===d[0]?d[0]=r.host:d.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===i[0]?i[0]=e.host:i.unshift(e.host)),e.host=null),f=f&&(""===i[0]||""===d[0])),l)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,d=i;else if(i.length)d||(d=[]),d.pop(),d=d.concat(i),r.search=e.search,r.query=e.query;else if(!p(e.search)){if(g){r.hostname=r.host=d.shift();var m=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;m&&(r.auth=m.shift(),r.host=r.hostname=m.shift())}return r.search=e.search,r.query=e.query,u(r.pathname)&&u(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!d.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var v=d.slice(-1)[0],y=(r.host||e.host)&&("."===v||".."===v)||""===v,b=0,w=d.length;w>=0;w--)v=d[w],"."==v?d.splice(w,1):".."===v?(d.splice(w,1),b++):b&&(d.splice(w,1),b--);if(!f&&!h)for(;b--;b)d.unshift("..");!f||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),y&&"/"!==d.join("/").substr(-1)&&d.push("");var x=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(g){r.hostname=r.host=x?"":d.length?d.shift():"";var m=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;m&&(r.auth=m.shift(),r.host=r.hostname=m.shift())}return f=f||r.host&&d.length,f&&!x&&d.unshift(""),d.length?r.pathname=d.join("/"):(r.pathname=null,r.path=null),u(r.pathname)&&u(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var e=this.host,t=d.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{punycode:239,querystring:242}],244:[function(e,t,r){"use strict";!function(e){var t=e.prototype,r=t.parseFromString;t.parseFromString=function(e,t){if(/^\s*text\/html\s*(?:;|$)/i.test(t)){var n=document.implementation.createHTMLDocument("");return e.toLowerCase().indexOf("<!doctype")>-1?n.documentElement.innerHTML=e:n.body.innerHTML=e,n}return r.apply(this,arguments)}}(DOMParser),window.system_scroll=window.scroll,window.scroll=function(e,t){window.cxp.mobile.scrollTo(""+e,""+t),window.system_scroll(e,t)}},{}],245:[function(e,t,r){(function(e){"use strict";e.window,
e.document;t.exports={convertFromLeanModel:function(e){var t=e,r=e.preferences||[];t.icons=e.icons||[];var n=r.src;if(delete r.src,t.content={src:n,type:"text/html"},t.preferences=[],Object.keys(r).forEach(function(e){t.preferences.push({name:e,value:r[e]})}),e.children){var i=e.children;t.children=[];var o=this;i.forEach(function(e){var r=o.convertFromLeanModel(e);t.children.push(r)})}return t}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],246:[function(e,t,r){"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])}return r},writable:!0,configurable:!0})},{}],247:[function(e,t,r){"use strict";window.b$.module("gadgets.pubsub",function(){function e(e,t,r,n){"boolean"!=typeof r&&(r=!0),c.publish(e,t,r,n)}function t(e,t){c.subscribe(e,t)}function r(e,t){c.unsubscribe(e,t)}function n(e){c.flush(e)}function i(e){function t(t){return"[{"+e+"}]."+t}var r=this;return{publish:function(e,n,i,o){r.publish(t(e),n,i,o)},subscribe:function(e,n){r.subscribe(t(e),n)},unsubscribe:function(e,n){r.unsubscribe(t(e),n)},flush:function(e){r.flush(t(e))}}}var o=window.b$.Class,a=o.extend(function(){this.callbacks=[]},{queue:[],subscribe:function(e){this.callbacks.push(e)},unsubscribe:function(e){e?this.callbacks=this.callbacks.filter(function(t){return t!==e}):this.callbacks=[]},publish:function(e,t){t&&this.flush(),this.callbacks.forEach(function(t){t(e)})},flush:function(){this.queue=[]}}),s=o.extend(function(){this.channels={}},{subscribe:function(e,t){this.channels[e]||(this.channels[e]=new a),this.channels[e].subscribe(t),window.cxp.mobile.subscribe(e)},unsubscribe:function(e,t){this.channels[e]&&(this.channels[e].unsubscribe(t),window.cxp.mobile.unsubscribe(e))},publish:function(e,t,r,n){this.channels[e]&&this.channels[e].publish(t,r),t=t||{},n=n||"","SYSTEM"!==n&&window.cxp.mobile.publish(e,JSON.stringify(t),n)},flush:function(e){this.channels[e]&&this.channels[e].flush()}}),c=new s;this.name="pubsub",this.publish=e,this.subscribe=t,this.unsubscribe=r,this.flush=n,this.channel=i})},{}],248:[function(e,t,r){"use strict";window.cxp=window.cxp||{},window.mobile=window.mobile||{},window.cxp.mobile=window.mobile,window.b$=window.b$||{},window.b$.portal=window.b$.portal||{},window.cxp.mobile.render=function(t,r,n,i,o,a,s,c,l,u,p){e("./common/object-assign-polyfill"),e("./common/dom-parser-polyfill"),e("javascript-detect-element-resize"),e("./common/pubsub");var f,h=/(iPhone|iPod|iPad).*AppleWebKit/i.test(navigator.userAgent);if(h){console.info("Portal Client Mobile is rendering in iOS mode");var d=e("./platforms/ios/ios-bridge");d.enable(),f=e("./platforms/ios/ios-page-renderer")}else console.info("Portal client mobile is rendering in Android mode"),f=e("./platforms/android/android-page-renderer");if(u){var g=e("./common/lean-model-converter");o=g.convertFromLeanModel(o)}window.cxp.mobile.plugins=a,window.b$.portal.loggedInUserGroup=p,o.contextItemName=c;var m=new f;m.render(document.getElementById(t),o,window.gadgets.pubsub,{portalName:c,localContextRoot:decodeURI(r),remoteContextRoot:decodeURI(n),apiRoot:decodeURI(i),logLevel:s,isPage:l})},window.renderWidget=window.cxp.mobile.render},{"./common/dom-parser-polyfill":244,"./common/lean-model-converter":245,"./common/object-assign-polyfill":246,"./common/pubsub":247,"./platforms/android/android-page-renderer":252,"./platforms/ios/ios-bridge":253,"./platforms/ios/ios-page-renderer":254,"javascript-detect-element-resize":237}],249:[function(e,t,r){"use strict";var n=function(e){this.size=e||1e3,this.buffer=[],this.decoratedStreams=[]};n.prototype.decorateStream=function(e){this.decoratedStreams.push(e)},n.prototype.write=function(e){this.buffer.length>=this.size&&this.buffer.shift(),this.buffer.push(e)},n.prototype.flush=function(){for(var e;e=this.buffer.shift();)this.decoratedStreams.forEach(function(t){t.write(e)})},n.prototype.clear=function(){this.buffer=[]},t.exports=n},{}],250:[function(e,t,r){"use strict";function n(e){e=e||{},this.printLevel=!!e.printLevel,this.printTimestamp=!!e.printTimestamp}n.prototype.write=function(e){function t(e,t){return Array(t+1-(e+"").length).join("0")+e}function r(){return"["+t(e.time.getHours(),2)+":"+t(e.time.getMinutes(),2)+":"+t(e.time.getSeconds(),2)+":"+t(e.time.getMilliseconds(),4)+"]"}var n,i=e.childName?e.name+"/"+e.childName:e.name;n=e.level<30?"log":e.level<40?"info":e.level<50?"warn":"error";var o=this.printTimestamp?r()+" ":"",a=this.printLevel?e.levelName.toUpperCase()+": ":"";console[n](o+a+i+": "+e.msg)},t.exports=n},{}],251:[function(e,t,r){(function(e){"use strict";var r=e.document,n=function(){};n.prototype.write=function(e){var t=r.createElement("IFRAME");t.setAttribute("src","log://?type="+e.levelName+"&msg="+e.msg+" ("+e.time+")"),r.documentElement.appendChild(t),t.parentNode.removeChild(t),t=null},t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],252:[function(e,t,r){"use strict";var n=e("../../render/page-renderer"),i=e("../../logging/console-plain-log-stream"),o=function(){n.call(this)};o.prototype=Object.create(n.prototype),o.prototype._createLogStreams=function(e){return[{level:e,stream:new i}]},o.prototype._renderForPlatform=function(e,t,r){t.start(e,r).then(function(e){var t="Item tree rendered in "+e.time+"ms",r=document.getElementsByTagName("html")[0],n=function(){window.cxp.mobile.resize(r.scrollHeight)};window.addResizeListener(r,n),console.log(t),window.cxp.mobile.itemLoaded()})["catch"](function(e){console.log(e)})},t.exports=o},{"../../logging/console-plain-log-stream":250,"../../render/page-renderer":257}],253:[function(e,t,r){(function(e){"use strict";var r=e.window,n=e.document;t.exports={enable:function(){function e(e){return encodeURIComponent(e).replace(/[!()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)}).replace(/[']/g,function(e){return"\\'"})}function t(e){var t=n.createElement("IFRAME");t.setAttribute("src",e),n.documentElement.appendChild(t),t.parentNode.removeChild(t),t=null}function i(e){t("bb-loaded://?time="+e)}function o(){t("bb-reload://")}function a(e,r){t("bb-resize://?w="+e+"&h="+r)}function s(e,r){t("bb-scroll://?x="+e+"&y="+r)}function c(r,n,i){t("bb-publish://?event="+e(r)+"&type="+e(i)+"&payload="+e(n))}function l(r){t("bb-subscribe://?event="+e(r))}function u(r){t("bb-unsubscribe://?event="+e(r))}function p(){if(0!==arguments.length){var r=[];Array.prototype.push.apply(r,arguments);for(var n=r.shift(),i=r.shift(),o=r,a=0;a<o.length;a++)o[a]=e(o[a]);t("bb-plugin://?plugin="+e(n)+"&method="+e(i)+"&params="+o.join("&params="))}}function f(e,t,n,i,o){for(var a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,r="x"==e?t:3&t|8;return r.toString(16)}),s=[e,t,a].join("."),c=function(){r.gadgets.pubsub.unsubscribe("plugin.success."+s,l),r.gadgets.pubsub.unsubscribe("plugin.error."+s,u)},l=function(e){e.keep||c(),i&&i(e.data)},u=function(e){e.keep||c(),o&&o(e.data)},f=0;f<n.length;f++){var h=n[f];"object"==typeof h&&(n[f]=JSON.stringify(h))}return r.gadgets.pubsub.subscribe("plugin.success."+s,l),r.gadgets.pubsub.subscribe("plugin.error."+s,u),p.apply(r.cxp.mobile,[e,t,a].concat(n)),a}r.XMLHttpRequest&&!function(e){XMLHttpRequest.prototype.send=function(t){this.setRequestHeader("bb.nsurlrequest.webview","true"),e.call(this,t)}}(XMLHttpRequest.prototype.send),r.cxp.mobile={loaded:i,reload:o,resizeTo:a,scrollTo:s,publish:c,subscribe:l,unsubscribe:u,callPlugin:f}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],254:[function(e,t,r){"use strict";var n=e("../../render/page-renderer"),i=e("../../logging/console-plain-log-stream"),o=e("../../logging/iframe-bridge-log-stream"),a=e("../../logging/buffered-log-stream"),s=function(){n.call(this)};s.prototype=Object.create(n.prototype),s.prototype._createLogStreams=function(e){var t=new i({printTimestamp:!0,printLevel:!0}),r=new a;r.decorateStream(t),window.bufferedLogStream=r;var n=new o;return[{level:e,stream:n},{level:e,stream:t},{level:e,stream:r}]},s.prototype._renderForPlatform=function(e,t,r){var n=document.getElementsByTagName("html")[0];window.addResizeListener(n,function(){window.cxp.mobile.resizeTo(n.scrollWidth,n.scrollHeight)}),t.start(e,r).then(function(e){window.cxp.mobile.loaded(e.time),window.cxp.mobile.resizeTo(n.scrollWidth,n.scrollHeight);var t="Widget-Engine: Item tree rendered in "+e.time+"ms";console.log(t)})["catch"](function(e){console.log(e)})},t.exports=s},{"../../logging/buffered-log-stream":249,"../../logging/console-plain-log-stream":250,"../../logging/iframe-bridge-log-stream":251,"../../render/page-renderer":257}],255:[function(e,t,r){"use strict";t.exports=function(e){return e=e||[],{name:"add-feature-plugin",postRead:function(t){return 0===e.length?t:(Array.isArray(t.features)||(t.features=[]),e.forEach(function(e){var r=t.features.some(function(t){return t.name===e});r||t.features.push({name:e,required:!1})}),t)}}}},{}],256:[function(e,t,r){"use strict";t.exports=function(){return{name:"expose-children-plugin",preRender:function(e,t,r){return e.children=r.children?r.children.map(function(e){return{id:e.id,name:e.name}}):[],e}}}},{}],257:[function(e,t,r){(function(r){"use strict";var n=r.window||{};r.window||(r.window=n);var i=e("cxp-web-apis"),o=e("../plugins/add-feature-plugin"),a=e("../plugins/expose-children-plugin"),s="bbCSRF",c=s,l=function(e){};l.prototype.render=function(e,t,r,n){n=n||{};var s=n.logLevel||"warn",l=n.localContextRoot||"",u=n.remoteContextRoot||"",p=n.apiRoot||"",f=n.portalName||"anonymous-portal",h=n.isPage||!1,d=i.createConfiguration({logStreams:this._createLogStreams(s)});d.set("compat",!0),d.set("fullConfigReplacement",!0),d.set("portalName",f),d.set("contextRoot",l),d.set("remoteContextRoot",u),d.set("apiRoot",p);var g=null;g&&d.set("csrfToken",{name:c,value:g});var m=i.getRenderer(d);m.addPlugin(a());var v={name:"cxp",config:d,render:m,model:i.getModel(d)};m.addPlugin(o([v.name])),m.addFeature(v),m.addFeature(r);var y=t;if(h){y=t.children;for(var b=0;b<y.length;b++)y[b].contextItemName=t.contextItemName}this._renderForPlatform(y,m,e)},l.prototype._createLogStreams=function(e){throw new Error("PageRenderer#_createLogStreams must be overridden.")},l.prototype._renderForPlatform=function(e,t,r){throw new Error("PageRenderer#_renderForPlatform must be overridden.")},t.exports=l}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../plugins/add-feature-plugin":255,"../plugins/expose-children-plugin":256,"cxp-web-apis":210}]},{},[248]);
//# sourceMappingURL=web-sdk-mobile.min.js.map
